[
  {
    "id": "cs204-t1-ex1",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Waterfall Model Analysis",
    "description": "Explain the Waterfall SDLC model, listing its phases, advantages, disadvantages, and when it should be used.",
    "difficulty": 2,
    "hints": [
      "Consider sequential nature",
      "Think about requirements stability",
      "Consider documentation needs"
    ],
    "solution": "Waterfall follows sequential phases: Requirements → Design → Implementation → Testing → Deployment → Maintenance. Advantages: Clear structure, thorough documentation, easy to manage. Disadvantages: Inflexible to changes, late delivery, high risk. Best for: stable requirements, regulated environments, well-understood domains."
  },
  {
    "id": "cs204-t1-ex2",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Agile vs Waterfall",
    "description": "Create a comparison table between Agile and Waterfall methodologies covering flexibility, documentation, customer involvement, and delivery frequency.",
    "difficulty": 2,
    "hints": [
      "Focus on adaptability",
      "Consider feedback cycles",
      "Think about documentation levels"
    ],
    "solution": "Waterfall: sequential, rigid, comprehensive docs, limited customer involvement, late delivery. Agile: iterative, flexible, minimal docs, continuous customer collaboration, frequent delivery. Choose Waterfall for stable requirements and regulatory needs; choose Agile for evolving requirements and rapid delivery needs."
  },
  {
    "id": "cs204-t1-ex3",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Spiral Model Risk Management",
    "description": "Explain how the Spiral model manages project risks through its iterative cycles. Provide an example of a high-risk project suited for this model.",
    "difficulty": 3,
    "hints": [
      "Consider risk-driven approach",
      "Think about prototyping",
      "Consider cost of iterations"
    ],
    "solution": "Spiral model uses risk-driven iterations: each cycle identifies risks, builds prototypes to mitigate them, and refines based on findings. Example: Medical device software - high risk requires prototype testing, regulatory validation, and iterative refinement. Each spiral addresses highest remaining risks before proceeding."
  },
  {
    "id": "cs204-t1-ex4",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Incremental Development",
    "description": "Design a 4-increment plan for building an e-commerce website, specifying features and business value for each increment.",
    "difficulty": 3,
    "hints": [
      "Start with core features",
      "Each increment delivers value",
      "Build progressively"
    ],
    "solution": "Increment 1: Product catalog (browse products). Increment 2: Shopping cart & checkout (enable sales). Increment 3: User accounts & order history (customer retention). Increment 4: Reviews & recommendations (engagement). Each increment is potentially shippable and delivers incremental business value."
  },
  {
    "id": "cs204-t1-ex5",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "V-Model Verification",
    "description": "Draw the V-Model and explain how each development phase pairs with a corresponding testing phase.",
    "difficulty": 2,
    "hints": [
      "V-shape pairs phases",
      "Left side: development",
      "Right side: testing"
    ],
    "solution": "V-Model pairs: Requirements ↔ Acceptance Testing, System Design ↔ System Testing, Detailed Design ↔ Integration Testing, Implementation ↔ Unit Testing. Each development phase plans for its corresponding test phase, ensuring verification at every level."
  },
  {
    "id": "cs204-t1-ex6",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "RAD Methodology",
    "description": "Explain Rapid Application Development (RAD) and describe a scenario where it would be appropriate and one where it would not.",
    "difficulty": 3,
    "hints": [
      "Consider rapid prototyping",
      "Think about user involvement",
      "Consider project size"
    ],
    "solution": "RAD uses rapid prototyping and iterative development with heavy user involvement. Appropriate: Internal dashboard for sales team (manageable scope, available users, need quick delivery). Inappropriate: Air traffic control system (safety-critical, extensive testing required, cannot rush)."
  },
  {
    "id": "cs204-t1-ex7",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "DevOps Culture",
    "description": "Describe the core cultural principles of DevOps and three practices that embody these principles.",
    "difficulty": 2,
    "hints": [
      "Consider collaboration",
      "Think about automation",
      "Consider shared responsibility"
    ],
    "solution": "DevOps principles: collaboration over silos, automation over manual work, continuous improvement, fast feedback, shared accountability. Practices: 1) CI/CD automates build/test/deploy, 2) Infrastructure as Code provides consistency, 3) Monitoring/Logging enables observability. Breaks down Dev/Ops barriers for faster, more reliable delivery."
  },
  {
    "id": "cs204-t1-ex8",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "SDLC Selection",
    "description": "For three projects (startup app, hospital system, mobile game), recommend an SDLC model and justify your choice.",
    "difficulty": 4,
    "hints": [
      "Consider requirements stability",
      "Think about risk tolerance",
      "Consider regulatory constraints"
    ],
    "solution": "Startup app: Agile (uncertain requirements, need speed, market feedback). Hospital system: Waterfall/V-Model (safety-critical, regulatory compliance, stable requirements). Mobile game: Iterative with prototyping (creative exploration, playtesting needed, iterative refinement)."
  },
  {
    "id": "cs204-t1-ex9",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Process Metrics",
    "description": "Identify five metrics for measuring development process effectiveness and explain how to use each one.",
    "difficulty": 3,
    "hints": [
      "Consider productivity and quality",
      "Think about leading indicators",
      "Consider actionable metrics"
    ],
    "solution": "1) Velocity: story points per sprint, measures productivity. 2) Defect density: bugs per KLOC, indicates quality. 3) Cycle time: time from start to done, measures efficiency. 4) Test coverage: code exercised by tests, quality indicator. 5) Lead time: request to deployment, customer perspective. Use trends to identify improvements."
  },
  {
    "id": "cs204-t1-ex10",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Technical Debt",
    "description": "Define technical debt, explain intentional vs unintentional debt, and propose a management strategy.",
    "difficulty": 4,
    "hints": [
      "Consider short-term vs long-term",
      "Think about payback strategies",
      "Consider tracking methods"
    ],
    "solution": "Technical debt: future cost of rework from quick solutions. Intentional: deliberate decision with payback plan. Unintentional: from lack of knowledge. Strategy: 1) Identify via code reviews/tools, 2) Track in backlog with priority, 3) Allocate 20% sprint capacity for payback, 4) Apply Boy Scout Rule, 5) Measure via velocity and quality trends."
  },
  {
    "id": "cs204-t1-ex11",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Continuous Integration",
    "description": "Explain what Continuous Integration is and describe three problems it solves.",
    "difficulty": 2,
    "hints": [
      "Consider integration challenges",
      "Think about feedback speed",
      "Consider automation"
    ],
    "solution": "CI: automated build/test on every commit. Solves: 1) Integration hell - frequent small integrations vs rare large merges. 2) \"Works on my machine\" - tests in standardized environment. 3) Late bug detection - immediate feedback while context fresh. Enables rapid feedback, reduces risk, maintains working build."
  },
  {
    "id": "cs204-t1-ex12",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Iterative Development",
    "description": "Explain the advantages of iterative development models and provide an example showing how iterations provide value.",
    "difficulty": 2,
    "hints": [
      "Think about feedback incorporation",
      "Consider risk reduction",
      "Think about early delivery"
    ],
    "solution": "Advantages: early delivery of working software, rapid feedback incorporation, risk reduction through incremental learning, adaptability to changing requirements. Example: Build CMS in iterations - v0.1: basic publishing, v0.2: image management (based on feedback), v0.3: approval workflow (emerged from usage). Each iteration delivers value and learns."
  },
  {
    "id": "cs204-t1-ex13",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Phase Deliverables",
    "description": "List the key deliverables for each Waterfall phase and explain the purpose of each.",
    "difficulty": 2,
    "hints": [
      "Consider documentation artifacts",
      "Think about stakeholder needs",
      "Consider traceability"
    ],
    "solution": "Requirements: SRS, use cases, acceptance criteria. Design: architecture doc, database design, UML diagrams. Implementation: source code, unit tests, documentation. Testing: test plans, test cases, defect reports. Deployment: user manuals, training materials, release notes. Maintenance: bug fixes, change requests, support docs."
  },
  {
    "id": "cs204-t1-ex14",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Handling Requirements Changes",
    "description": "Compare how Waterfall, Spiral, and Agile handle a major requirement change mid-project.",
    "difficulty": 4,
    "hints": [
      "Consider cost of change",
      "Think about flexibility",
      "Consider timeline impact"
    ],
    "solution": "Waterfall: formal change control, expensive rework of completed phases, significant delay. Spiral: next iteration addresses change via prototyping, moderate delay, manageable. Agile: reprioritize backlog, start new stories next sprint, minimal delay. Agile best handles change as it expects and embraces it."
  },
  {
    "id": "cs204-t1-ex15",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Methodology Selection",
    "description": "Develop a set of criteria for selecting an appropriate development methodology for a project.",
    "difficulty": 3,
    "hints": [
      "Consider multiple factors",
      "Think about project context",
      "Consider team capabilities"
    ],
    "solution": "Criteria: 1) Requirements stability (stable → Waterfall, evolving → Agile), 2) Risk tolerance (high → Spiral, low → varies), 3) Regulatory needs (yes → Waterfall, no → Agile), 4) Time pressure (high → Agile/RAD), 5) Team experience (Agile needs discipline), 6) Customer availability (Agile needs involvement), 7) Project size (large → may need structure)."
  },
  {
    "id": "cs204-t1-ex16",
    "subjectId": "cs204",
    "topicId": "cs204-topic-1",
    "type": "written",
    "title": "Modern Practices",
    "description": "Discuss how DevOps, CI/CD, and Infrastructure as Code work together to enable rapid, reliable software delivery.",
    "difficulty": 3,
    "hints": [
      "Think about automation end-to-end",
      "Consider consistency",
      "Think about deployment frequency"
    ],
    "solution": "DevOps provides culture (collaboration, shared responsibility). CI/CD automates pipeline (build, test, deploy on every commit). Infrastructure as Code ensures consistent environments (version-controlled infrastructure). Together: developers commit code → CI builds/tests → CD deploys to staging → automated tests → production deployment with IaC. Result: hours from code to production vs days/weeks."
  },
  {
    "id": "cs204-t2-ex1",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Stakeholder Identification",
    "description": "You are developing a hospital patient management system. Identify at least 8 different stakeholders who would have requirements for this system. For each stakeholder, describe their role and list 2-3 specific requirements they might have.",
    "difficulty": 1,
    "hints": [
      "Consider both direct users and indirect stakeholders",
      "Think about administrative, medical, and technical staff",
      "Don't forget patients and regulatory bodies"
    ],
    "solution": "**Key Stakeholders and Their Requirements:**\n\n1. **Doctors/Physicians**\n   - View complete patient medical history\n   - Prescribe medications with drug interaction checks\n   - Access lab results and imaging reports\n\n2. **Nurses**\n   - Update patient vital signs in real-time\n   - Receive medication administration alerts\n   - Access care plans and nursing notes\n\n3. **Patients**\n   - View appointment schedules and test results\n   - Request prescription refills online\n   - Communicate with healthcare providers\n\n4. **Hospital Administrators**\n   - Generate occupancy and utilization reports\n   - Track key performance indicators\n   - Manage staff scheduling and resources\n\n5. **Billing Department**\n   - Generate accurate invoices from treatments\n   - Process insurance claims automatically\n   - Track payment status and outstanding balances\n\n6. **IT Department**\n   - System must integrate with existing infrastructure\n   - Require comprehensive audit logging\n   - Need disaster recovery capabilities\n\n7. **Pharmacists**\n   - Receive electronic prescriptions\n   - Check drug interactions and allergies\n   - Track medication inventory\n\n8. **Regulatory Compliance Officers**\n   - Ensure HIPAA compliance for data privacy\n   - Generate compliance audit reports\n   - Maintain proper access controls and audit trails"
  },
  {
    "id": "cs204-t2-ex2",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Functional vs Non-Functional Requirements",
    "description": "Given the following requirements for an e-commerce platform, classify each as functional (F) or non-functional (NF). For non-functional requirements, identify the quality attribute category (performance, security, usability, reliability, etc.).\n\n1. Users can add items to a shopping cart\n2. The system shall handle 10,000 concurrent users\n3. Product search results appear within 2 seconds\n4. Users can pay using credit cards and PayPal\n5. The system shall be available 99.9% of the time\n6. All passwords must be hashed using bcrypt\n7. Users can track their order delivery status\n8. The website must work on mobile devices\n9. Failed transactions must be logged for audit\n10. The checkout process requires no more than 4 steps",
    "difficulty": 1,
    "hints": [
      "Functional requirements describe WHAT the system does",
      "Non-functional requirements describe HOW WELL the system performs",
      "Quality attributes include performance, security, usability, reliability, maintainability"
    ],
    "solution": "**Classification:**\n\n1. **F** - Users can add items to a shopping cart\n   - Describes a specific feature/function\n\n2. **NF (Performance/Scalability)** - Handle 10,000 concurrent users\n   - Specifies capacity constraint\n\n3. **NF (Performance)** - Search results within 2 seconds\n   - Response time requirement\n\n4. **F** - Pay using credit cards and PayPal\n   - Describes payment functionality\n\n5. **NF (Reliability/Availability)** - 99.9% availability\n   - Uptime requirement (allows ~8.76 hours downtime/year)\n\n6. **NF (Security)** - Passwords hashed using bcrypt\n   - Security implementation constraint\n\n7. **F** - Track order delivery status\n   - Describes tracking feature\n\n8. **NF (Usability/Portability)** - Work on mobile devices\n   - Accessibility and compatibility requirement\n\n9. **NF (Security/Auditability)** - Log failed transactions\n   - Audit and compliance requirement\n\n10. **NF (Usability)** - Checkout in 4 steps or fewer\n    - User experience constraint"
  },
  {
    "id": "cs204-t2-ex3",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Requirements Elicitation Techniques",
    "description": "You're gathering requirements for a new mobile banking app. For each of the following elicitation techniques, explain how you would apply it and what types of requirements it would help uncover:\n\n1. Interviews\n2. Surveys/Questionnaires\n3. Observation (Ethnography)\n4. Prototyping\n5. Document Analysis",
    "difficulty": 2,
    "hints": [
      "Consider the strengths and limitations of each technique",
      "Think about which stakeholders each technique works best with",
      "Consider combining techniques for comprehensive coverage"
    ],
    "solution": "**Elicitation Technique Applications:**\n\n**1. Interviews**\n- **Application:** Conduct one-on-one sessions with bank managers, tellers, customer service reps, and select customers. Use open-ended questions to understand pain points with current systems.\n- **Requirements Uncovered:** Core business rules, workflow requirements, exception handling needs, security policies, strategic priorities\n- **Best For:** Deep understanding of complex processes, uncovering unstated needs\n\n**2. Surveys/Questionnaires**\n- **Application:** Distribute online surveys to thousands of existing banking customers asking about feature priorities, current app usage patterns, and satisfaction levels.\n- **Requirements Uncovered:** User preferences, feature prioritization, demographics of user base, common pain points at scale\n- **Best For:** Gathering quantitative data from large user populations\n\n**3. Observation (Ethnography)**\n- **Application:** Spend time in bank branches watching how customers and tellers interact. Observe customers using existing banking apps or competitor apps.\n- **Requirements Uncovered:** Actual workflow patterns (vs. documented ones), usability issues, workarounds users employ, environmental constraints (lighting, noise affecting mobile use)\n- **Best For:** Understanding real-world usage context, discovering implicit requirements\n\n**4. Prototyping**\n- **Application:** Create low-fidelity wireframes of key screens (login, transfer, balance check) and conduct usability testing sessions with representative users.\n- **Requirements Uncovered:** UI/UX requirements, navigation preferences, feature discoverability issues, validation rules needed\n- **Best For:** Validating requirements, discovering usability requirements, resolving ambiguities\n\n**5. Document Analysis**\n- **Application:** Review existing banking regulations (PCI-DSS, KYC), competitor app documentation, existing system documentation, customer complaint logs.\n- **Requirements Uncovered:** Regulatory compliance requirements, industry standards, constraints from legacy systems, known issues to address\n- **Best For:** Understanding constraints, compliance requirements, learning from existing solutions"
  },
  {
    "id": "cs204-t2-ex4",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Writing User Stories",
    "description": "Convert the following informal requirements into properly formatted user stories with acceptance criteria. Use the format: \"As a [role], I want [feature] so that [benefit].\"\n\n1. \"We need login functionality\"\n2. \"The system should send notifications\"\n3. \"Users need to be able to search products\"\n4. \"There should be a reporting feature\"",
    "difficulty": 2,
    "hints": [
      "Be specific about the user role",
      "Clearly state the business value/benefit",
      "Acceptance criteria should be testable"
    ],
    "solution": "**User Stories with Acceptance Criteria:**\n\n**1. Login Functionality**\n*User Story:* As a registered customer, I want to log in using my email and password so that I can access my account securely.\n\n*Acceptance Criteria:*\n- Given valid credentials, user is redirected to dashboard\n- Given invalid credentials, error message displays without revealing which field is wrong\n- After 5 failed attempts, account is locked for 15 minutes\n- \"Remember me\" option keeps user logged in for 30 days\n- Password reset link is available on login page\n\n---\n\n**2. Notifications**\n*User Story:* As a customer, I want to receive push notifications about my order status so that I stay informed without checking the app repeatedly.\n\n*Acceptance Criteria:*\n- Notification sent when order is confirmed\n- Notification sent when order ships with tracking link\n- Notification sent when order is delivered\n- User can enable/disable notification types in settings\n- Notifications include order number and brief status\n\n---\n\n**3. Product Search**\n*User Story:* As a shopper, I want to search for products by name, category, or keyword so that I can quickly find items I want to purchase.\n\n*Acceptance Criteria:*\n- Search results display within 2 seconds\n- Results can be filtered by price, rating, availability\n- Results can be sorted by relevance, price, or rating\n- Search suggestions appear after typing 3 characters\n- \"No results\" page suggests alternative searches\n\n---\n\n**4. Reporting Feature**\n*User Story:* As a store manager, I want to generate sales reports by date range so that I can analyze business performance and make informed decisions.\n\n*Acceptance Criteria:*\n- Reports available for daily, weekly, monthly, custom ranges\n- Reports show total revenue, units sold, top products\n- Reports can be exported to CSV and PDF formats\n- Reports load within 5 seconds for up to 1 year of data\n- Dashboard shows key metrics at a glance"
  },
  {
    "id": "cs204-t2-ex5",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Use Case Diagram Creation",
    "description": "Create a use case diagram description for a library management system. Identify the actors and at least 8 use cases. Show relationships including associations, <<include>>, and <<extend>> relationships where appropriate. Describe the diagram in text format suitable for conversion to UML.",
    "difficulty": 3,
    "hints": [
      "Identify all actors who interact with the system",
      "Use <<include>> for mandatory sub-behaviors",
      "Use <<extend>> for optional behaviors",
      "Consider both primary and secondary actors"
    ],
    "solution": "**Library Management System - Use Case Diagram**\n\n**Actors:**\n- Librarian (Primary)\n- Library Member (Primary)\n- System Administrator (Secondary)\n- External Book Database (Secondary System)\n\n**Use Cases and Relationships:**\n\n```\n[Library Member]\n    |---> (Search Catalog)\n    |---> (Borrow Book)\n    |         |---<<include>>---> (Check Availability)\n    |         |---<<extend>>---> (Place Reservation) [condition: book unavailable]\n    |---> (Return Book)\n    |---> (View Borrowing History)\n    |---> (Pay Fines)\n    |---> (Renew Book)\n              |---<<include>>---> (Check Availability)\n\n[Librarian]\n    |---> (Search Catalog)\n    |---> (Manage Books)\n    |         |---<<include>>---> (Add Book)\n    |         |---<<include>>---> (Update Book Details)\n    |         |---<<include>>---> (Remove Book)\n    |---> (Manage Members)\n    |---> (Process Returns)\n    |         |---<<extend>>---> (Calculate Fine) [condition: overdue]\n    |---> (Generate Reports)\n\n[System Administrator]\n    |---> (Manage User Accounts)\n    |---> (Configure System Settings)\n    |---> (Backup Database)\n\n[External Book Database]\n    |<--- (Search Catalog) [for ISBN lookup]\n    |<--- (Add Book) [for auto-fill metadata]\n```\n\n**Use Case Descriptions:**\n\n1. **Search Catalog** - Actor searches books by title, author, ISBN, or subject\n2. **Borrow Book** - Member checks out a book, includes availability check\n3. **Return Book** - Book is returned and checked back into inventory\n4. **Renew Book** - Extend borrowing period if no reservations exist\n5. **Place Reservation** - Reserve a book currently borrowed by another member\n6. **Manage Books** - CRUD operations on book inventory\n7. **Process Returns** - Librarian processes returned books, calculates fines if late\n8. **Generate Reports** - Create reports on circulation, popular books, overdue items"
  },
  {
    "id": "cs204-t2-ex6",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Requirements Ambiguity Analysis",
    "description": "Analyze the following requirements for ambiguity, incompleteness, or inconsistency. Identify the problems and rewrite each requirement to be clear, complete, and testable.\n\n1. \"The system should be fast\"\n2. \"Users will be able to easily navigate the interface\"\n3. \"The application must handle a large number of requests\"\n4. \"Data should be backed up regularly\"\n5. \"The system shall be secure\"",
    "difficulty": 2,
    "hints": [
      "Look for vague adjectives like \"fast\", \"easy\", \"large\"",
      "Requirements should be measurable and testable",
      "Consider adding specific metrics and conditions"
    ],
    "solution": "**Requirements Analysis and Improvements:**\n\n**1. Original:** \"The system should be fast\"\n- **Problems:** Vague (\"fast\" is subjective), no metrics, no context for what operations\n- **Improved:** \"The system shall display search results within 2 seconds for queries returning up to 1000 results. Page load times shall not exceed 3 seconds on a standard 4G connection.\"\n\n**2. Original:** \"Users will be able to easily navigate the interface\"\n- **Problems:** \"Easily\" is subjective, not measurable, no definition of success\n- **Improved:** \"New users shall be able to complete core tasks (create account, make purchase, track order) without external help within 5 minutes. The interface shall score at least 80 on the System Usability Scale (SUS).\"\n\n**3. Original:** \"The application must handle a large number of requests\"\n- **Problems:** \"Large\" is undefined, no peak vs. sustained rate, no degradation criteria\n- **Improved:** \"The application shall handle 10,000 concurrent users with an average response time under 500ms. Under peak load of 50,000 concurrent users, response time shall not exceed 2 seconds and error rate shall remain below 0.1%.\"\n\n**4. Original:** \"Data should be backed up regularly\"\n- **Problems:** \"Regularly\" is vague, no retention policy, no recovery requirements\n- **Improved:** \"Production database shall be backed up incrementally every 4 hours and fully every 24 hours. Backups shall be retained for 30 days. Recovery Point Objective (RPO): 4 hours. Recovery Time Objective (RTO): 2 hours.\"\n\n**5. Original:** \"The system shall be secure\"\n- **Problems:** \"Secure\" is too broad, no specific measures, not testable\n- **Improved:** \"The system shall encrypt all data in transit using TLS 1.3+. Passwords shall be hashed using bcrypt with cost factor 12. The system shall pass OWASP Top 10 vulnerability scanning. Multi-factor authentication shall be required for administrative access.\""
  },
  {
    "id": "cs204-t2-ex7",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Requirements Prioritization with MoSCoW",
    "description": "You're building a food delivery app with limited budget for the MVP. Prioritize the following requirements using the MoSCoW method (Must have, Should have, Could have, Won't have for MVP). Justify each prioritization.\n\nRequirements:\n1. User registration and login\n2. Browse restaurants and menus\n3. Place and pay for orders\n4. Real-time order tracking\n5. Customer ratings and reviews\n6. Loyalty rewards program\n7. Push notifications\n8. In-app chat with delivery driver\n9. Order history\n10. Multiple payment methods",
    "difficulty": 2,
    "hints": [
      "Must haves are essential for the product to function",
      "Should haves add significant value but app can launch without them",
      "Could haves are nice to have but clearly lower priority",
      "Won't haves are explicitly out of scope for MVP"
    ],
    "solution": "**MoSCoW Prioritization for Food Delivery MVP:**\n\n**MUST HAVE (Essential for MVP launch)**\n\n1. **User registration and login** - Cannot process orders without user accounts\n2. **Browse restaurants and menus** - Core discovery functionality\n3. **Place and pay for orders** - Primary business transaction capability\n\n*Justification:* These three features form the minimum viable product. Without any one of them, the app cannot fulfill its core purpose.\n\n---\n\n**SHOULD HAVE (Important, include if possible)**\n\n7. **Push notifications** - Users expect order status updates; significantly improves experience\n9. **Order history** - Users need to reorder favorites and track past purchases\n10. **Multiple payment methods** - Credit card minimum, but adding alternatives (PayPal, Apple Pay) increases conversion\n\n*Justification:* These features significantly improve user experience and conversion rates. They should be included if timeline permits, or added in first update.\n\n---\n\n**COULD HAVE (Desirable but not necessary)**\n\n4. **Real-time order tracking** - Great feature but users can receive status notifications instead\n5. **Customer ratings and reviews** - Valuable but can launch with curated restaurant list initially\n\n*Justification:* These are differentiating features that can be added post-launch. The app functions without them, though user experience is enhanced with them.\n\n---\n\n**WON'T HAVE (Out of scope for MVP)**\n\n6. **Loyalty rewards program** - Requires established user base to be valuable; complex to implement\n8. **In-app chat with delivery driver** - Phone calls work; complex real-time feature\n\n*Justification:* These are advanced features that require significant development effort and make more sense once the core product is proven. They add complexity without addressing core value proposition."
  },
  {
    "id": "cs204-t2-ex8",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Use Case Specification",
    "description": "Write a detailed use case specification for \"Process Online Order\" in an e-commerce system. Include: Use Case Name, Primary Actor, Preconditions, Main Success Scenario (at least 8 steps), Alternative Flows (at least 2), Exception Flows (at least 2), and Postconditions.",
    "difficulty": 3,
    "hints": [
      "Main scenario should describe the \"happy path\"",
      "Alternative flows are valid variations of the main flow",
      "Exception flows handle error conditions",
      "Each step should be an observable action"
    ],
    "solution": "**Use Case Specification: Process Online Order**\n\n**Use Case ID:** UC-004\n**Use Case Name:** Process Online Order\n**Primary Actor:** Customer\n**Secondary Actors:** Payment Gateway, Inventory System, Email Service\n**Scope:** E-Commerce Platform\n\n---\n\n**Preconditions:**\n- Customer is logged into their account\n- Customer has at least one item in shopping cart\n- Products in cart are marked as available in inventory\n\n---\n\n**Main Success Scenario:**\n\n1. Customer clicks \"Proceed to Checkout\"\n2. System displays order summary with items, quantities, and subtotal\n3. Customer confirms or modifies delivery address\n4. System calculates shipping cost based on address and displays updated total\n5. Customer selects shipping method (standard/express)\n6. Customer selects payment method and enters payment details\n7. System validates payment information format\n8. System sends payment request to Payment Gateway\n9. Payment Gateway authorizes transaction and returns confirmation\n10. System reserves inventory for ordered items\n11. System creates order record with \"Processing\" status\n12. System sends order confirmation email to customer\n13. System displays order confirmation page with order number\n\n---\n\n**Alternative Flows:**\n\n**AF1: Guest Checkout (branches from step 1)**\n1a. Customer is not logged in\n1b. Customer selects \"Checkout as Guest\"\n1c. Customer enters email and shipping information\n1d. System creates temporary session\n1e. Continue from step 2\n\n**AF2: Apply Discount Code (branches from step 2)**\n2a. Customer enters promotional code\n2b. System validates code is active and applicable\n2c. System applies discount and updates total\n2d. Continue from step 3\n\n**AF3: Saved Payment Method (replaces step 6)**\n6a. Customer selects previously saved payment method\n6b. Customer enters CVV for verification\n6c. Continue from step 7\n\n---\n\n**Exception Flows:**\n\n**EF1: Payment Declined (branches from step 9)**\n9a. Payment Gateway returns decline response\n9b. System displays payment failure message with reason\n9c. System prompts customer to try different payment method\n9d. Return to step 6\n\n**EF2: Item Out of Stock (branches from step 10)**\n10a. Inventory system reports insufficient stock\n10b. System releases payment authorization\n10c. System displays out-of-stock message\n10d. System offers alternatives: remove item, notify when available, or cancel order\n10e. Customer makes selection\n10f. If items remain, return to step 2; otherwise end\n\n---\n\n**Postconditions:**\n- Order record exists with unique order number\n- Payment is authorized/captured\n- Inventory is reserved for order items\n- Customer received confirmation email\n- Order appears in customer's order history"
  },
  {
    "id": "cs204-t2-ex9",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Requirements Traceability Matrix",
    "description": "Create a requirements traceability matrix for a simple task management application. Include at least 6 requirements traced to their source, related design components, test cases, and current status. Explain why requirements traceability is important.",
    "difficulty": 3,
    "hints": [
      "Include requirement ID, description, source, and priority",
      "Show bidirectional tracing (forward and backward)",
      "Consider what happens when requirements change"
    ],
    "solution": "**Requirements Traceability Matrix - Task Management App**\n\n| Req ID | Requirement Description | Source | Priority | Design Component | Test Case(s) | Status |\n|--------|------------------------|--------|----------|------------------|--------------|--------|\n| REQ-001 | User can create a new task with title and description | User Interview #3 | Must | TaskService.create(), TaskForm component | TC-001, TC-002 | Implemented |\n| REQ-002 | Tasks can be assigned a due date | Stakeholder Workshop | Must | Task model, DatePicker component | TC-003, TC-004 | Implemented |\n| REQ-003 | Tasks can be marked as complete | User Interview #1, #3 | Must | TaskService.complete(), TaskCard component | TC-005 | Implemented |\n| REQ-004 | System sends reminder 24 hours before due date | Product Manager | Should | NotificationService, TaskScheduler | TC-010, TC-011 | In Progress |\n| REQ-005 | Tasks can be organized into projects | User Survey (67% requested) | Should | Project model, ProjectService | TC-015, TC-016 | Not Started |\n| REQ-006 | User can filter tasks by status and due date | Usability Testing | Could | TaskFilter component, TaskService.filter() | TC-020, TC-021 | Not Started |\n\n---\n\n**Importance of Requirements Traceability:**\n\n1. **Impact Analysis:** When a requirement changes, the matrix immediately shows which design components and test cases are affected. For example, if REQ-002 changes to support time (not just date), we know to update the Task model, DatePicker, and test cases TC-003/TC-004.\n\n2. **Verification Coverage:** Ensures every requirement has associated test cases. The matrix reveals gaps—any requirement without test cases needs attention before release.\n\n3. **Scope Management:** Links requirements to their original source, helping prioritize and justify features. If stakeholders question why REQ-005 exists, we can point to user survey data.\n\n4. **Progress Tracking:** Status column provides quick visibility into implementation progress across all requirements.\n\n5. **Compliance:** Many industries require proof that all requirements were implemented and tested. The matrix provides auditable evidence.\n\n6. **Change Management:** When sources change (regulations update, stakeholder leaves), we can identify affected requirements and reassess priorities."
  },
  {
    "id": "cs204-t2-ex10",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Requirements Validation Techniques",
    "description": "You've completed the requirements specification for a flight booking system. Describe four different validation techniques you would use to ensure the requirements are correct, complete, and consistent. For each technique, explain the process and what types of issues it would catch.",
    "difficulty": 3,
    "hints": [
      "Consider both formal and informal techniques",
      "Think about involving different stakeholders",
      "Some techniques are better for certain types of issues"
    ],
    "solution": "**Requirements Validation Techniques for Flight Booking System:**\n\n**1. Requirements Review/Walkthrough**\n\n*Process:*\n- Schedule structured review meetings with stakeholders (business analysts, developers, testers, end users)\n- Distribute requirements document in advance for preparation\n- Walk through each requirement systematically\n- Reviewers identify issues, ask questions, suggest improvements\n- Document all findings and track resolution\n\n*Issues Caught:*\n- Ambiguous requirements (\"flexible cancellation\" means what exactly?)\n- Missing requirements (no mention of seat selection?)\n- Inconsistencies between requirements (REQ-12 says 30-minute hold, REQ-45 says 15-minute)\n- Unrealistic requirements (real-time pricing updates every second is expensive)\n- Stakeholder misunderstandings before development begins\n\n---\n\n**2. Prototyping**\n\n*Process:*\n- Create clickable wireframes/mockups of key user flows (search, booking, payment)\n- Conduct usability testing sessions with representative users\n- Observe users attempting to complete tasks\n- Gather feedback on missing features, confusing flows, and preferences\n\n*Issues Caught:*\n- Usability problems (users can't find multi-city booking option)\n- Missing UI requirements (need passenger count selector on search)\n- Workflow issues (users expect to see total price before entering payment info)\n- Discovered requirements users didn't think to mention (want to save traveler profiles)\n\n---\n\n**3. Requirements Inspection (Formal Review)**\n\n*Process:*\n- Apply checklist of quality criteria (complete, consistent, testable, traceable)\n- Inspect each requirement against checklist criteria\n- Use formal defect classification (missing, ambiguous, inconsistent, incorrect)\n- Calculate metrics (defects per page, defect density)\n- Requirement not approved until defects resolved\n\n*Issues Caught:*\n- Untestable requirements (\"system shall be user-friendly\")\n- Missing acceptance criteria\n- Requirements without traceability to source\n- Technical impossibilities (guarantee 100% uptime)\n- Incomplete exception handling (what if payment fails mid-transaction?)\n\n---\n\n**4. Model Validation / Simulation**\n\n*Process:*\n- Create formal models (state diagrams, sequence diagrams) from requirements\n- Trace scenarios through models to verify completeness\n- Use simulation tools to execute models if available\n- Verify edge cases and exception paths\n- Cross-reference model states with documented requirements\n\n*Issues Caught:*\n- Missing state transitions (booking expires but no documented behavior)\n- Deadlock situations (payment pending + inventory released = inconsistent state)\n- Race conditions (two users booking last seat simultaneously)\n- Incomplete process flows (what triggers \"booking confirmed\" state?)\n- Logical contradictions that aren't obvious in text form"
  },
  {
    "id": "cs204-t2-ex11",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Natural Language Requirements Analysis",
    "description": "Analyze the following natural language requirements document excerpt for a university registration system. Identify at least 8 specific problems (ambiguities, inconsistencies, omissions, etc.) and suggest how to fix each one.\n\n\"Students should be able to register for classes quickly. The system will prevent overenrollment. Professors can see their class rosters. Prerequisites must be satisfied. The registration period opens in the second week of the semester. Students can drop classes without penalty during the first week. Administrative users have access to everything. The system should handle many concurrent users.\"",
    "difficulty": 4,
    "hints": [
      "Look for undefined terms and vague language",
      "Check for logical inconsistencies",
      "Identify missing stakeholder needs",
      "Consider operational requirements"
    ],
    "solution": "**Requirements Analysis - Identified Problems:**\n\n**1. Vague Performance Requirement**\n- *Problem:* \"register for classes quickly\" - no measurable criteria\n- *Fix:* \"The registration process shall complete within 5 seconds from course selection to confirmation, measured at 95th percentile during peak load.\"\n\n**2. Undefined Mechanism**\n- *Problem:* \"prevent overenrollment\" - doesn't specify how or what happens when attempted\n- *Fix:* \"The system shall prevent registration when enrolled count equals course capacity. Users attempting to register for full courses shall be offered waitlist enrollment if available, or shown alternative sections.\"\n\n**3. Missing Functionality**\n- *Problem:* \"Professors can see their class rosters\" - view only? What actions can they take?\n- *Fix:* \"Professors can view class rosters, export to CSV/PDF, send mass emails to enrolled students, and view student photos if authorized.\"\n\n**4. Incomplete Constraint**\n- *Problem:* \"Prerequisites must be satisfied\" - who checks? What if override needed?\n- *Fix:* \"The system shall automatically verify prerequisite completion before allowing registration. Department advisors can grant prerequisite overrides with documented justification.\"\n\n**5. Timeline Inconsistency**\n- *Problem:* Registration opens \"second week\" but drop without penalty is \"first week\" - these conflict\n- *Fix:* Clarify timeline: \"Registration opens during Week 8 of the prior semester. Drop without penalty period extends through Week 2 of the current semester.\"\n\n**6. Overly Broad Permission**\n- *Problem:* \"Administrative users have access to everything\" - security risk, no role definition\n- *Fix:* Define specific administrative roles: \"Registrar staff can modify any enrollment. Department admins can modify enrollments within their department. System admins can manage user accounts and system configuration.\"\n\n**7. Vague Scalability Requirement**\n- *Problem:* \"handle many concurrent users\" - not measurable\n- *Fix:* \"The system shall support 5,000 concurrent users during registration periods while maintaining response times under 3 seconds.\"\n\n**8. Missing Requirements - Omissions Identified:**\n- *Problem:* No mention of: waitlists, credit hour limits, advisor holds, registration time windows, audit enrollment, cross-registration, accessibility requirements\n- *Fix:* Add requirements for each: \"Students may register for maximum 18 credit hours without advisor override. Students with registration holds cannot enroll until holds are cleared.\""
  },
  {
    "id": "cs204-t2-ex12",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Acceptance Criteria with Gherkin",
    "description": "Write acceptance criteria in Gherkin format (Given-When-Then) for the following user story:\n\n\"As an online shopper, I want to apply a discount code to my order so that I can save money on my purchase.\"\n\nWrite at least 5 scenarios covering the main success path and edge cases.",
    "difficulty": 3,
    "hints": [
      "Given establishes the context/preconditions",
      "When describes the action being tested",
      "Then describes the expected outcome",
      "Consider invalid codes, expired codes, and combination rules"
    ],
    "solution": "**Feature: Apply Discount Code to Order**\n\n```gherkin\nFeature: Apply Discount Code\n  As an online shopper\n  I want to apply a discount code to my order\n  So that I can save money on my purchase\n\n  Background:\n    Given I am logged in as a registered customer\n    And I have items totaling $100.00 in my cart\n    And I am on the checkout page\n\n  Scenario: Successfully apply a valid percentage discount code\n    Given a valid discount code \"SAVE20\" exists for 20% off\n    When I enter \"SAVE20\" in the discount code field\n    And I click \"Apply\"\n    Then I should see a success message \"Discount applied: 20% off\"\n    And the order total should be reduced to $80.00\n    And the discount should be displayed as \"-$20.00\"\n\n  Scenario: Successfully apply a valid fixed amount discount code\n    Given a valid discount code \"FLAT15\" exists for $15 off orders over $50\n    When I enter \"FLAT15\" in the discount code field\n    And I click \"Apply\"\n    Then I should see a success message \"Discount applied: $15.00 off\"\n    And the order total should be reduced to $85.00\n\n  Scenario: Attempt to apply an invalid discount code\n    When I enter \"INVALIDCODE\" in the discount code field\n    And I click \"Apply\"\n    Then I should see an error message \"Invalid discount code\"\n    And the order total should remain $100.00\n    And no discount should be applied\n\n  Scenario: Attempt to apply an expired discount code\n    Given a discount code \"SUMMER23\" expired on 2023-09-01\n    When I enter \"SUMMER23\" in the discount code field\n    And I click \"Apply\"\n    Then I should see an error message \"This discount code has expired\"\n    And the order total should remain $100.00\n\n  Scenario: Attempt to apply code that doesn't meet minimum purchase\n    Given a valid discount code \"BIG50\" exists for $50 off orders over $200\n    And my cart total is $100.00\n    When I enter \"BIG50\" in the discount code field\n    And I click \"Apply\"\n    Then I should see an error message \"Minimum purchase of $200.00 required for this code\"\n    And the order total should remain $100.00\n\n  Scenario: Replace existing discount code with a new one\n    Given I have already applied discount code \"SAVE10\" for 10% off\n    And the order total shows $90.00\n    When I enter \"SAVE20\" in the discount code field\n    And I click \"Apply\"\n    Then I should see a confirmation \"Replace existing discount?\"\n    When I confirm replacement\n    Then the new discount \"SAVE20\" should be applied\n    And the order total should be $80.00\n\n  Scenario: Remove applied discount code\n    Given I have already applied discount code \"SAVE20\" for 20% off\n    When I click \"Remove\" next to the applied discount\n    Then the discount should be removed\n    And the order total should return to $100.00\n    And the discount code field should be empty\n```"
  },
  {
    "id": "cs204-t2-ex13",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Non-Functional Requirements Specification",
    "description": "Write detailed non-functional requirements for a healthcare patient portal. Cover these quality attributes with at least 2 specific, measurable requirements each:\n1. Performance\n2. Security\n3. Availability\n4. Usability\n5. Compliance",
    "difficulty": 4,
    "hints": [
      "NFRs should be measurable and testable",
      "Healthcare systems have strict compliance requirements",
      "Consider both normal and peak load scenarios",
      "Include specific standards and regulations"
    ],
    "solution": "**Non-Functional Requirements - Healthcare Patient Portal**\n\n---\n\n**1. PERFORMANCE**\n\n**NFR-PERF-001:** The system shall display patient dashboard within 2 seconds of login completion, measured at 95th percentile, when system is operating under normal load (up to 5,000 concurrent users).\n\n**NFR-PERF-002:** Search queries against patient records shall return results within 3 seconds for datasets up to 10 years of patient history, including lab results, prescriptions, and visit summaries.\n\n**NFR-PERF-003:** Document uploads (lab results, images) up to 25MB shall complete within 30 seconds on a standard broadband connection (10 Mbps upload).\n\n---\n\n**2. SECURITY**\n\n**NFR-SEC-001:** All data transmission shall be encrypted using TLS 1.3 or higher. All data at rest shall be encrypted using AES-256 encryption.\n\n**NFR-SEC-002:** User sessions shall automatically terminate after 15 minutes of inactivity. Re-authentication shall be required for any action involving PHI after session timeout.\n\n**NFR-SEC-003:** Failed login attempts shall trigger account lockout after 5 consecutive failures. Lockout duration shall be 30 minutes, with option for administrator unlock.\n\n**NFR-SEC-004:** All access to Protected Health Information (PHI) shall be logged with timestamp, user ID, patient ID, and action performed. Logs shall be immutable and retained for 7 years.\n\n---\n\n**3. AVAILABILITY**\n\n**NFR-AVAIL-001:** The system shall maintain 99.9% uptime, measured monthly, excluding scheduled maintenance windows. This allows maximum 43.8 minutes of unplanned downtime per month.\n\n**NFR-AVAIL-002:** Scheduled maintenance shall occur only during designated windows (Sundays 2:00-6:00 AM EST) with 72-hour advance notice to users.\n\n**NFR-AVAIL-003:** In the event of primary data center failure, the system shall failover to secondary site within 15 minutes with Recovery Point Objective (RPO) of 5 minutes (maximum data loss).\n\n---\n\n**4. USABILITY**\n\n**NFR-USE-001:** The portal shall comply with WCAG 2.1 Level AA accessibility guidelines, enabling use by patients with visual, auditory, and motor impairments.\n\n**NFR-USE-002:** First-time users shall be able to complete core tasks (view appointments, access test results, send message to provider) without training, validated by usability testing achieving 85% task completion rate.\n\n**NFR-USE-003:** The interface shall support English and Spanish languages. Text size shall be adjustable from 100% to 200% without loss of functionality.\n\n**NFR-USE-004:** All pages shall be fully functional on mobile devices (iOS 14+, Android 10+) and tablets, with responsive design adapting to screen sizes from 320px to 2560px width.\n\n---\n\n**5. COMPLIANCE**\n\n**NFR-COMP-001:** The system shall comply with HIPAA Security Rule (45 CFR Part 164) and Privacy Rule requirements, including access controls, audit controls, and transmission security.\n\n**NFR-COMP-002:** Patient data handling shall comply with HITECH Act requirements, including breach notification capabilities within 60 days of discovery.\n\n**NFR-COMP-003:** The system shall support patient rights under 21st Century Cures Act, including providing complete medical records export in FHIR R4 format within 5 business days of request.\n\n**NFR-COMP-004:** Annual third-party security assessment (SOC 2 Type II) shall be conducted and passed, with results available to healthcare organization administrators."
  },
  {
    "id": "cs204-t2-ex14",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Requirements Conflict Resolution",
    "description": "The following requirements have been gathered for a video streaming platform. Identify the conflicts between requirements and propose resolutions that balance stakeholder needs.\n\n1. Marketing: \"Video quality should automatically adjust to highest available\"\n2. Engineering: \"Default to 720p to minimize server bandwidth costs\"\n3. Users: \"Remember my quality preference and never auto-adjust\"\n4. Legal: \"Content must stream at original quality for premium subscribers\"\n5. Product: \"New users should get best experience to improve conversion\"",
    "difficulty": 4,
    "hints": [
      "Map each requirement to its stakeholder priority",
      "Look for ways to satisfy multiple constraints",
      "Consider user preferences as overrides",
      "Think about different user segments"
    ],
    "solution": "**Requirements Conflict Analysis and Resolution**\n\n---\n\n**IDENTIFIED CONFLICTS:**\n\n**Conflict A: Auto-adjust vs. User Preference (Marketing/Users)**\n- Marketing wants automatic highest quality\n- Users want their preference remembered, no auto-adjustment\n- These directly contradict on adaptation behavior\n\n**Conflict B: Highest Quality vs. Cost Optimization (Marketing/Engineering)**\n- Marketing: maximize quality\n- Engineering: minimize bandwidth costs with 720p default\n- Direct conflict on default quality level\n\n**Conflict C: Premium Quality vs. Adaptive (Legal/Marketing)**\n- Legal requires original quality for premium subscribers\n- Marketing wants adaptive streaming\n- Conflict for premium tier behavior\n\n**Conflict D: Bandwidth vs. Conversion (Engineering/Product)**\n- Engineering wants to minimize bandwidth\n- Product wants best experience for new users\n- First-time user experience conflicts with cost goals\n\n---\n\n**PROPOSED RESOLUTION:**\n\n**Unified Quality Strategy with User Segments:**\n\n```\nQuality Setting Logic:\n\n1. IF user is Premium Subscriber:\n   - Default: Original/Source Quality (satisfies Legal)\n   - Allow: Manual downgrade only\n   - Rationale: Premium pays for best quality\n\n2. IF user is Free/Standard AND has set preference:\n   - Use: Saved preference (satisfies Users)\n   - Adaptive: Only within user's maximum preference\n   - Rationale: Respect returning user choices\n\n3. IF user is New (first session):\n   - Default: Auto-adaptive to highest stable quality (satisfies Product/Marketing)\n   - Prompt: After first video, ask to save preference\n   - Rationale: Best first impression, then capture preference\n\n4. IF user is Free/Standard AND no preference saved:\n   - Default: 720p (satisfies Engineering)\n   - Show: \"Upgrade quality\" button prominently\n   - Rationale: Balance cost with easy override\n```\n\n---\n\n**REQUIREMENTS REWRITE:**\n\n**REQ-QOS-001 (Marketing + Product):** \"For new users in their first session, video quality shall auto-adapt to the highest sustainable quality based on detected connection speed.\"\n\n**REQ-QOS-002 (Users):** \"After a user's first video completion, the system shall prompt to save quality preference. Saved preferences shall override automatic quality selection.\"\n\n**REQ-QOS-003 (Engineering):** \"For non-premium users without saved preferences, default quality shall be 720p. Adaptive streaming shall not exceed user's subscription tier maximum.\"\n\n**REQ-QOS-004 (Legal):** \"Premium subscribers shall receive content at original source quality by default. Premium users may manually select lower quality but shall not experience automatic downgrade.\"\n\n**REQ-QOS-005 (All):** \"Quality selection control shall be accessible within 2 clicks during playback for all user segments.\"\n\n---\n\n**STAKEHOLDER SIGN-OFF:**\n- Marketing: New users get best experience ✓\n- Engineering: Bandwidth controlled for majority of users ✓\n- Users: Preferences respected once set ✓\n- Legal: Premium requirements protected ✓\n- Product: Conversion-focused first experience ✓"
  },
  {
    "id": "cs204-t2-ex15",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Domain Modeling from Requirements",
    "description": "Based on the following requirements for an online course platform, create a domain model. Identify key entities, their attributes, and relationships. Present as a textual description suitable for conversion to a UML class diagram.\n\nRequirements:\n- Students enroll in courses\n- Courses contain multiple modules\n- Modules have lessons (video, text, or quiz)\n- Instructors create and teach courses\n- Students track progress through courses\n- Courses have prerequisites\n- Students receive certificates upon completion",
    "difficulty": 4,
    "hints": [
      "Identify nouns as potential entities",
      "Identify verbs as potential relationships",
      "Consider cardinality (one-to-many, many-to-many)",
      "Think about what attributes each entity needs"
    ],
    "solution": "**Domain Model - Online Course Platform**\n\n---\n\n**ENTITIES AND ATTRIBUTES:**\n\n**User (Abstract)**\n- userId: UUID\n- email: String\n- passwordHash: String\n- firstName: String\n- lastName: String\n- createdAt: DateTime\n- lastLoginAt: DateTime\n\n**Student (extends User)**\n- enrollmentDate: DateTime\n- completedCourses: Integer\n\n**Instructor (extends User)**\n- bio: Text\n- expertise: String[]\n- rating: Decimal\n\n**Course**\n- courseId: UUID\n- title: String\n- description: Text\n- price: Decimal\n- status: Enum (Draft, Published, Archived)\n- difficultyLevel: Enum (Beginner, Intermediate, Advanced)\n- estimatedHours: Integer\n- createdAt: DateTime\n- publishedAt: DateTime\n\n**Module**\n- moduleId: UUID\n- title: String\n- description: Text\n- orderIndex: Integer\n\n**Lesson (Abstract)**\n- lessonId: UUID\n- title: String\n- orderIndex: Integer\n- estimatedMinutes: Integer\n\n**VideoLesson (extends Lesson)**\n- videoUrl: String\n- duration: Integer\n- transcript: Text\n\n**TextLesson (extends Lesson)**\n- content: Text\n\n**QuizLesson (extends Lesson)**\n- passingScore: Integer\n- maxAttempts: Integer\n\n**QuizQuestion**\n- questionId: UUID\n- questionText: Text\n- questionType: Enum (MultipleChoice, TrueFalse)\n- correctAnswer: String\n- options: String[]\n\n**Enrollment**\n- enrollmentId: UUID\n- enrolledAt: DateTime\n- status: Enum (Active, Completed, Dropped)\n- completedAt: DateTime (nullable)\n\n**Progress**\n- progressId: UUID\n- completedAt: DateTime\n- score: Integer (for quizzes)\n- attempts: Integer (for quizzes)\n\n**Certificate**\n- certificateId: UUID\n- issuedAt: DateTime\n- certificateUrl: String\n- verificationCode: String\n\n---\n\n**RELATIONSHIPS:**\n\n```\nStudent ----< Enrollment >---- Course\n  \"A student has many enrollments\"\n  \"A course has many enrollments\"\n  (Many-to-Many through Enrollment)\n\nInstructor ----< Course\n  \"An instructor teaches many courses\"\n  \"A course has one primary instructor\"\n  (One-to-Many)\n\nCourse ----< Module\n  \"A course contains many modules\"\n  \"A module belongs to one course\"\n  (One-to-Many, ordered)\n\nModule ----< Lesson\n  \"A module contains many lessons\"\n  \"A lesson belongs to one module\"\n  (One-to-Many, ordered)\n\nQuizLesson ----< QuizQuestion\n  \"A quiz has many questions\"\n  \"A question belongs to one quiz\"\n  (One-to-Many)\n\nCourse ----< Course (Prerequisites)\n  \"A course may require prerequisite courses\"\n  \"A course may be prerequisite for other courses\"\n  (Many-to-Many, self-referential)\n\nEnrollment ----< Progress >---- Lesson\n  \"Progress tracks lessons completed per enrollment\"\n  (Many-to-Many through Progress)\n\nEnrollment ---- Certificate\n  \"A completed enrollment generates one certificate\"\n  (One-to-One, optional)\n```\n\n---\n\n**DOMAIN RULES:**\n\n1. Student can only enroll in a course if all prerequisites are completed\n2. Certificate is generated when all modules are completed with passing quiz scores\n3. Progress percentage = (completed lessons / total lessons) × 100\n4. Module is complete when all lessons are complete\n5. Instructor must be verified before publishing courses"
  },
  {
    "id": "cs204-t2-ex16",
    "subjectId": "cs204",
    "topicId": "cs204-topic-2",
    "type": "written",
    "title": "Requirements Engineering Case Study",
    "description": "A startup is building a ride-sharing app to compete with Uber. The founder says: \"I want exactly what Uber has.\" As a requirements engineer, explain why this is problematic and describe how you would approach gathering proper requirements. Include specific questions you would ask and elicitation techniques you would use.",
    "difficulty": 5,
    "hints": [
      "Consider why copying isn't sufficient",
      "Think about differentiation and market positioning",
      "Consider technical, legal, and resource constraints",
      "Plan a structured requirements elicitation process"
    ],
    "solution": "**Requirements Engineering Analysis: Ride-Sharing Startup**\n\n---\n\n**WHY \"COPY UBER\" IS PROBLEMATIC:**\n\n1. **No Differentiation:** If the product is identical, why would users switch? No competitive advantage or value proposition.\n\n2. **Resource Reality:** Uber has thousands of engineers and billions in funding. A startup cannot replicate their feature set with limited resources.\n\n3. **Hidden Complexity:** Visible features (app UI) are 10% of the system. The remaining 90% (fraud detection, surge pricing algorithms, driver incentives, regulatory compliance) isn't visible.\n\n4. **Legal/Regulatory:** Uber's approach may include licensing, insurance structures, and regulatory relationships specific to their scale and history.\n\n5. **Technical Debt vs. Innovation:** Uber carries years of legacy decisions. A new entrant can make better architectural choices.\n\n6. **Unknown Requirements:** \"What Uber has\" doesn't capture the founder's actual vision, target market, or differentiators.\n\n---\n\n**ELICITATION APPROACH:**\n\n**Phase 1: Stakeholder Interviews**\n\n*Questions for Founder:*\n- \"What problem are you really trying to solve that isn't being solved?\"\n- \"Who is your ideal first customer? What geographic market?\"\n- \"What would make riders choose you over Uber specifically?\"\n- \"What's your budget and timeline for MVP?\"\n- \"What happens if you can't get drivers? Riders?\"\n- \"What regulations exist in your target market?\"\n\n*Questions for Potential Users (Riders):*\n- \"What frustrates you about your current ride-sharing app?\"\n- \"What would make you try a new ride-sharing service?\"\n- \"How do you currently handle rides that apps don't serve well?\"\n- \"What's most important: price, speed, safety, or something else?\"\n\n*Questions for Potential Drivers:*\n- \"What do you like/dislike about driving for current platforms?\"\n- \"What would make you switch to a new platform?\"\n- \"How do you decide when and where to drive?\"\n\n---\n\n**Phase 2: Competitive Analysis (Document Analysis)**\n\n- Analyze Uber, Lyft, and regional competitors\n- Identify table-stakes features vs. differentiators\n- Review public complaints and pain points\n- Study regulatory requirements in target markets\n\n---\n\n**Phase 3: Market Positioning Workshop**\n\nFacilitated session to define:\n- Target market segment (e.g., college campuses, suburban areas, specific city)\n- Unique value proposition (e.g., \"rides for seniors,\" \"eco-friendly rides only,\" \"subscription-based\")\n- MVP feature set (what's essential for launch vs. later)\n- Competitive positioning matrix\n\n---\n\n**Phase 4: Prototype and Validate**\n\n- Create low-fidelity prototypes of key differentiating features\n- Test with target users\n- Validate assumptions about what users want\n- Refine requirements based on feedback\n\n---\n\n**RECOMMENDED OUTPUT:**\n\nInstead of \"copy Uber,\" deliver:\n\n1. **Vision Statement:** \"A ride-sharing platform for [target market] that differentiates through [unique value]\"\n\n2. **Prioritized Feature List:** MoSCoW prioritized, with MVP clearly defined\n\n3. **User Stories:** For each feature, tied to specific user personas\n\n4. **Non-Functional Requirements:** Performance, security, and scalability appropriate to startup scale (not Uber scale)\n\n5. **Regulatory Checklist:** Compliance requirements for target market\n\n6. **Success Metrics:** How we measure if we're achieving goals\n\n---\n\n**KEY INSIGHT:**\n\nThe goal isn't to capture what Uber built—it's to discover what this startup should build. That requires understanding the market, the users, the competitive landscape, and the founder's actual vision and constraints."
  },
  {
    "id": "cs204-t3-ex1",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Class Diagram Basics",
    "description": "Design a class diagram for a simple online bookstore. Include at least 5 classes with appropriate attributes and methods. Show relationships including association, aggregation, and composition. Describe the diagram in text format suitable for UML conversion.",
    "difficulty": 1,
    "hints": [
      "Identify the main entities: Book, Customer, Order, etc.",
      "Use composition for \"part-of\" relationships that cannot exist independently",
      "Use aggregation for \"has-a\" relationships where parts can exist independently"
    ],
    "solution": "**Online Bookstore Class Diagram**\n\n---\n\n**Classes and Members:**\n\n```\n┌─────────────────────────────┐\n│          Customer           │\n├─────────────────────────────┤\n│ - customerId: String        │\n│ - email: String             │\n│ - name: String              │\n│ - passwordHash: String      │\n│ - shippingAddress: Address  │\n├─────────────────────────────┤\n│ + register(): void          │\n│ + login(): boolean          │\n│ + placeOrder(): Order       │\n│ + viewOrderHistory(): Order[]│\n└─────────────────────────────┘\n\n┌─────────────────────────────┐\n│           Book              │\n├─────────────────────────────┤\n│ - isbn: String              │\n│ - title: String             │\n│ - author: String            │\n│ - price: Decimal            │\n│ - stockQuantity: Integer    │\n│ - category: String          │\n├─────────────────────────────┤\n│ + getDetails(): BookInfo    │\n│ + updateStock(qty): void    │\n│ + isAvailable(): boolean    │\n└─────────────────────────────┘\n\n┌─────────────────────────────┐\n│           Order             │\n├─────────────────────────────┤\n│ - orderId: String           │\n│ - orderDate: DateTime       │\n│ - status: OrderStatus       │\n│ - totalAmount: Decimal      │\n├─────────────────────────────┤\n│ + calculateTotal(): Decimal │\n│ + updateStatus(): void      │\n│ + addItem(item): void       │\n│ + removeItem(item): void    │\n└─────────────────────────────┘\n\n┌─────────────────────────────┐\n│         OrderItem           │\n├─────────────────────────────┤\n│ - quantity: Integer         │\n│ - unitPrice: Decimal        │\n├─────────────────────────────┤\n│ + getSubtotal(): Decimal    │\n└─────────────────────────────┘\n\n┌─────────────────────────────┐\n│         Address             │\n├─────────────────────────────┤\n│ - street: String            │\n│ - city: String              │\n│ - state: String             │\n│ - zipCode: String           │\n│ - country: String           │\n├─────────────────────────────┤\n│ + format(): String          │\n│ + validate(): boolean       │\n└─────────────────────────────┘\n\n┌─────────────────────────────┐\n│      ShoppingCart           │\n├─────────────────────────────┤\n│ - createdAt: DateTime       │\n├─────────────────────────────┤\n│ + addBook(book, qty): void  │\n│ + removeBook(book): void    │\n│ + getTotal(): Decimal       │\n│ + checkout(): Order         │\n│ + clear(): void             │\n└─────────────────────────────┘\n```\n\n---\n\n**Relationships:**\n\n1. **Customer → Order (Association, 1 to many)**\n   - A Customer places zero or more Orders\n   - An Order belongs to exactly one Customer\n\n2. **Order ◆→ OrderItem (Composition)**\n   - An Order contains one or more OrderItems\n   - OrderItems cannot exist without their Order\n   - If Order is deleted, OrderItems are deleted\n\n3. **OrderItem → Book (Association)**\n   - An OrderItem references exactly one Book\n   - A Book can appear in many OrderItems\n\n4. **Customer ◇→ Address (Aggregation)**\n   - A Customer has one or more Addresses\n   - Addresses can exist independently (shared with Order)\n\n5. **Customer → ShoppingCart (Association, 1 to 1)**\n   - A Customer has one active ShoppingCart\n   - ShoppingCart belongs to one Customer\n\n6. **ShoppingCart → Book (Association, many to many)**\n   - ShoppingCart contains references to Books with quantities"
  },
  {
    "id": "cs204-t3-ex2",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Sequence Diagram Creation",
    "description": "Create a sequence diagram for the \"User Login\" use case. Include the following objects: User, LoginPage, AuthenticationService, UserRepository, and SessionManager. Show the messages exchanged for both successful and failed login attempts.",
    "difficulty": 2,
    "hints": [
      "Start with the user initiating the login",
      "Show synchronous messages with solid arrows",
      "Include return messages",
      "Use alt/opt fragments for conditional flows"
    ],
    "solution": "**Sequence Diagram: User Login**\n\n```\n┌─────┐     ┌───────────┐     ┌─────────────────────┐     ┌────────────────┐     ┌────────────────┐\n│User │     │ LoginPage │     │AuthenticationService│     │ UserRepository │     │ SessionManager │\n└──┬──┘     └─────┬─────┘     └──────────┬──────────┘     └───────┬────────┘     └───────┬────────┘\n   │              │                      │                        │                      │\n   │ enterCredentials(email, password)   │                        │                      │\n   │─────────────>│                      │                        │                      │\n   │              │                      │                        │                      │\n   │              │ authenticate(email, password)                 │                      │\n   │              │─────────────────────>│                        │                      │\n   │              │                      │                        │                      │\n   │              │                      │ findByEmail(email)     │                      │\n   │              │                      │───────────────────────>│                      │\n   │              │                      │                        │                      │\n   │              │                      │ user: User             │                      │\n   │              │                      │<───────────────────────│                      │\n   │              │                      │                        │                      │\n╔══╧══════════════╧══════════════════════╧════════════════════════╧══════════════════════╧═══╗\n║ alt [user found AND password valid]                                                        ║\n╠════════════════════════════════════════════════════════════════════════════════════════════╣\n   │              │                      │                        │                      │\n   │              │                      │ verifyPassword(hash, password)                │\n   │              │                      │────────(internal)──────│                      │\n   │              │                      │                        │                      │\n   │              │                      │ createSession(userId)  │                      │\n   │              │                      │─────────────────────────────────────────────>│\n   │              │                      │                        │                      │\n   │              │                      │ sessionToken           │                      │\n   │              │                      │<─────────────────────────────────────────────│\n   │              │                      │                        │                      │\n   │              │                      │ updateLastLogin()      │                      │\n   │              │                      │───────────────────────>│                      │\n   │              │                      │                        │                      │\n   │              │ AuthResult(success, token)                    │                      │\n   │              │<─────────────────────│                        │                      │\n   │              │                      │                        │                      │\n   │ displayDashboard()                  │                        │                      │\n   │<─────────────│                      │                        │                      │\n   │              │                      │                        │                      │\n╠════════════════════════════════════════════════════════════════════════════════════════════╣\n║ [else: user not found OR password invalid]                                                 ║\n╠════════════════════════════════════════════════════════════════════════════════════════════╣\n   │              │                      │                        │                      │\n   │              │                      │ logFailedAttempt(email)│                      │\n   │              │                      │───────────────────────>│                      │\n   │              │                      │                        │                      │\n   │              │ AuthResult(failure, \"Invalid credentials\")    │                      │\n   │              │<─────────────────────│                        │                      │\n   │              │                      │                        │                      │\n   │ displayError(\"Invalid email or password\")                    │                      │\n   │<─────────────│                      │                        │                      │\n   │              │                      │                        │                      │\n╚════════════════════════════════════════════════════════════════════════════════════════════╝\n```\n\n**Key Design Decisions:**\n\n1. **Generic error message**: \"Invalid credentials\" doesn't reveal whether email or password was wrong (security best practice)\n\n2. **Password never transmitted**: AuthenticationService receives password but verifies against stored hash internally\n\n3. **Audit logging**: Failed attempts are logged for security monitoring\n\n4. **Session creation**: Separate SessionManager handles token generation (single responsibility)\n\n5. **Last login update**: UserRepository tracks login timestamps for security/analytics"
  },
  {
    "id": "cs204-t3-ex3",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "State Machine Diagram",
    "description": "Create a state machine diagram for an Order object in an e-commerce system. The order can be in states: Created, Pending Payment, Paid, Processing, Shipped, Delivered, Cancelled, Refunded. Show all transitions with events/guards/actions.",
    "difficulty": 2,
    "hints": [
      "Identify valid state transitions",
      "Consider which states can transition to Cancelled",
      "Include guards for conditional transitions",
      "Show entry/exit actions where appropriate"
    ],
    "solution": "**State Machine Diagram: Order Lifecycle**\n\n```\n                          ┌───────────────┐\n                          │    [START]    │\n                          └───────┬───────┘\n                                  │ createOrder()\n                                  ▼\n                          ┌───────────────┐\n                          │    Created    │\n                          │───────────────│\n                          │entry/         │\n                          │ generateOrderId│\n                          │ setTimestamp   │\n                          └───────┬───────┘\n                                  │ submitOrder()\n                                  ▼\n                          ┌───────────────┐\n      cancelOrder()       │    Pending    │       cancelOrder()\n    ┌─────────────────────│    Payment    │────────────────────┐\n    │                     └───────┬───────┘                    │\n    │                             │ receivePayment()           │\n    │                             │ [payment valid]            │\n    │                             ▼                            │\n    │                     ┌───────────────┐                    │\n    │   cancelOrder()     │     Paid      │                    │\n    │ ┌───────────────────│───────────────│                    │\n    │ │                   │entry/         │                    │\n    │ │                   │ notifyCustomer│                    │\n    │ │                   │ reserveStock  │                    │\n    │ │                   └───────┬───────┘                    │\n    │ │                           │ processOrder()             │\n    │ │                           ▼                            │\n    │ │                   ┌───────────────┐                    │\n    │ │                   │  Processing   │                    │\n    │ │                   │───────────────│                    │\n    │ │                   │entry/         │                    │\n    │ │                   │ allocateStock │                    │\n    │ │                   │ preparePackage│                    │\n    │ │                   └───────┬───────┘                    │\n    │ │                           │ shipOrder(trackingId)      │\n    │ │                           ▼                            │\n    │ │                   ┌───────────────┐                    │\n    │ │                   │    Shipped    │                    │\n    │ │                   │───────────────│                    │\n    │ │                   │entry/         │                    │\n    │ │                   │ sendShipNotif │                    │\n    │ │                   │ saveTracking  │                    │\n    │ │                   └───────┬───────┘                    │\n    │ │                           │ confirmDelivery()          │\n    │ │                           ▼                            │\n    │ │                   ┌───────────────┐                    │\n    │ │                   │   Delivered   │                    │\n    │ │                   │───────────────│                    │\n    │ │                   │entry/         │                    │\n    │ │                   │ requestReview │                    │\n    │ │                   └───────┬───────┘                    │\n    │ │                           │                            │\n    │ │    ┌──────────────────────┴──────────────────┐         │\n    │ │    │ requestRefund()                         │         │\n    │ │    │ [within return window]                  │         │\n    │ │    ▼                                         │         │\n    │ │  ┌───────────────┐                           │         │\n    │ │  │   Refunded    │                           │         │\n    │ │  │───────────────│                           │         │\n    │ │  │entry/         │                           │         │\n    │ │  │ processRefund │                           │         │\n    │ │  │ restoreStock  │                           │         │\n    │ │  └───────┬───────┘                           │         │\n    │ │          │                                   │         │\n    │ │          ▼                                   ▼         │\n    │ │   ┌──────────────────────────────────────────────┐     │\n    │ │   │                   [END]                      │     │\n    │ │   └──────────────────────────────────────────────┘     │\n    │ │                          ▲                             │\n    │ └──────────────────────────┼─────────────────────────────┘\n    │                            │\n    │                   ┌────────┴────────┐\n    └──────────────────>│    Cancelled    │\n                        │─────────────────│\n                        │entry/           │\n                        │ releaseStock    │\n                        │ refundIfPaid    │\n                        │ notifyCustomer  │\n                        └─────────────────┘\n```\n\n---\n\n**Transition Table:**\n\n| From State | Event | Guard | Action | To State |\n|------------|-------|-------|--------|----------|\n| [Start] | createOrder() | - | generateOrderId() | Created |\n| Created | submitOrder() | - | - | Pending Payment |\n| Pending Payment | receivePayment() | payment valid | capturePayment() | Paid |\n| Pending Payment | cancelOrder() | - | - | Cancelled |\n| Paid | processOrder() | - | - | Processing |\n| Paid | cancelOrder() | - | initiateRefund() | Cancelled |\n| Processing | shipOrder() | - | - | Shipped |\n| Shipped | confirmDelivery() | - | - | Delivered |\n| Delivered | requestRefund() | within 30 days | - | Refunded |\n| * | timeout(24h) | state == Pending Payment | - | Cancelled |\n\n---\n\n**Notes:**\n- Cancellation allowed from: Created, Pending Payment, Paid (not after Processing starts)\n- Automatic cancellation after 24h in Pending Payment state\n- Refund only available within return window (30 days from delivery)"
  },
  {
    "id": "cs204-t3-ex4",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "SOLID Principles Analysis",
    "description": "Analyze the following code snippet and identify which SOLID principles it violates. Explain each violation and provide a refactored design that adheres to SOLID.\n\n```java\nclass Employee {\n  String name;\n  double salary;\n  String department;\n  \n  void calculatePay() { /* calculates salary */ }\n  void saveToDatabase() { /* saves employee */ }\n  void generateReport() { /* creates PDF report */ }\n  void sendEmail(String message) { /* sends email */ }\n}\n```",
    "difficulty": 3,
    "hints": [
      "SRP: A class should have one reason to change",
      "Consider what responsibilities this class has",
      "Think about what changes if the database, email system, or reporting changes"
    ],
    "solution": "**SOLID Principles Violation Analysis**\n\n---\n\n**Violations Identified:**\n\n**1. Single Responsibility Principle (SRP) - VIOLATED**\n\nThe Employee class has multiple reasons to change:\n- Business rules change (calculatePay)\n- Database schema changes (saveToDatabase)\n- Report format changes (generateReport)\n- Email system changes (sendEmail)\n\nEach of these represents a different responsibility that should be in its own class.\n\n**2. Open/Closed Principle (OCP) - VIOLATED**\n\nTo add new pay calculation methods (hourly, salaried, contractor), we must modify the Employee class. The class is not open for extension, closed for modification.\n\n**3. Dependency Inversion Principle (DIP) - VIOLATED**\n\nThe class directly implements database, email, and reporting functionality rather than depending on abstractions. High-level policy (Employee) depends on low-level details.\n\n---\n\n**Refactored Design:**\n\n```java\n// Domain entity - only employee data and identity\nclass Employee {\n    private String id;\n    private String name;\n    private String department;\n    private PaymentStrategy paymentStrategy;\n\n    public Employee(String id, String name, String department) {\n        this.id = id;\n        this.name = name;\n        this.department = department;\n    }\n\n    // Getters and setters for data\n    public void setPaymentStrategy(PaymentStrategy strategy) {\n        this.paymentStrategy = strategy;\n    }\n\n    public PaymentStrategy getPaymentStrategy() {\n        return paymentStrategy;\n    }\n}\n\n// SRP: Separate class for pay calculation\n// OCP: Strategy pattern allows extension without modification\ninterface PaymentStrategy {\n    double calculatePay(Employee employee);\n}\n\nclass SalariedPayment implements PaymentStrategy {\n    private double annualSalary;\n\n    public double calculatePay(Employee employee) {\n        return annualSalary / 12;\n    }\n}\n\nclass HourlyPayment implements PaymentStrategy {\n    private double hourlyRate;\n    private int hoursWorked;\n\n    public double calculatePay(Employee employee) {\n        return hourlyRate * hoursWorked;\n    }\n}\n\n// SRP: Separate repository for persistence\n// DIP: Depends on abstraction (interface)\ninterface EmployeeRepository {\n    void save(Employee employee);\n    Employee findById(String id);\n    List<Employee> findAll();\n}\n\nclass DatabaseEmployeeRepository implements EmployeeRepository {\n    private Database db;\n\n    public void save(Employee employee) {\n        // Database-specific implementation\n    }\n    // ... other methods\n}\n\n// SRP: Separate service for reporting\ninterface ReportGenerator {\n    byte[] generate(Employee employee);\n}\n\nclass PdfEmployeeReport implements ReportGenerator {\n    public byte[] generate(Employee employee) {\n        // PDF generation logic\n    }\n}\n\nclass CsvEmployeeReport implements ReportGenerator {\n    public byte[] generate(Employee employee) {\n        // CSV generation logic\n    }\n}\n\n// SRP: Separate service for notifications\ninterface NotificationService {\n    void send(Employee employee, String message);\n}\n\nclass EmailNotificationService implements NotificationService {\n    public void send(Employee employee, String message) {\n        // Email sending logic\n    }\n}\n\n// Orchestration through service class\nclass EmployeeService {\n    private EmployeeRepository repository;\n    private NotificationService notifications;\n\n    public EmployeeService(EmployeeRepository repo, NotificationService notif) {\n        this.repository = repo;  // DIP: Injected dependencies\n        this.notifications = notif;\n    }\n\n    public void processPayroll(Employee employee) {\n        double pay = employee.getPaymentStrategy().calculatePay(employee);\n        repository.save(employee);\n        notifications.send(employee, \"Your pay: $\" + pay);\n    }\n}\n```\n\n---\n\n**Summary of Changes:**\n\n| Principle | Original Issue | Refactored Solution |\n|-----------|---------------|---------------------|\n| SRP | 5 responsibilities in one class | Separated into 5 focused classes |\n| OCP | Must modify for new pay types | Strategy pattern for extensibility |\n| LSP | N/A (no inheritance shown) | Base strategies are substitutable |\n| ISP | N/A (no interfaces shown) | Focused interfaces defined |\n| DIP | Direct implementation of details | Depends on injected abstractions |"
  },
  {
    "id": "cs204-t3-ex5",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Activity Diagram for Business Process",
    "description": "Create an activity diagram for an \"Order Fulfillment\" business process. Include the following activities: Receive Order, Check Inventory, Pack Order, Arrange Shipping, Send Notification. Include decision points, parallel activities (fork/join), and swimlanes for different departments (Sales, Warehouse, Shipping).",
    "difficulty": 3,
    "hints": [
      "Use swimlanes to show which department performs each activity",
      "Fork/Join bars show parallel activities",
      "Diamonds represent decision points",
      "Consider exception paths like \"out of stock\""
    ],
    "solution": "**Activity Diagram: Order Fulfillment Process**\n\n```\n┌──────────────────┬──────────────────────┬────────────────────────┐\n│      SALES       │      WAREHOUSE       │       SHIPPING         │\n├──────────────────┼──────────────────────┼────────────────────────┤\n│                  │                      │                        │\n│    ●(Start)      │                      │                        │\n│       │          │                      │                        │\n│       ▼          │                      │                        │\n│ ┌────────────┐   │                      │                        │\n│ │  Receive   │   │                      │                        │\n│ │   Order    │   │                      │                        │\n│ └─────┬──────┘   │                      │                        │\n│       │          │                      │                        │\n│       ├──────────┼──────────────────────│                        │\n│       │          │       ▼              │                        │\n│       │          │ ┌────────────┐       │                        │\n│       │          │ │   Check    │       │                        │\n│       │          │ │ Inventory  │       │                        │\n│       │          │ └─────┬──────┘       │                        │\n│       │          │       │              │                        │\n│       │          │       ◇              │                        │\n│       │          │      /│\\             │                        │\n│       │          │ [In  / │ \\ [Out of   │                        │\n│       │          │Stock]/ │  \\ Stock]   │                        │\n│       │          │     │  │   │         │                        │\n│       │          │     ▼  │   │         │                        │\n│       │          │ ═══════╤═══│════     │                        │\n│       │          │   FORK │   │         │                        │\n│       │          │ ═══════╧═══│════     │                        │\n│       │          │    │   │   │         │                        │\n│       │          │    │   │   ▼         │                        │\n│       │          │    │   │  ┌─────────┐│                        │\n│       │          │    │   │  │ Reorder ││                        │\n│       │          │    │   │  │  Stock  ││                        │\n│       │          │    │   │  └────┬────┘│                        │\n│       │          │    │   │       │     │                        │\n│       │          │    ▼   │       │     │                        │\n│       │          │ ┌──────┴──┐    │     │                        │\n│       │          │ │  Pick   │    │     │                        │\n│       │          │ │  Items  │    │     │                        │\n│       │          │ └────┬────┘    │     │                        │\n│       │          │      │         │     │                        │\n│       │          │      ▼         │     │                        │\n│       │          │ ┌────────────┐ │     │                        │\n│       │          │ │   Pack     │ │     │                        │\n│       │          │ │   Order    │ │     │                        │\n│       │          │ └─────┬──────┘ │     │                        │\n│       │          │       │        │     │                        │\n│       │          │       ├────────┼─────┼────────────────────────│\n│       │          │       │        │     │         ▼              │\n│       │          │       │        │     │   ┌────────────┐       │\n│       │          │       │        │     │   │  Arrange   │       │\n│       │          │       │        │     │   │  Shipping  │       │\n│       │          │       │        │     │   └─────┬──────┘       │\n│       │          │       │        │     │         │              │\n│       │          │       │        │     │         ▼              │\n│       │          │       │        │     │   ┌────────────┐       │\n│       │          │       │        │     │   │  Generate  │       │\n│       │          │       │        │     │   │  Tracking  │       │\n│       │          │       │        │     │   └─────┬──────┘       │\n│       │          │       │        │     │         │              │\n│       │          │ ══════╧════════╧═════╧═════════╧══════        │\n│       │          │              JOIN                             │\n│       │          │ ══════════════╤═══════════════════════        │\n│       │          │               │                               │\n│       ◄──────────┼───────────────┘                               │\n│       │          │                      │                        │\n│       ▼          │                      │                        │\n│ ┌────────────┐   │                      │                        │\n│ │   Send     │   │                      │                        │\n│ │Notification│   │                      │                        │\n│ └─────┬──────┘   │                      │                        │\n│       │          │                      │                        │\n│       ▼          │                      │                        │\n│   ◉ (End)        │                      │                        │\n│                  │                      │                        │\n└──────────────────┴──────────────────────┴────────────────────────┘\n```\n\n---\n\n**Activity Descriptions:**\n\n1. **Receive Order (Sales)**: Order received from customer, validated, logged in system\n\n2. **Check Inventory (Warehouse)**: Verify all items in stock\n\n3. **Decision Point**:\n   - [In Stock]: Proceed to fulfillment\n   - [Out of Stock]: Trigger reorder, may delay fulfillment\n\n4. **FORK (Parallel Activities)**:\n   - Pick Items: Warehouse staff retrieves items\n   - Reorder Stock: (If needed) Submit purchase order\n\n5. **Pack Order (Warehouse)**: Items wrapped, packed, labeled\n\n6. **Arrange Shipping (Shipping)**: Select carrier, schedule pickup\n\n7. **Generate Tracking (Shipping)**: Create tracking number\n\n8. **JOIN**: Wait for all parallel activities to complete\n\n9. **Send Notification (Sales)**: Customer receives shipping confirmation with tracking"
  },
  {
    "id": "cs204-t3-ex6",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Component Diagram Design",
    "description": "Design a component diagram for a microservices-based e-commerce application. Include at least 6 components: User Service, Product Service, Order Service, Payment Service, Notification Service, and API Gateway. Show interfaces provided and required by each component.",
    "difficulty": 3,
    "hints": [
      "Use lollipop notation for provided interfaces",
      "Use socket notation for required interfaces",
      "Show dependencies between components",
      "Consider message queues for async communication"
    ],
    "solution": "**Component Diagram: E-Commerce Microservices Architecture**\n\n```\n┌─────────────────────────────────────────────────────────────────────────────┐\n│                              <<component>>                                  │\n│                              API Gateway                                    │\n├─────────────────────────────────────────────────────────────────────────────┤\n│  ○──IAuthentication                                                         │\n│  ○──IRouting                                                                │\n│  ○──IRateLimiting                                                           │\n│                                                                             │\n│  Requires:                                                                  │\n│  ◐──IUserService                                                            │\n│  ◐──IProductService                                                         │\n│  ◐──IOrderService                                                           │\n└─────────────────────────────────────────────────────────────────────────────┘\n          │                    │                     │\n          │ HTTP/REST          │ HTTP/REST           │ HTTP/REST\n          ▼                    ▼                     ▼\n┌────────────────────┐ ┌────────────────────┐ ┌────────────────────┐\n│   <<component>>    │ │   <<component>>    │ │   <<component>>    │\n│   User Service     │ │  Product Service   │ │   Order Service    │\n├────────────────────┤ ├────────────────────┤ ├────────────────────┤\n│                    │ │                    │ │                    │\n│ ○──IUserService    │ │ ○──IProductService │ │ ○──IOrderService   │\n│    - register()    │ │    - getProduct()  │ │    - createOrder() │\n│    - login()       │ │    - search()      │ │    - getOrder()    │\n│    - getProfile()  │ │    - getInventory()│ │    - updateStatus()│\n│                    │ │                    │ │                    │\n│ ◐──IDatabase       │ │ ◐──IDatabase       │ │ ◐──IDatabase       │\n│ ◐──ICache          │ │ ◐──ISearchEngine   │ │ ◐──IUserService    │\n│                    │ │ ◐──ICache          │ │ ◐──IProductService │\n│                    │ │                    │ │ ◐──IPaymentService │\n│                    │ │                    │ │ ◐──IMessageQueue   │\n└────────────────────┘ └────────────────────┘ └─────────┬──────────┘\n          │                                             │\n          │                                             │ Event: OrderCreated\n          ▼                                             ▼\n┌────────────────────┐                       ┌────────────────────┐\n│   <<component>>    │                       │   <<component>>    │\n│   PostgreSQL DB    │                       │   Message Queue    │\n├────────────────────┤                       │     (RabbitMQ)     │\n│ ○──IDatabase       │                       ├────────────────────┤\n│    - query()       │                       │ ○──IMessageQueue   │\n│    - execute()     │                       │    - publish()     │\n│    - transaction() │                       │    - subscribe()   │\n└────────────────────┘                       └─────────┬──────────┘\n                                                       │\n                        ┌──────────────────────────────┼──────────────────┐\n                        │                              │                  │\n                        ▼                              ▼                  ▼\n            ┌────────────────────┐       ┌────────────────────┐  ┌─────────────────┐\n            │   <<component>>    │       │   <<component>>    │  │  <<component>>  │\n            │  Payment Service   │       │Notification Service│  │ Inventory Svc   │\n            ├────────────────────┤       ├────────────────────┤  ├─────────────────┤\n            │                    │       │                    │  │                 │\n            │ ○──IPaymentService │       │ ○──INotification   │  │ ○──IInventory   │\n            │    - processPayment│       │    - sendEmail()   │  │    - reserve()  │\n            │    - refund()      │       │    - sendSMS()     │  │    - release()  │\n            │    - getStatus()   │       │    - sendPush()    │  │    - update()   │\n            │                    │       │                    │  │                 │\n            │ ◐──IPaymentGateway │       │ ◐──IEmailProvider  │  │ ◐──IDatabase    │\n            │ ◐──IMessageQueue   │       │ ◐──ISMSProvider    │  │ ◐──IMessageQueue│\n            │                    │       │ ◐──IMessageQueue   │  │                 │\n            └────────────────────┘       └────────────────────┘  └─────────────────┘\n                        │\n                        ▼\n            ┌────────────────────┐\n            │   <<component>>    │\n            │   Stripe Gateway   │\n            │    (External)      │\n            ├────────────────────┤\n            │ ○──IPaymentGateway │\n            │    - charge()      │\n            │    - refund()      │\n            └────────────────────┘\n```\n\n---\n\n**Legend:**\n- ○── : Provided Interface (lollipop)\n- ◐── : Required Interface (socket)\n- ─── : Synchronous dependency\n- ─ ─ : Asynchronous (message-based)\n\n---\n\n**Key Design Decisions:**\n\n1. **API Gateway**: Single entry point handles authentication, routing, rate limiting\n\n2. **Service Isolation**: Each service owns its data, no shared databases\n\n3. **Async Communication**: Message queue for event-driven workflows (OrderCreated triggers Payment, Notification, Inventory)\n\n4. **External Integration**: Payment gateway abstracted behind interface (allows switching providers)\n\n5. **Caching**: User and Product services use cache for frequently accessed data"
  },
  {
    "id": "cs204-t3-ex7",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Coupling and Cohesion Analysis",
    "description": "Analyze the following module structure for coupling and cohesion issues. Identify specific problems and propose improvements.\n\nModule A: UserManager\n- registerUser(), loginUser(), updateUserProfile()\n- processPayment(), refundPayment()\n- sendWelcomeEmail(), sendPasswordResetEmail()\n- generateUserReport(), exportUserData()\n\nModule B: Utilities\n- formatDate(), formatCurrency()\n- validateEmail(), validatePhoneNumber()\n- connectToDatabase(), executeQuery()\n- logError(), logInfo()",
    "difficulty": 3,
    "hints": [
      "High cohesion means related functions grouped together",
      "Low coupling means minimal dependencies between modules",
      "Identify unrelated responsibilities in each module",
      "Consider the Single Responsibility Principle"
    ],
    "solution": "**Coupling and Cohesion Analysis**\n\n---\n\n**MODULE A: UserManager - Analysis**\n\n**Cohesion Issues: LOW COHESION (Logical/Coincidental)**\n\nThe module groups functions that happen to relate to users but have different responsibilities:\n\n| Function Group | Actual Responsibility |\n|---------------|----------------------|\n| registerUser, loginUser, updateUserProfile | User account management |\n| processPayment, refundPayment | Payment processing |\n| sendWelcomeEmail, sendPasswordResetEmail | Email/Notification |\n| generateUserReport, exportUserData | Reporting/Data export |\n\n**Problems:**\n1. Changes to payment logic require modifying UserManager\n2. Email system changes affect user module\n3. Reporting changes touch user code\n4. Module will grow uncontrollably\n5. Hard to test in isolation (needs mock payment gateway, email service)\n\n---\n\n**MODULE B: Utilities - Analysis**\n\n**Cohesion Issues: LOW COHESION (Coincidental)**\n\nClassic \"utility\" anti-pattern - unrelated functions dumped together:\n\n| Function Group | Actual Domain |\n|---------------|---------------|\n| formatDate, formatCurrency | Formatting/Presentation |\n| validateEmail, validatePhoneNumber | Validation |\n| connectToDatabase, executeQuery | Data access |\n| logError, logInfo | Logging |\n\n**Problems:**\n1. No logical grouping - \"utilities\" is not a responsibility\n2. Database code mixed with formatting code\n3. Will become a dumping ground for any \"helper\" function\n4. Changes to logging affect module that does validation\n5. Implicit dependencies between unrelated systems\n\n---\n\n**Coupling Issues:**\n\n1. **Content Coupling Risk**: UserManager likely directly calls email system internals\n2. **Common Coupling**: Multiple modules will depend on Utilities, creating indirect coupling\n3. **Stamp Coupling**: Likely passing entire objects when only some fields needed\n\n---\n\n**PROPOSED REFACTORING:**\n\n```\nBEFORE:                          AFTER:\n──────────                       ──────\n\n┌──────────────┐                ┌──────────────────┐\n│  UserManager │                │  UserService     │  (High Cohesion)\n│  (12 methods)│                │  - register()    │\n└──────────────┘                │  - login()       │\n                                │  - updateProfile()│\n                                └──────────────────┘\n\n                                ┌──────────────────┐\n                                │  PaymentService  │  (High Cohesion)\n                                │  - processPayment│\n                                │  - refund()      │\n                                └──────────────────┘\n\n                                ┌──────────────────┐\n                                │NotificationService│ (High Cohesion)\n                                │  - sendWelcome() │\n                                │  - sendReset()   │\n                                └──────────────────┘\n\n                                ┌──────────────────┐\n                                │  ReportService   │  (High Cohesion)\n                                │  - generateReport│\n                                │  - exportData()  │\n                                └──────────────────┘\n\n┌──────────────┐                ┌──────────────────┐\n│   Utilities  │                │   Formatters     │  (Functional Cohesion)\n│  (8 methods) │                │  - formatDate()  │\n└──────────────┘                │  - formatCurrency│\n                                └──────────────────┘\n\n                                ┌──────────────────┐\n                                │   Validators     │  (Functional Cohesion)\n                                │  - validateEmail │\n                                │  - validatePhone │\n                                └──────────────────┘\n\n                                ┌──────────────────┐\n                                │  DatabaseClient  │  (Communicational)\n                                │  - connect()     │\n                                │  - query()       │\n                                │  - execute()     │\n                                └──────────────────┘\n\n                                ┌──────────────────┐\n                                │     Logger       │  (Functional Cohesion)\n                                │  - error()       │\n                                │  - info()        │\n                                │  - debug()       │\n                                └──────────────────┘\n```\n\n---\n\n**Cohesion Types Achieved:**\n\n| Module | Cohesion Type | Description |\n|--------|--------------|-------------|\n| UserService | Functional | All methods operate on User entity |\n| PaymentService | Functional | All methods handle payments |\n| Validators | Functional | All methods validate input |\n| Logger | Functional | All methods log messages |\n| DatabaseClient | Communicational | Methods share database connection |\n\n---\n\n**Coupling Reduction:**\n\n1. Use dependency injection to inject NotificationService into UserService\n2. Use interfaces (IPaymentGateway) to decouple from specific implementations\n3. Use events/messages instead of direct calls where appropriate"
  },
  {
    "id": "cs204-t3-ex8",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Deployment Diagram",
    "description": "Create a deployment diagram for a three-tier web application. Include: Client Browser, Load Balancer, Web Servers (2), Application Servers (2), Database Server (Primary + Replica), and Cache Server. Show nodes, artifacts, and communication protocols.",
    "difficulty": 3,
    "hints": [
      "Nodes are shown as 3D boxes",
      "Artifacts (deployed software) go inside nodes",
      "Show communication paths with protocols",
      "Consider redundancy and failover"
    ],
    "solution": "**Deployment Diagram: Three-Tier Web Application**\n\n```\n┌─────────────────────────────────────────────────────────────────────────────────────────┐\n│                                    CLIENT TIER                                          │\n├─────────────────────────────────────────────────────────────────────────────────────────┤\n│                                                                                         │\n│    ┌─────────────────────┐         ┌─────────────────────┐                             │\n│    │     <<device>>      │         │     <<device>>      │                             │\n│    │   User Workstation  │         │   Mobile Device     │                             │\n│    ├─────────────────────┤         ├─────────────────────┤                             │\n│    │  <<artifact>>       │         │  <<artifact>>       │                             │\n│    │  Chrome Browser     │         │  iOS/Android App    │                             │\n│    │  ┌───────────────┐  │         │  ┌───────────────┐  │                             │\n│    │  │ React SPA     │  │         │  │ React Native  │  │                             │\n│    │  │ bundle.js     │  │         │  │ App Bundle    │  │                             │\n│    │  └───────────────┘  │         │  └───────────────┘  │                             │\n│    └──────────┬──────────┘         └──────────┬──────────┘                             │\n│               │                               │                                         │\n└───────────────┼───────────────────────────────┼─────────────────────────────────────────┘\n                │ HTTPS (443)                   │ HTTPS (443)\n                │                               │\n                └───────────────┬───────────────┘\n                                │\n                                ▼\n┌─────────────────────────────────────────────────────────────────────────────────────────┐\n│                                    WEB TIER                                             │\n├─────────────────────────────────────────────────────────────────────────────────────────┤\n│                        ┌─────────────────────────────┐                                  │\n│                        │       <<device>>            │                                  │\n│                        │    Load Balancer (AWS ALB)  │                                  │\n│                        ├─────────────────────────────┤                                  │\n│                        │  <<artifact>>               │                                  │\n│                        │  nginx.conf                 │                                  │\n│                        │  - SSL termination          │                                  │\n│                        │  - Round-robin balancing    │                                  │\n│                        │  - Health checks            │                                  │\n│                        └──────────┬──────────────────┘                                  │\n│                                   │                                                     │\n│                    ┌──────────────┴──────────────┐                                      │\n│                    │ HTTP (80)                   │ HTTP (80)                            │\n│                    ▼                             ▼                                      │\n│    ┌─────────────────────────────┐ ┌─────────────────────────────┐                      │\n│    │       <<device>>            │ │       <<device>>            │                      │\n│    │    Web Server 1 (EC2)       │ │    Web Server 2 (EC2)       │                      │\n│    ├─────────────────────────────┤ ├─────────────────────────────┤                      │\n│    │  <<artifact>>               │ │  <<artifact>>               │                      │\n│    │  nginx                      │ │  nginx                      │                      │\n│    │  ┌───────────────────────┐  │ │  ┌───────────────────────┐  │                      │\n│    │  │ Static Assets         │  │ │  │ Static Assets         │  │                      │\n│    │  │ (JS, CSS, images)     │  │ │  │ (JS, CSS, images)     │  │                      │\n│    │  └───────────────────────┘  │ │  └───────────────────────┘  │                      │\n│    └──────────┬──────────────────┘ └──────────────┬──────────────┘                      │\n│               │                                   │                                     │\n└───────────────┼───────────────────────────────────┼─────────────────────────────────────┘\n                │                                   │\n                └───────────────┬───────────────────┘\n                                │ HTTP (8080)\n                                ▼\n┌─────────────────────────────────────────────────────────────────────────────────────────┐\n│                                APPLICATION TIER                                         │\n├─────────────────────────────────────────────────────────────────────────────────────────┤\n│                                                                                         │\n│    ┌─────────────────────────────┐         ┌─────────────────────────────┐              │\n│    │       <<device>>            │         │       <<device>>            │              │\n│    │    App Server 1 (EC2)       │         │    App Server 2 (EC2)       │              │\n│    ├─────────────────────────────┤         ├─────────────────────────────┤              │\n│    │  <<execution environment>>  │         │  <<execution environment>>  │              │\n│    │  Node.js v18 Runtime        │         │  Node.js v18 Runtime        │              │\n│    │  ┌───────────────────────┐  │         │  ┌───────────────────────┐  │              │\n│    │  │ <<artifact>>          │  │         │  │ <<artifact>>          │  │              │\n│    │  │ app-server.js         │  │         │  │ app-server.js         │  │              │\n│    │  │ - REST API            │  │         │  │ - REST API            │  │              │\n│    │  │ - Business Logic      │  │         │  │ - Business Logic      │  │              │\n│    │  │ - Authentication      │  │         │  │ - Authentication      │  │              │\n│    │  └───────────────────────┘  │         │  └───────────────────────┘  │              │\n│    └──────────┬──────────────────┘         └──────────────┬──────────────┘              │\n│               │                                           │                             │\n│               └─────────────────┬─────────────────────────┘                             │\n│                                 │                                                       │\n└─────────────────────────────────┼───────────────────────────────────────────────────────┘\n                                  │\n              ┌───────────────────┼───────────────────┐\n              │ PostgreSQL (5432) │ Redis (6379)      │\n              ▼                   ▼                   │\n┌─────────────────────────────────────────────────────┼───────────────────────────────────┐\n│                              DATA TIER              │                                   │\n├─────────────────────────────────────────────────────┼───────────────────────────────────┤\n│                                                     │                                   │\n│ ┌─────────────────────────────┐ ┌─────────────────────────────────┐  ┌─────────────────┐│\n│ │       <<device>>            │ │       <<device>>                │  │   <<device>>    ││\n│ │  DB Primary (RDS)           │ │  DB Replica (RDS)               │  │  Cache (Redis)  ││\n│ ├─────────────────────────────┤ ├─────────────────────────────────┤  ├─────────────────┤│\n│ │  <<artifact>>               │ │  <<artifact>>                   │  │ <<artifact>>    ││\n│ │  PostgreSQL 15              │ │  PostgreSQL 15                  │  │ Redis 7.0       ││\n│ │  ┌───────────────────────┐  │ │  ┌───────────────────────────┐  │  │ - Session store ││\n│ │  │ ecommerce_db          │  │ │  │ ecommerce_db (read-only)  │  │  │ - Query cache   ││\n│ │  │ - users table         │  │ │  │ - Async replication       │  │  │ - Rate limiting ││\n│ │  │ - products table      │  │ │  │ - Failover ready          │  │  │                 ││\n│ │  │ - orders table        │  │ │  └───────────────────────────┘  │  └─────────────────┘│\n│ │  └───────────────────────┘  │ │                                 │                     │\n│ └────────────┬────────────────┘ └────────────────┬────────────────┘                     │\n│              │ Streaming Replication             │                                      │\n│              └───────────────────────────────────┘                                      │\n│                                                                                         │\n└─────────────────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n**Communication Protocols:**\n\n| Path | Protocol | Port | Purpose |\n|------|----------|------|---------|\n| Client → Load Balancer | HTTPS | 443 | Secure client communication |\n| Load Balancer → Web Servers | HTTP | 80 | Internal (SSL terminated) |\n| Web Servers → App Servers | HTTP | 8080 | API requests |\n| App Servers → Database | PostgreSQL | 5432 | Data persistence |\n| App Servers → Cache | Redis | 6379 | Caching/sessions |\n| DB Primary → DB Replica | Streaming | - | Async replication |\n\n---\n\n**Redundancy Features:**\n- 2 web servers (horizontal scaling)\n- 2 app servers (horizontal scaling)\n- Database replica (read scaling + failover)\n- Load balancer eliminates single point of failure"
  },
  {
    "id": "cs204-t3-ex9",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Design for Testability",
    "description": "The following code is difficult to unit test. Identify the testability issues and refactor the code to make it testable. Explain the design principles you applied.\n\n```javascript\nclass OrderProcessor {\n  processOrder(orderId) {\n    const db = new DatabaseConnection();\n    const order = db.query(`SELECT * FROM orders WHERE id = ${orderId}`);\n    \n    const paymentGateway = new StripePaymentGateway();\n    paymentGateway.charge(order.total, order.cardToken);\n    \n    const emailService = new SendGridEmailService();\n    emailService.send(order.customerEmail, \"Order confirmed\");\n    \n    console.log(`Order ${orderId} processed at ${new Date()}`);\n    return true;\n  }\n}\n```",
    "difficulty": 4,
    "hints": [
      "Identify hard-coded dependencies",
      "Consider dependency injection",
      "Think about interfaces and abstractions",
      "Consider how you would mock these dependencies in tests"
    ],
    "solution": "**Testability Analysis**\n\n---\n\n**Issues Identified:**\n\n1. **Hard-coded Dependencies**: Creates concrete instances inside method\n   - `new DatabaseConnection()` - can't substitute test database\n   - `new StripePaymentGateway()` - can't avoid real charges in tests\n   - `new SendGridEmailService()` - can't avoid sending real emails\n   - `new Date()` - non-deterministic, can't verify timestamps\n\n2. **SQL Injection Vulnerability**: String interpolation in SQL\n\n3. **No Interface Abstraction**: Tied to specific implementations\n\n4. **Side Effects in Method**: Logging, database, email all mixed\n\n5. **No Error Handling**: If any step fails, state is inconsistent\n\n---\n\n**Refactored Code:**\n\n```javascript\n// Interfaces (TypeScript style - could be duck-typed in JS)\ninterface IOrderRepository {\n  findById(orderId: string): Promise<Order>;\n  save(order: Order): Promise<void>;\n}\n\ninterface IPaymentGateway {\n  charge(amount: number, token: string): Promise<PaymentResult>;\n}\n\ninterface INotificationService {\n  sendOrderConfirmation(email: string, order: Order): Promise<void>;\n}\n\ninterface ILogger {\n  info(message: string): void;\n  error(message: string, error: Error): void;\n}\n\ninterface IClock {\n  now(): Date;\n}\n\n// Refactored class with dependency injection\nclass OrderProcessor {\n  private orderRepository: IOrderRepository;\n  private paymentGateway: IPaymentGateway;\n  private notificationService: INotificationService;\n  private logger: ILogger;\n  private clock: IClock;\n\n  // Dependencies injected through constructor\n  constructor(\n    orderRepository: IOrderRepository,\n    paymentGateway: IPaymentGateway,\n    notificationService: INotificationService,\n    logger: ILogger,\n    clock: IClock\n  ) {\n    this.orderRepository = orderRepository;\n    this.paymentGateway = paymentGateway;\n    this.notificationService = notificationService;\n    this.logger = logger;\n    this.clock = clock;\n  }\n\n  async processOrder(orderId: string): Promise<OrderResult> {\n    // Fetch order (dependency is injected, can be mocked)\n    const order = await this.orderRepository.findById(orderId);\n\n    if (!order) {\n      return { success: false, error: 'Order not found' };\n    }\n\n    // Process payment (can mock to avoid real charges)\n    const paymentResult = await this.paymentGateway.charge(\n      order.total,\n      order.cardToken\n    );\n\n    if (!paymentResult.success) {\n      return { success: false, error: 'Payment failed' };\n    }\n\n    // Update order status\n    order.status = 'confirmed';\n    order.processedAt = this.clock.now();  // Deterministic in tests\n    await this.orderRepository.save(order);\n\n    // Send notification (can mock to avoid real emails)\n    await this.notificationService.sendOrderConfirmation(\n      order.customerEmail,\n      order\n    );\n\n    this.logger.info(`Order ${orderId} processed at ${order.processedAt}`);\n\n    return { success: true, order };\n  }\n}\n\n// Production implementations\nclass PostgresOrderRepository implements IOrderRepository {\n  async findById(orderId: string): Promise<Order> {\n    // Parameterized query - no SQL injection\n    return db.query('SELECT * FROM orders WHERE id = $1', [orderId]);\n  }\n  // ...\n}\n\nclass StripePaymentGateway implements IPaymentGateway {\n  async charge(amount: number, token: string): Promise<PaymentResult> {\n    // Real Stripe implementation\n  }\n}\n\n// System clock for production\nclass SystemClock implements IClock {\n  now(): Date {\n    return new Date();\n  }\n}\n```\n\n---\n\n**Test Example:**\n\n```javascript\ndescribe('OrderProcessor', () => {\n  it('should process valid order successfully', async () => {\n    // Arrange - Create mocks\n    const mockOrder = {\n      id: '123',\n      total: 100,\n      cardToken: 'tok_test',\n      customerEmail: 'test@example.com'\n    };\n\n    const mockRepository = {\n      findById: jest.fn().mockResolvedValue(mockOrder),\n      save: jest.fn().mockResolvedValue(undefined)\n    };\n\n    const mockPayment = {\n      charge: jest.fn().mockResolvedValue({ success: true })\n    };\n\n    const mockNotification = {\n      sendOrderConfirmation: jest.fn().mockResolvedValue(undefined)\n    };\n\n    const mockLogger = { info: jest.fn(), error: jest.fn() };\n\n    const mockClock = {\n      now: () => new Date('2024-01-15T10:00:00Z')  // Fixed time!\n    };\n\n    const processor = new OrderProcessor(\n      mockRepository,\n      mockPayment,\n      mockNotification,\n      mockLogger,\n      mockClock\n    );\n\n    // Act\n    const result = await processor.processOrder('123');\n\n    // Assert\n    expect(result.success).toBe(true);\n    expect(mockPayment.charge).toHaveBeenCalledWith(100, 'tok_test');\n    expect(mockNotification.sendOrderConfirmation).toHaveBeenCalled();\n    expect(mockRepository.save).toHaveBeenCalledWith(\n      expect.objectContaining({\n        status: 'confirmed',\n        processedAt: new Date('2024-01-15T10:00:00Z')\n      })\n    );\n  });\n});\n```\n\n---\n\n**Design Principles Applied:**\n\n| Principle | Application |\n|-----------|-------------|\n| Dependency Inversion | High-level OrderProcessor depends on abstractions (interfaces), not concrete implementations |\n| Dependency Injection | Dependencies passed in constructor, not created internally |\n| Single Responsibility | Each interface has one job (payment, notification, data access) |\n| Interface Segregation | Focused interfaces for each concern |\n| Open/Closed | Can add new payment gateways without modifying OrderProcessor |"
  },
  {
    "id": "cs204-t3-ex10",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Package Diagram Design",
    "description": "Design a package diagram for an enterprise HR management system. Include packages for: Presentation Layer, Business Logic Layer, Data Access Layer, and Common/Shared utilities. Show dependencies between packages and apply the principles of layered architecture.",
    "difficulty": 3,
    "hints": [
      "Dependencies should flow in one direction (top to bottom)",
      "Lower layers should not depend on upper layers",
      "Common/Shared can be accessed by all layers",
      "Consider sub-packages within each layer"
    ],
    "solution": "**Package Diagram: HR Management System**\n\n```\n┌─────────────────────────────────────────────────────────────────────────────────────────┐\n│                              <<package>>                                                │\n│                           hr_management_system                                          │\n├─────────────────────────────────────────────────────────────────────────────────────────┤\n│                                                                                         │\n│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │\n│  │                        <<package>> presentation                                   │  │\n│  ├───────────────────────────────────────────────────────────────────────────────────┤  │\n│  │                                                                                   │  │\n│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐  ┌─────────────────────┐ │  │\n│  │  │  <<package>>  │  │  <<package>>  │  │  <<package>>  │  │    <<package>>      │ │  │\n│  │  │    web_ui     │  │  mobile_app   │  │   api_rest    │  │  view_models        │ │  │\n│  │  ├───────────────┤  ├───────────────┤  ├───────────────┤  ├─────────────────────┤ │  │\n│  │  │ - Controllers │  │ - ViewModels  │  │ - Controllers │  │ - EmployeeVM        │ │  │\n│  │  │ - Views       │  │ - Screens     │  │ - DTOs        │  │ - PayrollVM         │ │  │\n│  │  │ - Assets      │  │ - Components  │  │ - Middleware  │  │ - LeaveRequestVM    │ │  │\n│  │  └───────────────┘  └───────────────┘  └───────────────┘  └─────────────────────┘ │  │\n│  │                                                                                   │  │\n│  └─────────────────────────────────────────┬─────────────────────────────────────────┘  │\n│                                            │                                            │\n│                                            │ <<use>>                                    │\n│                                            ▼                                            │\n│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │\n│  │                        <<package>> business_logic                                 │  │\n│  ├───────────────────────────────────────────────────────────────────────────────────┤  │\n│  │                                                                                   │  │\n│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐  ┌─────────────────────┐ │  │\n│  │  │  <<package>>  │  │  <<package>>  │  │  <<package>>  │  │    <<package>>      │ │  │\n│  │  │   employee    │  │    payroll    │  │   leave_mgmt  │  │   recruitment       │ │  │\n│  │  ├───────────────┤  ├───────────────┤  ├───────────────┤  ├─────────────────────┤ │  │\n│  │  │-EmployeeService│ │-PayrollService│  │-LeaveService  │  │ - JobPostingService │ │  │\n│  │  │-ProfileService │ │-TaxCalculator │  │-ApprovalFlow  │  │ - ApplicantService  │ │  │\n│  │  │-OnboardingFlow │ │-BenefitService│  │-AccrualEngine │  │ - InterviewService  │ │  │\n│  │  └───────────────┘  └───────────────┘  └───────────────┘  └─────────────────────┘ │  │\n│  │                                                                                   │  │\n│  │  ┌───────────────┐  ┌─────────────────────────────────────────────────────────┐   │  │\n│  │  │  <<package>>  │  │                    <<package>>                          │   │  │\n│  │  │   reporting   │  │                   domain_model                          │   │  │\n│  │  ├───────────────┤  ├─────────────────────────────────────────────────────────┤   │  │\n│  │  │-ReportGenerator│ │ - Employee, Department, Position (entities)             │   │  │\n│  │  │-DashboardService│ │ - LeaveRequest, PayStub, JobPosting (entities)         │   │  │\n│  │  │-ExportService  │ │ - IEmployeeRepository, IPayrollRepository (interfaces) │   │  │\n│  │  └───────────────┘  └─────────────────────────────────────────────────────────┘   │  │\n│  │                                                                                   │  │\n│  └─────────────────────────────────────────┬─────────────────────────────────────────┘  │\n│                                            │                                            │\n│                                            │ <<use>>                                    │\n│                                            ▼                                            │\n│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │\n│  │                        <<package>> data_access                                    │  │\n│  ├───────────────────────────────────────────────────────────────────────────────────┤  │\n│  │                                                                                   │  │\n│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐  ┌─────────────────────┐ │  │\n│  │  │  <<package>>  │  │  <<package>>  │  │  <<package>>  │  │    <<package>>      │ │  │\n│  │  │ repositories  │  │    orm        │  │   external    │  │    migrations       │ │  │\n│  │  ├───────────────┤  ├───────────────┤  ├───────────────┤  ├─────────────────────┤ │  │\n│  │  │-EmployeeRepo  │  │-DbContext     │  │-TaxAPIClient  │  │ - V001_Initial      │ │  │\n│  │  │-PayrollRepo   │  │-EntityMappings│  │-PayrollAdapter│  │ - V002_AddLeave     │ │  │\n│  │  │-LeaveRepo     │  │-QueryBuilder  │  │-BenefitProvider│ │ - V003_Recruitment  │ │  │\n│  │  └───────────────┘  └───────────────┘  └───────────────┘  └─────────────────────┘ │  │\n│  │                                                                                   │  │\n│  └───────────────────────────────────────────────────────────────────────────────────┘  │\n│                                            ▲                                            │\n│                                            │ <<use>>                                    │\n│  ┌─────────────────────────────────────────┴─────────────────────────────────────────┐  │\n│  │                          <<package>> common                                       │  │\n│  ├───────────────────────────────────────────────────────────────────────────────────┤  │\n│  │                                                                                   │  │\n│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐  ┌─────────────────────┐ │  │\n│  │  │  <<package>>  │  │  <<package>>  │  │  <<package>>  │  │    <<package>>      │ │  │\n│  │  │   utilities   │  │   security    │  │   logging     │  │   configuration     │ │  │\n│  │  ├───────────────┤  ├───────────────┤  ├───────────────┤  ├─────────────────────┤ │  │\n│  │  │-DateHelpers   │  │-AuthService   │  │-Logger        │  │ - AppSettings       │ │  │\n│  │  │-Validators    │  │-Encryption    │  │-AuditTrail    │  │ - FeatureFlags      │ │  │\n│  │  │-Formatters    │  │-RoleManager   │  │-Metrics       │  │ - ConnectionStrings │ │  │\n│  │  └───────────────┘  └───────────────┘  └───────────────┘  └─────────────────────┘ │  │\n│  │                                                                                   │  │\n│  └───────────────────────────────────────────────────────────────────────────────────┘  │\n│                                                                                         │\n└─────────────────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n**Dependency Rules:**\n\n| Layer | Can Depend On | Cannot Depend On |\n|-------|--------------|------------------|\n| Presentation | Business Logic, Common | Data Access (directly) |\n| Business Logic | Data Access (via interfaces), Common | Presentation |\n| Data Access | Common | Presentation, Business Logic |\n| Common | (None - base layer) | All other layers |\n\n---\n\n**Key Design Decisions:**\n\n1. **Dependency Inversion**: Business Logic defines repository interfaces (in domain_model), Data Access implements them\n\n2. **Common Package**: Cross-cutting concerns (logging, security, config) accessible by all layers\n\n3. **Domain Model**: Shared entities and interfaces in business layer, referenced by presentation (DTOs) and data access (mappings)\n\n4. **Sub-packages**: Each layer subdivided by functional area (employee, payroll, leave) for maintainability\n\n5. **External Package**: Adapters for third-party services (tax API, benefits providers) isolated in data layer"
  },
  {
    "id": "cs204-t3-ex11",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Interface Segregation Principle",
    "description": "The following interface violates the Interface Segregation Principle. Identify the problems and refactor into focused interfaces.\n\n```java\ninterface Worker {\n  void work();\n  void eat();\n  void sleep();\n  void attendMeeting();\n  void submitTimesheet();\n  void takeVacation();\n  void getPaid();\n  void performMaintenance();\n}\n```\n\nConsider different types of workers: Human Employees, Contractors, and Robots.",
    "difficulty": 3,
    "hints": [
      "ISP: Clients should not be forced to depend on methods they don't use",
      "Consider what each worker type actually needs",
      "Group related methods together",
      "A robot doesn't eat or take vacation"
    ],
    "solution": "**Interface Segregation Principle Analysis**\n\n---\n\n**Problems with Current Design:**\n\n1. **Fat Interface**: 8 methods covering unrelated concerns\n2. **Forced Implementation**: Robot must implement eat(), sleep(), takeVacation()\n3. **Violation of ISP**: Classes forced to depend on methods they don't use\n4. **Tight Coupling**: Changes to vacation logic affect Robot class\n\n**Worker Type Analysis:**\n\n| Method | Human Employee | Contractor | Robot |\n|--------|---------------|------------|-------|\n| work() | ✓ | ✓ | ✓ |\n| eat() | ✓ | ✓ | ✗ |\n| sleep() | ✓ | ✓ | ✗ |\n| attendMeeting() | ✓ | ✓ | ✗ |\n| submitTimesheet() | ✓ | ✓ | ✗ |\n| takeVacation() | ✓ | ✗ | ✗ |\n| getPaid() | ✓ | ✓ | ✗ |\n| performMaintenance() | ✗ | ✗ | ✓ |\n\n---\n\n**Refactored Interfaces:**\n\n```java\n// Core interface - all workers can work\ninterface Workable {\n    void work();\n}\n\n// Human biological needs\ninterface HumanNeeds {\n    void eat();\n    void sleep();\n}\n\n// Office/collaboration activities\ninterface Collaborator {\n    void attendMeeting();\n}\n\n// Administrative tasks for paid workers\ninterface Payable {\n    void submitTimesheet();\n    void getPaid();\n}\n\n// Benefits for full employees only\ninterface BenefitsEligible {\n    void takeVacation();\n    int getVacationDaysRemaining();\n}\n\n// Machine-specific operations\ninterface Maintainable {\n    void performMaintenance();\n    void runDiagnostics();\n    MaintenanceReport getMaintenanceStatus();\n}\n\n// Composed interfaces for convenience (optional)\ninterface HumanWorker extends Workable, HumanNeeds, Collaborator, Payable {\n    // Combines common human worker interfaces\n}\n\n// Concrete implementations\nclass Employee implements Workable, HumanNeeds, Collaborator, Payable, BenefitsEligible {\n\n    @Override\n    public void work() {\n        System.out.println(\"Working on assigned tasks\");\n    }\n\n    @Override\n    public void eat() {\n        System.out.println(\"Taking lunch break\");\n    }\n\n    @Override\n    public void sleep() {\n        System.out.println(\"Resting at home\");\n    }\n\n    @Override\n    public void attendMeeting() {\n        System.out.println(\"Attending team meeting\");\n    }\n\n    @Override\n    public void submitTimesheet() {\n        System.out.println(\"Submitting weekly timesheet\");\n    }\n\n    @Override\n    public void getPaid() {\n        System.out.println(\"Receiving salary deposit\");\n    }\n\n    @Override\n    public void takeVacation() {\n        System.out.println(\"On vacation\");\n    }\n\n    @Override\n    public int getVacationDaysRemaining() {\n        return 15;\n    }\n}\n\nclass Contractor implements Workable, HumanNeeds, Collaborator, Payable {\n    // Note: Does NOT implement BenefitsEligible\n\n    @Override\n    public void work() {\n        System.out.println(\"Working on contract deliverables\");\n    }\n\n    @Override\n    public void eat() {\n        System.out.println(\"Taking break\");\n    }\n\n    @Override\n    public void sleep() {\n        System.out.println(\"Resting\");\n    }\n\n    @Override\n    public void attendMeeting() {\n        System.out.println(\"Joining project meeting\");\n    }\n\n    @Override\n    public void submitTimesheet() {\n        System.out.println(\"Submitting hours for invoice\");\n    }\n\n    @Override\n    public void getPaid() {\n        System.out.println(\"Receiving contractor payment\");\n    }\n}\n\nclass Robot implements Workable, Maintainable {\n    // Only implements relevant interfaces\n    // No eat(), sleep(), takeVacation(), etc.\n\n    @Override\n    public void work() {\n        System.out.println(\"Executing programmed tasks\");\n    }\n\n    @Override\n    public void performMaintenance() {\n        System.out.println(\"Running maintenance cycle\");\n    }\n\n    @Override\n    public void runDiagnostics() {\n        System.out.println(\"Running self-diagnostics\");\n    }\n\n    @Override\n    public MaintenanceReport getMaintenanceStatus() {\n        return new MaintenanceReport(/* ... */);\n    }\n}\n```\n\n---\n\n**Client Code Example:**\n\n```java\nclass WorkScheduler {\n    // Only depends on Workable - doesn't care about eating or maintenance\n    public void scheduleWork(Workable worker) {\n        worker.work();\n    }\n}\n\nclass PayrollSystem {\n    // Only depends on Payable - doesn't care if human or robot\n    public void processPayment(Payable worker) {\n        worker.submitTimesheet();\n        worker.getPaid();\n    }\n}\n\nclass MaintenanceScheduler {\n    // Only depends on Maintainable - specific to machines\n    public void scheduleMaintenance(Maintainable machine) {\n        if (machine.getMaintenanceStatus().isDue()) {\n            machine.performMaintenance();\n        }\n    }\n}\n```\n\n---\n\n**Benefits of Refactored Design:**\n\n| Aspect | Before | After |\n|--------|--------|-------|\n| Robot implementation | Must implement 8 methods, 6 as no-ops | Only 4 relevant methods |\n| Adding new worker type | Must implement all 8 methods | Compose only needed interfaces |\n| Changing vacation logic | Affects all Worker implementers | Only affects BenefitsEligible |\n| Testing | Must mock all 8 methods | Only mock used interface |\n| Code clarity | Unclear what each worker supports | Interface clearly shows capabilities |"
  },
  {
    "id": "cs204-t3-ex12",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Communication Diagram",
    "description": "Create a communication diagram (collaboration diagram) for the \"Add Item to Cart\" use case in an e-commerce system. Include objects: Customer, ShoppingCartController, CartService, ProductRepository, Cart, and CartItem. Show numbered messages indicating the sequence of interactions.",
    "difficulty": 4,
    "hints": [
      "Communication diagrams show the same info as sequence diagrams but focus on object relationships",
      "Number messages to show sequence (1, 2, 3, or 1.1, 1.2 for nested calls)",
      "Show objects as rectangles with names underlined",
      "Lines represent links, arrows show message direction"
    ],
    "solution": "**Communication Diagram: Add Item to Cart**\n\n```\n                                    1: addToCart(productId, qty)\n     ┌───────────────┐     ──────────────────────────────────────>    ┌───────────────────────┐\n     │   :Customer   │                                                │ShoppingCartController │\n     │               │     <──────────────────────────────────────    │                       │\n     └───────────────┘           10: CartResponse                     └───────────┬───────────┘\n                                                                                  │\n                                                                                  │ 2: addItem(userId, productId, qty)\n                                                                                  │\n                                                                                  ▼\n                                                                      ┌───────────────────────┐\n                                                                      │     :CartService      │\n                                                                      └───┬───────────────┬───┘\n                                                                          │               │\n                                              3: findById(productId)      │               │     6: getOrCreate(userId)\n                                         ┌────────────────────────────────┘               └─────────────────────┐\n                                         │                                                                      │\n                                         ▼                                                                      ▼\n                              ┌───────────────────────┐                                          ┌───────────────────────┐\n                              │  :ProductRepository   │                                          │    :CartRepository    │\n                              └───────────┬───────────┘                                          └───────────┬───────────┘\n                                          │                                                                  │\n                                          │ 4: Product                                                       │ 7: Cart\n                                          │                                                                  │\n                                          ▼                                                                  ▼\n                              ┌───────────────────────┐                                          ┌───────────────────────┐\n                              │      :Product         │                                          │        :Cart          │\n                              │  ─────────────────    │                                          │  ─────────────────    │\n                              │  id: \"PROD-001\"       │                                          │  userId: \"USR-123\"    │\n                              │  name: \"Widget\"       │                                          │  items: []            │\n                              │  price: 29.99         │                                          │                       │\n                              │  stock: 100           │                                          └───────────┬───────────┘\n                              └───────────────────────┘                                                      │\n                                          │                                                                  │\n                                          │                          8: addItem(product, qty)                │\n                                          └──────────────────────────────────────────────────────────────────┘\n                                                                                  │\n                                                                                  │ 8.1: <<create>>\n                                                                                  ▼\n                                                                      ┌───────────────────────┐\n                                                                      │      :CartItem        │\n                                                                      │  ─────────────────    │\n                                                                      │  product: :Product    │\n                                                                      │  quantity: 2          │\n                                                                      │  subtotal: 59.98      │\n                                                                      └───────────────────────┘\n                                                                                  │\n                                                                                  │ 9: save(cart)\n                                                                      ┌───────────────────────┐\n                                                                      │    :CartRepository    │\n                                                                      │                       │\n                                                                      └───────────────────────┘\n```\n\n---\n\n**Message Sequence Table:**\n\n| # | From | To | Message | Description |\n|---|------|-----|---------|-------------|\n| 1 | Customer | CartController | addToCart(productId, qty) | User clicks add to cart |\n| 2 | CartController | CartService | addItem(userId, productId, qty) | Controller delegates to service |\n| 3 | CartService | ProductRepository | findById(productId) | Fetch product details |\n| 4 | ProductRepository | CartService | return Product | Product data returned |\n| 5 | CartService | (internal) | validateStock(product, qty) | Check inventory |\n| 6 | CartService | CartRepository | getOrCreate(userId) | Get user's cart |\n| 7 | CartRepository | CartService | return Cart | Cart object returned |\n| 8 | CartService | Cart | addItem(product, qty) | Add item to cart |\n| 8.1 | Cart | CartItem | <<create>> | Create new cart item |\n| 9 | CartService | CartRepository | save(cart) | Persist updated cart |\n| 10 | CartController | Customer | CartResponse | Return success response |\n\n---\n\n**Object Responsibilities:**\n\n| Object | Role |\n|--------|------|\n| Customer | Initiates action through UI |\n| ShoppingCartController | HTTP request handling, validation |\n| CartService | Business logic orchestration |\n| ProductRepository | Product data access |\n| CartRepository | Cart persistence |\n| Cart | Aggregate root, manages items |\n| CartItem | Value object, item details |\n| Product | Entity, product information |"
  },
  {
    "id": "cs204-t3-ex13",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Architectural Style Comparison",
    "description": "Compare and contrast three architectural styles for a new social media platform: Monolithic Architecture, Microservices Architecture, and Event-Driven Architecture. For each, discuss pros, cons, and when it would be appropriate. Make a recommendation with justification.",
    "difficulty": 4,
    "hints": [
      "Consider factors like team size, scalability needs, and development velocity",
      "Think about operational complexity",
      "Consider the nature of social media (high traffic, real-time updates)",
      "Think about data consistency requirements"
    ],
    "solution": "**Architectural Style Comparison: Social Media Platform**\n\n---\n\n**1. MONOLITHIC ARCHITECTURE**\n\n```\n┌─────────────────────────────────────────────────────┐\n│              Social Media Monolith                  │\n├─────────────────────────────────────────────────────┤\n│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌───────────┐ │\n│  │  User   │ │  Posts  │ │Messages │ │Notifications│ │\n│  │ Module  │ │ Module  │ │ Module  │ │   Module   │ │\n│  └─────────┘ └─────────┘ └─────────┘ └───────────┘ │\n│  ┌─────────┐ ┌─────────┐ ┌─────────┐               │\n│  │  Feed   │ │ Search  │ │ Ads     │               │\n│  │ Module  │ │ Module  │ │ Module  │               │\n│  └─────────┘ └─────────┘ └─────────┘               │\n├─────────────────────────────────────────────────────┤\n│              Shared Database (PostgreSQL)           │\n└─────────────────────────────────────────────────────┘\n```\n\n**Pros:**\n- Simple deployment and debugging\n- Easy to maintain data consistency\n- Lower operational overhead\n- Faster initial development\n- Single codebase, easier onboarding\n\n**Cons:**\n- Cannot scale modules independently\n- Single point of failure\n- Technology lock-in (one language/framework)\n- Deployments require full app restart\n- Becomes unwieldy as codebase grows\n\n**Best For:** Early-stage startup, small team (<10 developers), MVP phase\n\n---\n\n**2. MICROSERVICES ARCHITECTURE**\n\n```\n┌─────────────┐   ┌─────────────┐   ┌─────────────┐\n│User Service │   │Post Service │   │Feed Service │\n│   (Node.js) │   │   (Go)      │   │  (Python)   │\n└──────┬──────┘   └──────┬──────┘   └──────┬──────┘\n       │                 │                 │\n       ▼                 ▼                 ▼\n┌─────────────┐   ┌─────────────┐   ┌─────────────┐\n│  Users DB   │   │  Posts DB   │   │  Redis      │\n│ (PostgreSQL)│   │ (MongoDB)   │   │  (Cache)    │\n└─────────────┘   └─────────────┘   └─────────────┘\n\n┌─────────────┐   ┌─────────────┐   ┌─────────────┐\n│ Message Svc │   │Notification │   │ Search Svc  │\n│  (Elixir)   │   │   Service   │   │(Elasticsearch)\n└─────────────┘   └─────────────┘   └─────────────┘\n       │                 │                 │\n       ▼                 ▼                 ▼\n     (Kafka)          (Kafka)        (Kafka/ES)\n```\n\n**Pros:**\n- Independent scaling (scale feed service for viral content)\n- Team autonomy (each team owns a service)\n- Technology flexibility (best tool for each job)\n- Fault isolation (message service down doesn't kill feed)\n- Independent deployments\n\n**Cons:**\n- Distributed system complexity\n- Network latency between services\n- Data consistency challenges\n- Requires sophisticated DevOps\n- Higher infrastructure costs\n- Debugging across services is hard\n\n**Best For:** Large organization (100+ developers), high traffic, need for independent scaling\n\n---\n\n**3. EVENT-DRIVEN ARCHITECTURE**\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                     Event Backbone (Kafka)                  │\n├─────────────────────────────────────────────────────────────┤\n│  Topics: user.created, post.created, post.liked,            │\n│          user.followed, message.sent, notification.trigger  │\n└─────────────────────────────────────────────────────────────┘\n       ▲         ▲         ▲         ▲         ▲         ▲\n       │         │         │         │         │         │\n ┌─────┴───┐ ┌───┴────┐ ┌──┴─────┐ ┌─┴──────┐ ┌┴────────┐│\n │  User   │ │  Post  │ │  Feed  │ │Notif.  │ │Analytics││\n │ Service │ │ Service│ │ Builder│ │Service │ │ Service ││\n └─────────┘ └────────┘ └────────┘ └────────┘ └─────────┘│\n                                                          │\n                            ┌─────────────────────────────┘\n                            │ Subscribe: post.created, user.followed\n                            ▼\n                     ┌─────────────────┐\n                     │Recommendation   │\n                     │    Engine       │\n                     └─────────────────┘\n```\n\n**Pros:**\n- Natural fit for social media (events: like, comment, share)\n- Loose coupling between services\n- Easy to add new consumers (analytics, ML)\n- Handles traffic spikes via buffering\n- Async processing improves perceived performance\n- Excellent audit trail (event log)\n\n**Cons:**\n- Eventually consistent (not immediately consistent)\n- Complex event schema management\n- Debugging event flows is challenging\n- Requires understanding of async patterns\n- Message ordering can be tricky\n\n**Best For:** Real-time features, high-volume async processing, data pipelines, scalability\n\n---\n\n**COMPARISON MATRIX:**\n\n| Factor | Monolithic | Microservices | Event-Driven |\n|--------|------------|---------------|--------------|\n| Initial Complexity | Low | High | Medium-High |\n| Scalability | Limited | Excellent | Excellent |\n| Data Consistency | Strong | Eventual | Eventual |\n| Development Speed (early) | Fast | Slow | Medium |\n| Development Speed (at scale) | Slow | Fast | Fast |\n| Operational Overhead | Low | Very High | High |\n| Team Independence | Low | High | High |\n| Fault Isolation | Poor | Good | Good |\n| Real-time Capability | Limited | Good | Excellent |\n\n---\n\n**RECOMMENDATION: Hybrid Approach**\n\nFor a new social media platform, I recommend:\n\n**Phase 1 (MVP):** Start with a well-structured **Modular Monolith**\n- Faster time to market\n- Validate product-market fit\n- Define clear module boundaries internally\n\n**Phase 2 (Growth):** Evolve to **Event-Driven Microservices**\n- Extract high-load components (Feed, Notifications) first\n- Introduce event backbone (Kafka) for real-time features\n- Keep less critical services in monolith longer\n\n**Justification:**\n1. Social media is inherently event-driven (posts, likes, comments are events)\n2. Real-time feed updates require async processing\n3. Viral content requires independent scaling\n4. Starting simple avoids premature optimization\n5. Event backbone enables analytics, ML, and future features"
  },
  {
    "id": "cs204-t3-ex14",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Object Constraint Language (OCL)",
    "description": "Write OCL constraints for the following class diagram scenario:\n\nA Company has multiple Employees. Each Employee has a salary and a manager (who is also an Employee). The CEO has no manager. Departments have a budget. Write constraints for:\n1. Employee salary must be positive\n2. Manager must have higher salary than subordinates\n3. CEO is the only employee without a manager\n4. Department budget must cover total employee salaries\n5. An employee cannot be their own manager",
    "difficulty": 5,
    "hints": [
      "OCL uses context to specify which class the constraint applies to",
      "Use self to refer to the current instance",
      "Use forAll, select, exists for collection operations",
      "Use implies for conditional constraints"
    ],
    "solution": "**OCL Constraints for Company Structure**\n\n---\n\n**Class Diagram Context:**\n\n```\n┌─────────────────┐       ┌─────────────────────┐\n│    Company      │       │     Department      │\n├─────────────────┤       ├─────────────────────┤\n│ name: String    │1    * │ name: String        │\n│ ceo: Employee   │───────│ budget: Money       │\n└─────────────────┘       └──────────┬──────────┘\n                                     │ 1\n                                     │\n                                     │ *\n                          ┌──────────┴──────────┐\n                          │      Employee       │\n                          ├─────────────────────┤\n                          │ name: String        │\n                          │ salary: Money       │\n                          │ title: String       │\n                          ├─────────────────────┤\n                          │ manager: Employee   │◇─┐\n                          │ subordinates: Set   │  │ 0..1\n                          └─────────────────────┘──┘\n                                     *\n```\n\n---\n\n**OCL Constraints:**\n\n**1. Employee salary must be positive**\n\n```ocl\ncontext Employee\ninv PositiveSalary:\n    self.salary > 0\n```\n\n**Explanation:** The invariant ensures that every Employee instance has a salary greater than zero.\n\n---\n\n**2. Manager must have higher salary than all subordinates**\n\n```ocl\ncontext Employee\ninv ManagerEarnsMore:\n    self.subordinates->notEmpty() implies\n        self.subordinates->forAll(sub | self.salary > sub.salary)\n```\n\n**Alternative with select:**\n```ocl\ncontext Employee\ninv ManagerEarnsMore2:\n    self.subordinates->select(sub | sub.salary >= self.salary)->isEmpty()\n```\n\n**Explanation:** If an employee has subordinates (is a manager), then all subordinates must have a lower salary than the manager.\n\n---\n\n**3. CEO is the only employee without a manager**\n\n```ocl\ncontext Company\ninv SingleCEO:\n    self.employees->select(e | e.manager.oclIsUndefined())->size() = 1\n    and\n    self.employees->select(e | e.manager.oclIsUndefined())->includes(self.ceo)\n```\n\n**Alternative constraint on Employee:**\n```ocl\ncontext Employee\ninv OnlyCEOHasNoManager:\n    self.manager.oclIsUndefined() implies self = self.company.ceo\n```\n\n**Explanation:** Exactly one employee (the CEO) has no manager. All other employees must have a manager.\n\n---\n\n**4. Department budget must cover total employee salaries**\n\n```ocl\ncontext Department\ninv BudgetCoversPayroll:\n    self.budget >= self.employees->collect(e | e.salary)->sum()\n```\n\n**With explicit type:**\n```ocl\ncontext Department\ninv BudgetCoversPayroll2:\n    let totalSalaries: Money = self.employees.salary->sum()\n    in self.budget >= totalSalaries\n```\n\n**Explanation:** The department's budget must be at least equal to the sum of all employee salaries in that department.\n\n---\n\n**5. An employee cannot be their own manager**\n\n```ocl\ncontext Employee\ninv NotOwnManager:\n    self.manager <> self\n```\n\n**Extended: No circular management chains**\n```ocl\ncontext Employee\ninv NoCircularManagement:\n    not self.allManagers()->includes(self)\n\ncontext Employee\ndef: allManagers(): Set(Employee) =\n    if self.manager.oclIsUndefined() then\n        Set{}\n    else\n        self.manager.allManagers()->including(self.manager)\n    endif\n```\n\n**Explanation:** An employee cannot be their own manager, and extended version prevents circular chains (A manages B, B manages A).\n\n---\n\n**Additional Useful Constraints:**\n\n**6. Every employee except CEO must have exactly one manager**\n```ocl\ncontext Employee\ninv ExactlyOneManager:\n    self <> self.company.ceo implies\n        self.manager->size() = 1\n```\n\n**7. Manager must be in the same company**\n```ocl\ncontext Employee\ninv ManagerSameCompany:\n    self.manager.oclIsUndefined() or\n        self.manager.company = self.company\n```\n\n**8. Derivation rule for subordinates**\n```ocl\ncontext Employee\nderive subordinates:\n    Employee.allInstances()->select(e | e.manager = self)\n```\n\n---\n\n**Pre/Post Conditions for Operations:**\n\n```ocl\ncontext Employee::promote(newSalary: Money, newTitle: String)\npre ValidRaise:\n    newSalary > self.salary\npre HasManager:\n    not self.manager.oclIsUndefined()\npost SalaryUpdated:\n    self.salary = newSalary\npost TitleUpdated:\n    self.title = newTitle\npost StillBelowManager:\n    self.salary < self.manager.salary\n```\n\n---\n\n**Summary Table:**\n\n| Constraint | Type | Enforces |\n|------------|------|----------|\n| PositiveSalary | Invariant | Data validity |\n| ManagerEarnsMore | Invariant | Business rule |\n| SingleCEO | Invariant | Cardinality |\n| BudgetCoversPayroll | Invariant | Business rule |\n| NotOwnManager | Invariant | Data integrity |"
  },
  {
    "id": "cs204-t3-ex15",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "Design Pattern Selection",
    "description": "You are designing a document editor application. For each of the following requirements, identify an appropriate design pattern and explain how you would apply it:\n\n1. Users need to undo/redo their changes\n2. Documents can be saved in multiple formats (PDF, DOCX, HTML)\n3. Different views of the same document (outline, WYSIWYG, source) must stay synchronized\n4. Complex documents have nested structures (sections, paragraphs, images, tables)\n5. Document styling should be applied without modifying document content classes",
    "difficulty": 4,
    "hints": [
      "Consider behavioral, creational, and structural patterns",
      "Think about the problems each pattern solves",
      "Consider how the patterns might interact",
      "Draw brief class diagrams if helpful"
    ],
    "solution": "**Design Pattern Selection for Document Editor**\n\n---\n\n**1. Undo/Redo Functionality → COMMAND PATTERN**\n\n**Problem:** Need to track operations, reverse them, and replay them.\n\n**Solution:**\n\n```\n┌─────────────────┐     ┌──────────────────────┐\n│    Invoker      │     │  <<interface>>       │\n│   (Editor)      │────>│     Command          │\n├─────────────────┤     ├──────────────────────┤\n│ - history: Stack│     │ + execute()          │\n│ - redoStack     │     │ + undo()             │\n├─────────────────┤     └──────────────────────┘\n│ + executeCmd()  │              △\n│ + undo()        │              │\n│ + redo()        │     ┌────────┼────────┐\n└─────────────────┘     │        │        │\n                        │        │        │\n              ┌─────────┴───┐ ┌──┴────────┴───┐\n              │InsertTextCmd│ │DeleteTextCmd  │\n              ├─────────────┤ ├──────────────┤\n              │- document   │ │- document    │\n              │- position   │ │- position    │\n              │- text       │ │- deletedText │\n              ├─────────────┤ ├──────────────┤\n              │+ execute()  │ │+ execute()   │\n              │+ undo()     │ │+ undo()      │\n              └─────────────┘ └──────────────┘\n```\n\n**Implementation:**\n```typescript\ninterface Command {\n  execute(): void;\n  undo(): void;\n}\n\nclass InsertTextCommand implements Command {\n  constructor(private doc: Document, private pos: number, private text: string) {}\n\n  execute() { this.doc.insertAt(this.pos, this.text); }\n  undo() { this.doc.deleteAt(this.pos, this.text.length); }\n}\n\nclass Editor {\n  private history: Command[] = [];\n  private redoStack: Command[] = [];\n\n  executeCommand(cmd: Command) {\n    cmd.execute();\n    this.history.push(cmd);\n    this.redoStack = [];  // Clear redo on new action\n  }\n\n  undo() {\n    const cmd = this.history.pop();\n    if (cmd) { cmd.undo(); this.redoStack.push(cmd); }\n  }\n\n  redo() {\n    const cmd = this.redoStack.pop();\n    if (cmd) { cmd.execute(); this.history.push(cmd); }\n  }\n}\n```\n\n---\n\n**2. Multiple Export Formats → STRATEGY PATTERN (or VISITOR)**\n\n**Problem:** Same document exported to different formats without changing Document class.\n\n**Solution:**\n\n```\n┌─────────────────┐     ┌──────────────────────┐\n│    Document     │     │  <<interface>>       │\n├─────────────────┤     │   ExportStrategy     │\n│ - content       │────>├──────────────────────┤\n├─────────────────┤     │ + export(doc): bytes │\n│ + export(strat) │     └──────────────────────┘\n└─────────────────┘              △\n                                 │\n               ┌─────────────────┼─────────────────┐\n               │                 │                 │\n     ┌─────────┴────┐  ┌────────┴─────┐  ┌───────┴──────┐\n     │  PDFExporter │  │ DocxExporter │  │ HTMLExporter │\n     ├──────────────┤  ├──────────────┤  ├──────────────┤\n     │+ export(doc) │  │+ export(doc) │  │+ export(doc) │\n     └──────────────┘  └──────────────┘  └──────────────┘\n```\n\n**Implementation:**\n```typescript\ninterface ExportStrategy {\n  export(document: Document): Uint8Array;\n}\n\nclass PDFExporter implements ExportStrategy {\n  export(doc: Document): Uint8Array {\n    // Convert document to PDF format\n  }\n}\n\nclass Document {\n  export(strategy: ExportStrategy): Uint8Array {\n    return strategy.export(this);\n  }\n}\n\n// Usage\nconst doc = new Document();\ndoc.export(new PDFExporter());\ndoc.export(new HTMLExporter());\n```\n\n---\n\n**3. Synchronized Views → OBSERVER PATTERN**\n\n**Problem:** Multiple views must update when document changes.\n\n**Solution:**\n\n```\n                    ┌──────────────────────┐\n                    │  <<interface>>       │\n                    │     Observer         │\n                    ├──────────────────────┤\n                    │ + update(doc): void  │\n                    └──────────────────────┘\n                             △\n                             │\n           ┌─────────────────┼─────────────────┐\n           │                 │                 │\n┌──────────┴───┐   ┌────────┴─────┐   ┌───────┴──────┐\n│ OutlineView  │   │  WYSIWYGView │   │  SourceView  │\n├──────────────┤   ├──────────────┤   ├──────────────┤\n│+ update(doc) │   │+ update(doc) │   │+ update(doc) │\n└──────────────┘   └──────────────┘   └──────────────┘\n        ▲                  ▲                  ▲\n        │                  │                  │\n        └──────────────────┼──────────────────┘\n                           │ notifies\n                    ┌──────┴──────┐\n                    │   Document  │\n                    │  (Subject)  │\n                    ├─────────────┤\n                    │- observers[]│\n                    ├─────────────┤\n                    │+ attach()   │\n                    │+ detach()   │\n                    │+ notify()   │\n                    └─────────────┘\n```\n\n**Implementation:**\n```typescript\ninterface Observer {\n  update(document: Document): void;\n}\n\nclass Document {\n  private observers: Observer[] = [];\n\n  attach(obs: Observer) { this.observers.push(obs); }\n\n  modify(change: Change) {\n    // Apply change\n    this.notify();\n  }\n\n  private notify() {\n    this.observers.forEach(obs => obs.update(this));\n  }\n}\n\nclass WYSIWYGView implements Observer {\n  update(doc: Document) { this.render(doc); }\n}\n```\n\n---\n\n**4. Nested Document Structure → COMPOSITE PATTERN**\n\n**Problem:** Uniform treatment of simple elements and containers.\n\n**Solution:**\n\n```\n                    ┌──────────────────────┐\n                    │  <<interface>>       │\n                    │   DocumentElement    │\n                    ├──────────────────────┤\n                    │ + render(): void     │\n                    │ + getContent(): str  │\n                    │ + accept(visitor)    │\n                    └──────────────────────┘\n                             △\n                             │\n          ┌──────────────────┼───────────────────┐\n          │                  │                   │\n┌─────────┴────┐   ┌────────┴──────┐   ┌────────┴─────┐\n│   Paragraph  │   │    Image      │   │   Section    │\n│   (Leaf)     │   │   (Leaf)      │   │ (Composite)  │\n├──────────────┤   ├───────────────┤   ├──────────────┤\n│ - text       │   │ - src         │   │ - children[] │\n├──────────────┤   ├───────────────┤   ├──────────────┤\n│ + render()   │   │ + render()    │   │ + add(elem)  │\n│ + getContent()│  │ + getContent()│   │ + remove()   │\n└──────────────┘   └───────────────┘   │ + render()   │\n                                       │ + getContent()│\n                                       └──────────────┘\n```\n\n**Implementation:**\n```typescript\ninterface DocumentElement {\n  render(): string;\n  getContent(): string;\n}\n\nclass Paragraph implements DocumentElement {\n  constructor(private text: string) {}\n  render() { return `<p>${this.text}</p>`; }\n  getContent() { return this.text; }\n}\n\nclass Section implements DocumentElement {\n  private children: DocumentElement[] = [];\n\n  add(elem: DocumentElement) { this.children.push(elem); }\n\n  render(): string {\n    return `<section>${this.children.map(c => c.render()).join('')}</section>`;\n  }\n\n  getContent(): string {\n    return this.children.map(c => c.getContent()).join('\\n');\n  }\n}\n```\n\n---\n\n**5. Styling Without Modifying Content → DECORATOR PATTERN**\n\n**Problem:** Add styling behavior dynamically without subclassing.\n\n**Solution:**\n\n```\n┌──────────────────────┐\n│   DocumentElement    │\n└──────────────────────┘\n           △\n           │\n     ┌─────┴──────┐\n     │            │\n┌────┴─────┐ ┌────┴────────────────┐\n│Paragraph │ │  StyleDecorator     │\n└──────────┘ │  (abstract)         │\n             ├─────────────────────┤\n             │ - wrapped: Element  │\n             ├─────────────────────┤\n             │ + render()          │\n             └─────────────────────┘\n                      △\n                      │\n        ┌─────────────┼─────────────┐\n        │             │             │\n┌───────┴────┐ ┌──────┴──────┐ ┌────┴──────┐\n│BoldDecorator│ │ItalicDecorator│ │ColorDecorator│\n└────────────┘ └─────────────┘ └───────────┘\n```\n\n**Implementation:**\n```typescript\nabstract class StyleDecorator implements DocumentElement {\n  constructor(protected wrapped: DocumentElement) {}\n\n  getContent(): string { return this.wrapped.getContent(); }\n  abstract render(): string;\n}\n\nclass BoldDecorator extends StyleDecorator {\n  render(): string { return `<b>${this.wrapped.render()}</b>`; }\n}\n\nclass ColorDecorator extends StyleDecorator {\n  constructor(wrapped: DocumentElement, private color: string) {\n    super(wrapped);\n  }\n  render(): string {\n    return `<span style=\"color:${this.color}\">${this.wrapped.render()}</span>`;\n  }\n}\n\n// Usage - can stack decorators\nconst para = new Paragraph(\"Hello\");\nconst styled = new ColorDecorator(new BoldDecorator(para), \"red\");\nstyled.render(); // <span style=\"color:red\"><b><p>Hello</p></b></span>\n```\n\n---\n\n**Pattern Summary:**\n\n| Requirement | Pattern | Category | Key Benefit |\n|-------------|---------|----------|-------------|\n| Undo/Redo | Command | Behavioral | Encapsulates operations as objects |\n| Export formats | Strategy | Behavioral | Algorithms interchangeable at runtime |\n| Synchronized views | Observer | Behavioral | Loose coupling, automatic updates |\n| Nested structure | Composite | Structural | Uniform tree traversal |\n| Styling | Decorator | Structural | Dynamic behavior addition |"
  },
  {
    "id": "cs204-t3-ex16",
    "subjectId": "cs204",
    "topicId": "cs204-topic-3",
    "type": "written",
    "title": "System Design Case Study",
    "description": "Design a URL shortening service (like bit.ly). Your design should include:\n1. High-level architecture diagram\n2. API design (RESTful endpoints)\n3. Data model / database schema\n4. Key algorithms (URL generation)\n5. Scalability considerations\n6. Discussion of trade-offs made",
    "difficulty": 5,
    "hints": [
      "Consider read-heavy vs write-heavy workload",
      "Think about URL collision handling",
      "Consider caching strategies",
      "Think about analytics requirements"
    ],
    "solution": "**System Design: URL Shortening Service**\n\n---\n\n**1. HIGH-LEVEL ARCHITECTURE**\n\n```\n┌─────────────────────────────────────────────────────────────────────────────┐\n│                              CLIENTS                                         │\n│        (Web Browser, Mobile App, API Consumers)                             │\n└───────────────────────────────┬─────────────────────────────────────────────┘\n                                │ HTTPS\n                                ▼\n┌───────────────────────────────────────────────────────────────────────────────┐\n│                           LOAD BALANCER                                       │\n│                        (AWS ALB / Nginx)                                      │\n└───────────────────────────────┬───────────────────────────────────────────────┘\n                                │\n                    ┌───────────┴───────────┐\n                    ▼                       ▼\n          ┌─────────────────┐     ┌─────────────────┐\n          │   API Server 1  │     │   API Server N  │\n          │    (Node.js)    │     │    (Node.js)    │\n          └────────┬────────┘     └────────┬────────┘\n                   │                       │\n                   └───────────┬───────────┘\n                               │\n              ┌────────────────┼────────────────┐\n              │                │                │\n              ▼                ▼                ▼\n    ┌─────────────────┐ ┌─────────────┐ ┌─────────────────┐\n    │   Redis Cache   │ │   Primary   │ │   PostgreSQL    │\n    │  (Short URL →   │ │ PostgreSQL  │ │    Replica      │\n    │   Long URL)     │ │             │ │   (Read-only)   │\n    └─────────────────┘ └─────────────┘ └─────────────────┘\n                               │\n                               ▼\n                     ┌─────────────────┐\n                     │  Analytics      │\n                     │  (Kafka → )     │\n                     │  ClickHouse)    │\n                     └─────────────────┘\n```\n\n---\n\n**2. API DESIGN**\n\n**Create Short URL**\n```\nPOST /api/v1/shorten\nContent-Type: application/json\n\nRequest:\n{\n  \"long_url\": \"https://example.com/very/long/path?params=value\",\n  \"custom_alias\": \"my-link\",      // optional\n  \"expires_at\": \"2025-12-31\",     // optional\n}\n\nResponse: 201 Created\n{\n  \"short_url\": \"https://short.ly/abc123\",\n  \"short_code\": \"abc123\",\n  \"long_url\": \"https://example.com/very/long/path?params=value\",\n  \"created_at\": \"2024-01-15T10:30:00Z\",\n  \"expires_at\": \"2025-12-31T00:00:00Z\"\n}\n```\n\n**Redirect (Read)**\n```\nGET /{short_code}\n→ 301 Redirect to long_url\n\nGET /{short_code}?no_redirect=true\n→ 200 OK { \"long_url\": \"...\" }\n```\n\n**Get Statistics**\n```\nGET /api/v1/stats/{short_code}\n\nResponse:\n{\n  \"short_code\": \"abc123\",\n  \"total_clicks\": 15234,\n  \"unique_visitors\": 8921,\n  \"clicks_by_country\": { \"US\": 5000, \"UK\": 2000 },\n  \"clicks_by_day\": [{ \"date\": \"2024-01-15\", \"count\": 500 }]\n}\n```\n\n**Delete URL**\n```\nDELETE /api/v1/urls/{short_code}\nAuthorization: Bearer <token>\n\nResponse: 204 No Content\n```\n\n---\n\n**3. DATA MODEL**\n\n```sql\n-- Main URL mapping table\nCREATE TABLE urls (\n    id              BIGSERIAL PRIMARY KEY,\n    short_code      VARCHAR(10) UNIQUE NOT NULL,\n    long_url        TEXT NOT NULL,\n    user_id         UUID REFERENCES users(id),\n    created_at      TIMESTAMP DEFAULT NOW(),\n    expires_at      TIMESTAMP,\n    is_active       BOOLEAN DEFAULT true,\n\n    INDEX idx_short_code (short_code),\n    INDEX idx_user_id (user_id)\n);\n\n-- Click events (high volume - consider time-series DB)\nCREATE TABLE clicks (\n    id              BIGSERIAL PRIMARY KEY,\n    url_id          BIGINT REFERENCES urls(id),\n    clicked_at      TIMESTAMP DEFAULT NOW(),\n    ip_address      INET,\n    user_agent      TEXT,\n    referer         TEXT,\n    country         VARCHAR(2),\n\n    INDEX idx_url_id_time (url_id, clicked_at)\n);\n\n-- Users (for authenticated features)\nCREATE TABLE users (\n    id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    email           VARCHAR(255) UNIQUE NOT NULL,\n    api_key         VARCHAR(64) UNIQUE NOT NULL,\n    created_at      TIMESTAMP DEFAULT NOW(),\n    plan            VARCHAR(20) DEFAULT 'free'\n);\n```\n\n---\n\n**4. KEY ALGORITHMS**\n\n**Short Code Generation (Base62 Encoding)**\n\n```typescript\n// Option A: Counter + Base62 (Sequential, predictable)\nclass SequentialGenerator {\n  private counter = 0;\n  private readonly ALPHABET = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n\n  generate(): string {\n    let num = ++this.counter;\n    let code = '';\n    while (num > 0) {\n      code = this.ALPHABET[num % 62] + code;\n      num = Math.floor(num / 62);\n    }\n    return code.padStart(6, '0');  // Minimum 6 chars\n  }\n}\n\n// Option B: Hash-based (Random, requires collision check)\nclass HashGenerator {\n  generate(longUrl: string): string {\n    const hash = crypto.createHash('md5').update(longUrl + Date.now()).digest('base64');\n    return hash.substring(0, 7).replace(/[+/=]/g, 'X');\n  }\n}\n\n// Option C: Pre-generated key service (Recommended for scale)\nclass KeyGenerationService {\n  private unusedKeys: string[] = [];\n  private usedKeys: Set<string> = new Set();\n\n  // Background job generates keys in batches\n  async preGenerateKeys(count: number) {\n    while (this.unusedKeys.length < count) {\n      const key = this.randomBase62(7);\n      if (!this.usedKeys.has(key)) {\n        this.unusedKeys.push(key);\n      }\n    }\n  }\n\n  getKey(): string {\n    const key = this.unusedKeys.pop()!;\n    this.usedKeys.add(key);\n    return key;\n  }\n\n  private randomBase62(length: number): string {\n    const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n    return Array.from({ length }, () => chars[Math.floor(Math.random() * 62)]).join('');\n  }\n}\n```\n\n**Capacity Calculation:**\n- 7-character Base62 = 62^7 = 3.5 trillion unique URLs\n- At 100 URLs/second = 3.15B/year → 1000+ years capacity\n\n---\n\n**5. SCALABILITY CONSIDERATIONS**\n\n**Read-Heavy Optimization (100:1 read:write ratio)**\n\n```\nRead Path (optimized):\n                                    ┌───────────────┐\n                    99% hit rate    │    Redis      │\nRequest ─────────────────────────>  │    Cache      │\n    │                               └───────────────┘\n    │ cache miss (1%)                      │\n    ▼                                      │\n┌─────────────────┐                        │\n│  PostgreSQL     │ <──────────────────────┘\n│  Read Replica   │   populate cache on miss\n└─────────────────┘\n```\n\n**Caching Strategy:**\n- Cache: short_code → long_url mapping\n- TTL: 24 hours (popular URLs stay hot)\n- Eviction: LRU\n- Cache-aside pattern\n\n**Database Sharding (for extreme scale):**\n- Shard by first character of short_code\n- 62 shards (one per Base62 character)\n- Or range-based: a-j, k-t, u-9, A-J, etc.\n\n**Geographic Distribution:**\n- CDN for static assets\n- Regional API servers\n- Global Anycast DNS\n\n---\n\n**6. TRADE-OFFS DISCUSSION**\n\n| Decision | Trade-off | Rationale |\n|----------|-----------|-----------|\n| **Base62 vs Base64** | Slightly fewer chars vs URL-safe | Base62 avoids +/= which need URL encoding |\n| **Sequential vs Random keys** | Predictable vs Collision risk | Random chosen - sequential exposes usage patterns |\n| **7-char codes** | Storage vs Capacity | 7 chars = 3.5T URLs, sufficient for decades |\n| **PostgreSQL vs NoSQL** | ACID vs Scale | Postgres with read replicas handles load; can shard later |\n| **Sync vs Async analytics** | Latency vs Complexity | Async via Kafka prevents redirect latency |\n| **301 vs 302 redirect** | Caching vs Analytics | 301 allows browser caching but loses click counts; use 302 for analytics |\n| **Pre-generated keys** | Memory vs Latency | Pre-gen eliminates collision checks at write time |\n\n**Rate Limiting:**\n- Free tier: 100 URLs/day, 1000 redirects/minute\n- Paid tier: Higher limits\n- Use Redis for distributed rate limiting\n\n**Security Considerations:**\n- Validate URLs (no malicious redirects)\n- Rate limit by IP and API key\n- Scan URLs against malware databases\n- HTTPS only for shortened URLs"
  },
  {
    "id": "cs204-t4-ex1",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Pattern Categories",
    "description": "Explain the three categories of GoF design patterns (Creational, Structural, Behavioral). Provide one example pattern from each category and describe its purpose.",
    "difficulty": 1,
    "hints": [
      "Think about what problem each category addresses",
      "Creational deals with object creation",
      "Structural deals with composition",
      "Behavioral deals with communication"
    ],
    "solution": "**Creational Patterns** - Control object creation mechanisms.\nExample: Factory Method - Defines interface for creating objects, letting subclasses decide which class to instantiate.\n\n**Structural Patterns** - Compose objects into larger structures.\nExample: Adapter - Converts one interface to another that clients expect.\n\n**Behavioral Patterns** - Define object communication and responsibility.\nExample: Observer - Defines one-to-many dependency so when one object changes, dependents are notified automatically."
  },
  {
    "id": "cs204-t4-ex2",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Singleton Pattern",
    "description": "A logging system should have exactly one instance accessible throughout an application. Design this using the Singleton pattern. Address thread safety concerns.",
    "difficulty": 2,
    "hints": [
      "Private constructor prevents external instantiation",
      "Static method provides global access point",
      "Consider lazy vs eager initialization",
      "Double-checked locking for thread safety"
    ],
    "solution": "class Logger {\n  private static instance: Logger;\n  private constructor() {}\n\n  static getInstance(): Logger {\n    if (!Logger.instance) {\n      Logger.instance = new Logger();\n    }\n    return Logger.instance;\n  }\n\n  log(message: string): void { /* ... */ }\n}\n\n**Thread Safety**: Use synchronized/lock in getInstance() or eager initialization (create instance at class loading). Double-checked locking reduces synchronization overhead."
  },
  {
    "id": "cs204-t4-ex3",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Factory Method Pattern",
    "description": "A document application needs to create different document types (PDF, Word, Text). Design a solution using Factory Method that allows easy addition of new document types.",
    "difficulty": 2,
    "hints": [
      "Define abstract creator with factory method",
      "Concrete creators override to produce specific products",
      "Products share common interface",
      "New types require only new creator subclass"
    ],
    "solution": "interface Document { open(): void; save(): void; }\n\nabstract class Application {\n  abstract createDocument(): Document;  // Factory Method\n\n  newDocument(): Document {\n    const doc = this.createDocument();\n    doc.open();\n    return doc;\n  }\n}\n\nclass PDFApplication extends Application {\n  createDocument(): Document { return new PDFDocument(); }\n}\n\nclass WordApplication extends Application {\n  createDocument(): Document { return new WordDocument(); }\n}\n\n**Benefit**: Adding new document type requires only new Document class and Application subclass."
  },
  {
    "id": "cs204-t4-ex4",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Abstract Factory Pattern",
    "description": "A UI toolkit must support multiple themes (Light, Dark). Each theme provides consistent Button, TextField, and Checkbox styles. Design using Abstract Factory.",
    "difficulty": 3,
    "hints": [
      "Abstract factory declares creation methods for product family",
      "Concrete factories implement for each theme",
      "Products belong to families that work together",
      "Client code uses factories through abstract interface"
    ],
    "solution": "interface UIFactory {\n  createButton(): Button;\n  createTextField(): TextField;\n  createCheckbox(): Checkbox;\n}\n\nclass LightThemeFactory implements UIFactory {\n  createButton() { return new LightButton(); }\n  createTextField() { return new LightTextField(); }\n  createCheckbox() { return new LightCheckbox(); }\n}\n\nclass DarkThemeFactory implements UIFactory {\n  createButton() { return new DarkButton(); }\n  // ... similar for other components\n}\n\n// Client uses factory without knowing concrete types\nfunction buildUI(factory: UIFactory) {\n  const btn = factory.createButton();\n  const txt = factory.createTextField();\n}\n\n**Key**: Ensures UI components are from same family (no mixing light buttons with dark textfields)."
  },
  {
    "id": "cs204-t4-ex5",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Builder Pattern",
    "description": "A meal ordering system creates complex meal objects with main, side, drink, and dessert (each optional). Design using Builder pattern to construct meals step-by-step.",
    "difficulty": 2,
    "hints": [
      "Builder provides methods for each optional part",
      "Methods return builder for chaining",
      "build() method returns final product",
      "Director can define preset configurations"
    ],
    "solution": "class Meal {\n  main?: string; side?: string; drink?: string; dessert?: string;\n}\n\nclass MealBuilder {\n  private meal = new Meal();\n\n  withMain(m: string) { this.meal.main = m; return this; }\n  withSide(s: string) { this.meal.side = s; return this; }\n  withDrink(d: string) { this.meal.drink = d; return this; }\n  withDessert(d: string) { this.meal.dessert = d; return this; }\n  build() { return this.meal; }\n}\n\n// Usage:\nconst meal = new MealBuilder()\n  .withMain(\"Burger\")\n  .withDrink(\"Cola\")\n  .build();\n\n**Benefit**: Avoids constructors with many optional parameters; clearly expresses what's being set."
  },
  {
    "id": "cs204-t4-ex6",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Adapter Pattern",
    "description": "Your application uses a MediaPlayer interface, but you have a third-party AdvancedMediaLibrary with incompatible methods. Design an Adapter to integrate it.",
    "difficulty": 2,
    "hints": [
      "Adapter implements target interface",
      "Adapter holds reference to adaptee",
      "Adapter translates calls to adaptee methods",
      "Object adapter uses composition"
    ],
    "solution": "// Target interface (what client expects)\ninterface MediaPlayer {\n  play(file: string): void;\n}\n\n// Adaptee (third-party library)\nclass AdvancedMediaLibrary {\n  loadMedia(path: string): void { /* ... */ }\n  startPlayback(): void { /* ... */ }\n}\n\n// Adapter\nclass MediaAdapter implements MediaPlayer {\n  constructor(private library: AdvancedMediaLibrary) {}\n\n  play(file: string): void {\n    this.library.loadMedia(file);\n    this.library.startPlayback();\n  }\n}\n\n// Usage: const player: MediaPlayer = new MediaAdapter(new AdvancedMediaLibrary());\n\n**Key**: Client code works with MediaPlayer interface, unaware of AdvancedMediaLibrary."
  },
  {
    "id": "cs204-t4-ex7",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Decorator Pattern",
    "description": "A coffee shop has base coffee with optional additions (milk, sugar, whipped cream) that add cost. Design using Decorator to dynamically add features without subclass explosion.",
    "difficulty": 3,
    "hints": [
      "Component interface defines operations",
      "Decorators wrap components and implement same interface",
      "Decorators delegate to wrapped object and add behavior",
      "Decorators can be stacked"
    ],
    "solution": "interface Coffee {\n  getCost(): number;\n  getDescription(): string;\n}\n\nclass BasicCoffee implements Coffee {\n  getCost() { return 2.00; }\n  getDescription() { return \"Coffee\"; }\n}\n\nabstract class CoffeeDecorator implements Coffee {\n  constructor(protected coffee: Coffee) {}\n  getCost() { return this.coffee.getCost(); }\n  getDescription() { return this.coffee.getDescription(); }\n}\n\nclass MilkDecorator extends CoffeeDecorator {\n  getCost() { return this.coffee.getCost() + 0.50; }\n  getDescription() { return this.coffee.getDescription() + \", Milk\"; }\n}\n\n// Usage:\nconst order = new MilkDecorator(new WhipDecorator(new BasicCoffee()));\n// Dynamically combines behaviors without creating MilkWhipCoffee subclass."
  },
  {
    "id": "cs204-t4-ex8",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Observer Pattern",
    "description": "A weather station should notify multiple displays (CurrentConditions, Statistics, Forecast) when measurements change. Design using Observer pattern.",
    "difficulty": 2,
    "hints": [
      "Subject maintains list of observers",
      "Subject notifies all observers on state change",
      "Observers register/unregister themselves",
      "Push vs pull notification models"
    ],
    "solution": "interface Observer { update(temp: number, humidity: number): void; }\n\ninterface Subject {\n  attach(o: Observer): void;\n  detach(o: Observer): void;\n  notify(): void;\n}\n\nclass WeatherStation implements Subject {\n  private observers: Observer[] = [];\n  private temp = 0; private humidity = 0;\n\n  attach(o: Observer) { this.observers.push(o); }\n  detach(o: Observer) { this.observers = this.observers.filter(x => x !== o); }\n  notify() { this.observers.forEach(o => o.update(this.temp, this.humidity)); }\n\n  setMeasurements(t: number, h: number) {\n    this.temp = t; this.humidity = h;\n    this.notify();\n  }\n}\n\nclass CurrentConditionsDisplay implements Observer {\n  update(temp: number, humidity: number) { console.log(`Temp: ${temp}, Humidity: ${humidity}`); }\n}\n\n**Benefit**: Loose coupling - WeatherStation doesn't know concrete display types."
  },
  {
    "id": "cs204-t4-ex9",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Strategy Pattern",
    "description": "A navigation app should support different routing strategies (fastest, shortest, scenic). Design using Strategy to allow runtime algorithm switching.",
    "difficulty": 2,
    "hints": [
      "Strategy interface declares algorithm method",
      "Concrete strategies implement specific algorithms",
      "Context holds strategy reference",
      "Strategy can be changed at runtime"
    ],
    "solution": "interface RouteStrategy {\n  calculateRoute(start: Point, end: Point): Route;\n}\n\nclass FastestRoute implements RouteStrategy {\n  calculateRoute(start: Point, end: Point): Route {\n    // Considers traffic, road types for speed\n    return route;\n  }\n}\n\nclass ShortestRoute implements RouteStrategy {\n  calculateRoute(start: Point, end: Point): Route {\n    // Minimizes distance regardless of speed\n    return route;\n  }\n}\n\nclass Navigator {\n  constructor(private strategy: RouteStrategy) {}\n\n  setStrategy(s: RouteStrategy) { this.strategy = s; }\n\n  navigate(start: Point, end: Point): Route {\n    return this.strategy.calculateRoute(start, end);\n  }\n}\n\n// Usage:\nnavigator.setStrategy(new ScenicRoute()); // Switch algorithm at runtime"
  },
  {
    "id": "cs204-t4-ex10",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Command Pattern",
    "description": "A text editor needs undo/redo functionality for operations like insert, delete, and format. Design using Command pattern to encapsulate operations as objects.",
    "difficulty": 3,
    "hints": [
      "Command interface with execute() and undo()",
      "Concrete commands store state needed for undo",
      "Invoker maintains command history stack",
      "Commands can be queued, logged, or undone"
    ],
    "solution": "interface Command {\n  execute(): void;\n  undo(): void;\n}\n\nclass InsertTextCommand implements Command {\n  constructor(private doc: Document, private pos: number, private text: string) {}\n\n  execute() { this.doc.insertAt(this.pos, this.text); }\n  undo() { this.doc.deleteAt(this.pos, this.text.length); }\n}\n\nclass Editor {\n  private history: Command[] = [];\n  private undone: Command[] = [];\n\n  executeCommand(cmd: Command) {\n    cmd.execute();\n    this.history.push(cmd);\n    this.undone = [];\n  }\n\n  undo() {\n    const cmd = this.history.pop();\n    if (cmd) { cmd.undo(); this.undone.push(cmd); }\n  }\n\n  redo() {\n    const cmd = this.undone.pop();\n    if (cmd) { cmd.execute(); this.history.push(cmd); }\n  }\n}"
  },
  {
    "id": "cs204-t4-ex11",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Composite Pattern",
    "description": "A file system has files and folders. Folders can contain files or other folders. Design using Composite to treat individual files and compositions uniformly.",
    "difficulty": 3,
    "hints": [
      "Component defines interface for all objects",
      "Leaf represents end objects (files)",
      "Composite contains children (folders)",
      "Same operations work on both leaves and composites"
    ],
    "solution": "interface FileSystemItem {\n  getName(): string;\n  getSize(): number;\n}\n\nclass File implements FileSystemItem {\n  constructor(private name: string, private size: number) {}\n  getName() { return this.name; }\n  getSize() { return this.size; }\n}\n\nclass Folder implements FileSystemItem {\n  private items: FileSystemItem[] = [];\n  constructor(private name: string) {}\n\n  add(item: FileSystemItem) { this.items.push(item); }\n  getName() { return this.name; }\n  getSize() {\n    return this.items.reduce((sum, item) => sum + item.getSize(), 0);\n  }\n}\n\n// Usage: folder.getSize() recursively calculates total size\n// Client treats files and folders identically through FileSystemItem interface."
  },
  {
    "id": "cs204-t4-ex12",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "State Pattern",
    "description": "A vending machine has states: NoCoin, HasCoin, Dispensing, SoldOut. Behavior varies by state. Design using State pattern to avoid complex conditionals.",
    "difficulty": 3,
    "hints": [
      "State interface declares state-specific behaviors",
      "Concrete states implement behavior for each state",
      "Context delegates to current state object",
      "State transitions change context state reference"
    ],
    "solution": "interface VendingState {\n  insertCoin(): void;\n  ejectCoin(): void;\n  dispense(): void;\n}\n\nclass NoCoinState implements VendingState {\n  constructor(private machine: VendingMachine) {}\n\n  insertCoin() {\n    console.log(\"Coin inserted\");\n    this.machine.setState(this.machine.hasCoinState);\n  }\n  ejectCoin() { console.log(\"No coin to eject\"); }\n  dispense() { console.log(\"Insert coin first\"); }\n}\n\nclass VendingMachine {\n  noCoinState = new NoCoinState(this);\n  hasCoinState = new HasCoinState(this);\n  // ... other states\n\n  private state: VendingState = this.noCoinState;\n\n  setState(s: VendingState) { this.state = s; }\n  insertCoin() { this.state.insertCoin(); }\n  // ... delegate other methods\n}\n\n**Benefit**: Each state's logic is isolated; adding states doesn't require modifying existing code."
  },
  {
    "id": "cs204-t4-ex13",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Facade Pattern",
    "description": "A home theater system has multiple subsystems (DVDPlayer, Projector, SoundSystem, Lights). Design a Facade to provide simple \"watchMovie()\" interface.",
    "difficulty": 2,
    "hints": [
      "Facade provides simplified interface to complex subsystem",
      "Facade coordinates multiple objects",
      "Clients can still access subsystems directly if needed",
      "Reduces coupling between clients and subsystems"
    ],
    "solution": "class HomeTheaterFacade {\n  constructor(\n    private dvd: DVDPlayer,\n    private projector: Projector,\n    private sound: SoundSystem,\n    private lights: Lights\n  ) {}\n\n  watchMovie(movie: string) {\n    this.lights.dim(10);\n    this.projector.on();\n    this.projector.setInput(\"DVD\");\n    this.sound.on();\n    this.sound.setSurroundMode();\n    this.dvd.on();\n    this.dvd.play(movie);\n  }\n\n  endMovie() {\n    this.dvd.stop();\n    this.dvd.off();\n    this.sound.off();\n    this.projector.off();\n    this.lights.on();\n  }\n}\n\n// Client just calls: theater.watchMovie(\"Inception\");\n// Instead of coordinating all subsystems manually."
  },
  {
    "id": "cs204-t4-ex14",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Template Method Pattern",
    "description": "Beverages (tea, coffee) follow similar preparation: boilWater, brew, pourInCup, addCondiments. Only brew and condiments differ. Design using Template Method.",
    "difficulty": 2,
    "hints": [
      "Abstract class defines template method with algorithm skeleton",
      "Template method calls abstract methods (hooks)",
      "Subclasses override only the varying steps",
      "Common steps defined in base class"
    ],
    "solution": "abstract class Beverage {\n  // Template Method - defines algorithm structure\n  prepare(): void {\n    this.boilWater();\n    this.brew();          // Abstract - varies\n    this.pourInCup();\n    this.addCondiments(); // Abstract - varies\n  }\n\n  private boilWater() { console.log(\"Boiling water\"); }\n  private pourInCup() { console.log(\"Pouring into cup\"); }\n\n  abstract brew(): void;\n  abstract addCondiments(): void;\n}\n\nclass Coffee extends Beverage {\n  brew() { console.log(\"Dripping coffee through filter\"); }\n  addCondiments() { console.log(\"Adding sugar and milk\"); }\n}\n\nclass Tea extends Beverage {\n  brew() { console.log(\"Steeping tea\"); }\n  addCondiments() { console.log(\"Adding lemon\"); }\n}\n\n**Key**: Algorithm structure is fixed; only specific steps are customized."
  },
  {
    "id": "cs204-t4-ex15",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Pattern Selection",
    "description": "For each scenario, identify the most appropriate pattern and justify: (1) Parse different config formats (JSON, XML, YAML), (2) Notify UI components of data changes, (3) Add encryption layer to existing stream class.",
    "difficulty": 4,
    "hints": [
      "Consider what problem each pattern solves",
      "Think about flexibility needs",
      "Consider coupling implications",
      "Some scenarios might have multiple valid patterns"
    ],
    "solution": "**1. Parse config formats** → **Strategy Pattern**\nJustification: Different parsing algorithms that can be swapped. Create ConfigParser interface with JSONParser, XMLParser, YAMLParser strategies. Context switches parser based on file extension.\n\n**2. Notify UI of data changes** → **Observer Pattern**\nJustification: One-to-many relationship where data model notifies multiple UI components. Model is Subject; UI components are Observers. Decouples data layer from presentation.\n\n**3. Add encryption to streams** → **Decorator Pattern**\nJustification: Adds responsibility (encryption) dynamically without modifying original stream. EncryptedStream wraps base Stream, encrypts on write, decrypts on read. Can stack with other decorators (compression)."
  },
  {
    "id": "cs204-t4-ex16",
    "subjectId": "cs204",
    "topicId": "cs204-topic-4",
    "type": "written",
    "title": "Pattern Refactoring",
    "description": "Given code with complex switch statements handling different notification channels (email, SMS, push), identify code smells and refactor using appropriate pattern(s).",
    "difficulty": 5,
    "hints": [
      "Switch on type often signals need for polymorphism",
      "Consider Strategy or Command patterns",
      "Factory can help create correct strategy",
      "Think about Open/Closed Principle"
    ],
    "solution": "**Original Code Smells:**\n- Switch statement on notification type\n- Adding new channel requires modifying existing code (violates OCP)\n- Logic for all channels in one place\n\n**Refactored Solution using Strategy + Factory:**\n\ninterface NotificationChannel {\n  send(message: string, recipient: string): void;\n}\n\nclass EmailChannel implements NotificationChannel { /* email logic */ }\nclass SMSChannel implements NotificationChannel { /* SMS logic */ }\nclass PushChannel implements NotificationChannel { /* push logic */ }\n\nclass NotificationFactory {\n  static create(type: string): NotificationChannel {\n    const channels = { email: EmailChannel, sms: SMSChannel, push: PushChannel };\n    return new channels[type]();\n  }\n}\n\nclass NotificationService {\n  send(type: string, message: string, recipient: string) {\n    NotificationFactory.create(type).send(message, recipient);\n  }\n}\n\n**Benefits:** New channels require only new class + factory entry. Each channel's logic is encapsulated."
  },
  {
    "id": "cs204-t5-ex1",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Testing Levels",
    "description": "Explain the four main levels of software testing (unit, integration, system, acceptance). For each level, describe its purpose and who typically performs it.",
    "difficulty": 1,
    "hints": [
      "Consider scope of each level",
      "Think about what defects each level catches",
      "Consider the testing pyramid"
    ],
    "solution": "**Unit Testing**: Tests individual functions/methods in isolation. Catches logic errors. Performed by developers.\n\n**Integration Testing**: Tests interaction between components/modules. Catches interface mismatches. Performed by developers or QA.\n\n**System Testing**: Tests complete integrated system against requirements. Catches end-to-end issues. Performed by QA team.\n\n**Acceptance Testing**: Validates system meets business needs. Performed by customers/end-users (UAT) or automated (ATDD)."
  },
  {
    "id": "cs204-t5-ex2",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Black-box vs White-box",
    "description": "Compare black-box and white-box testing approaches. Give two techniques used in each and explain when to prefer one over the other.",
    "difficulty": 2,
    "hints": [
      "Black-box ignores internal structure",
      "White-box examines code paths",
      "Consider who performs each type"
    ],
    "solution": "**Black-box Testing**: Tests functionality without knowledge of internal implementation.\n- Techniques: Equivalence partitioning, boundary value analysis\n- When to use: Functional testing, UAT, when testers don't have code access\n\n**White-box Testing**: Tests with knowledge of internal code structure.\n- Techniques: Statement coverage, branch coverage, path testing\n- When to use: Unit testing, security testing, when aiming for code coverage\n\n**Key difference**: Black-box tests WHAT the system does; white-box tests HOW it does it."
  },
  {
    "id": "cs204-t5-ex3",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Test-Driven Development",
    "description": "Describe the TDD cycle (Red-Green-Refactor). Implement a simple example: write tests first for a function that calculates factorial.",
    "difficulty": 2,
    "hints": [
      "Red: write failing test first",
      "Green: write minimal code to pass",
      "Refactor: improve code without changing behavior"
    ],
    "solution": "**TDD Cycle:**\n1. **Red**: Write a failing test for desired functionality\n2. **Green**: Write minimal code to make test pass\n3. **Refactor**: Clean up code while keeping tests green\n\n**Example:**\n// RED - Write test first\ntest('factorial of 5 is 120', () => {\n  expect(factorial(5)).toBe(120);\n});\ntest('factorial of 0 is 1', () => {\n  expect(factorial(0)).toBe(1);\n});\n\n// GREEN - Minimal implementation\nfunction factorial(n: number): number {\n  if (n <= 1) return 1;\n  return n * factorial(n - 1);\n}\n\n// REFACTOR - Optimize if needed (iterative version, memoization)"
  },
  {
    "id": "cs204-t5-ex4",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Equivalence Partitioning",
    "description": "A function validates age for a website (valid range: 13-120). Apply equivalence partitioning to identify test cases that minimize redundancy while maximizing coverage.",
    "difficulty": 2,
    "hints": [
      "Identify valid and invalid partitions",
      "One test per partition is sufficient",
      "Consider boundary between partitions"
    ],
    "solution": "**Partitions Identified:**\n1. Invalid (below range): age < 13\n2. Valid: 13 ≤ age ≤ 120\n3. Invalid (above range): age > 120\n4. Invalid (non-numeric or negative): age < 0\n\n**Test Cases (one per partition):**\n- age = 10 → Invalid (below)\n- age = 50 → Valid\n- age = 130 → Invalid (above)\n- age = -5 → Invalid (negative)\n\n**Rationale:** Values within same partition should behave identically. Testing age=50 is representative of all valid ages 13-120."
  },
  {
    "id": "cs204-t5-ex5",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Boundary Value Analysis",
    "description": "Using the same age validation (13-120), apply boundary value analysis to identify additional test cases beyond equivalence partitioning.",
    "difficulty": 2,
    "hints": [
      "Test at exact boundaries",
      "Test one value on each side of boundary",
      "Boundaries are where defects often hide"
    ],
    "solution": "**Boundary Values for age 13-120:**\n\nLower boundary (13):\n- age = 12 → Invalid (just below)\n- age = 13 → Valid (at boundary)\n- age = 14 → Valid (just above)\n\nUpper boundary (120):\n- age = 119 → Valid (just below)\n- age = 120 → Valid (at boundary)\n- age = 121 → Invalid (just above)\n\n**Additional boundaries:**\n- age = 0 → Invalid (zero boundary)\n- age = -1 → Invalid (negative boundary)\n\n**Rationale:** Off-by-one errors are common; BVA specifically targets these boundaries."
  },
  {
    "id": "cs204-t5-ex6",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Code Coverage Metrics",
    "description": "Explain statement coverage, branch coverage, and path coverage. Given a function with an if-else statement, show what tests achieve each coverage level.",
    "difficulty": 3,
    "hints": [
      "Statement: every line executed",
      "Branch: every decision outcome",
      "Path: every possible route through code"
    ],
    "solution": "function checkValue(x: number): string {\n  if (x > 0) {\n    return \"positive\";\n  } else {\n    return \"non-positive\";\n  }\n}\n\n**Statement Coverage** (execute every statement):\n- Test: x=1 → covers lines 2,3\n- Test: x=-1 → covers lines 4,5\n- Result: 100% statement coverage\n\n**Branch Coverage** (every decision true/false):\n- Test: x=1 → if branch (true)\n- Test: x=-1 → else branch (false)\n- Result: 100% branch coverage\n\n**Path Coverage** (all execution paths):\nSame as branch for simple if-else.\nFor nested conditionals or loops, path count grows exponentially.\n\n**Relationship**: Path ⊃ Branch ⊃ Statement"
  },
  {
    "id": "cs204-t5-ex7",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Test Doubles",
    "description": "Explain the differences between stubs, mocks, and fakes. Provide an example scenario where each would be appropriate.",
    "difficulty": 3,
    "hints": [
      "Stubs provide canned answers",
      "Mocks verify interactions",
      "Fakes have working implementations"
    ],
    "solution": "**Stub**: Returns predefined data; no behavior verification.\n- Use case: Testing code that reads from database. Stub returns fixed user object.\n\n**Mock**: Verifies specific interactions occurred.\n- Use case: Testing email service was called with correct parameters after user registration.\n- expect(emailMock).toHaveBeenCalledWith(\"welcome@...\", user.email)\n\n**Fake**: Working implementation unsuitable for production.\n- Use case: In-memory database for integration tests instead of real database.\n\n**Spy**: Real object with tracked interactions.\n- Use case: Verify real logger was called without replacing it.\n\n**Key**: Stubs for state verification; Mocks for behavior verification; Fakes for realistic substitutes."
  },
  {
    "id": "cs204-t5-ex8",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Testing Legacy Code",
    "description": "You inherit code with no tests and tight coupling. Describe strategies for safely adding tests without major refactoring.",
    "difficulty": 4,
    "hints": [
      "Characterization tests capture current behavior",
      "Seams allow dependency injection",
      "Start with highest-risk areas"
    ],
    "solution": "**Strategies:**\n\n1. **Characterization Tests**: Write tests that document current behavior (even if buggy). Establishes safety net before changes.\n\n2. **Find Seams**: Identify points where behavior can be changed without editing code:\n   - Constructor injection\n   - Method parameter injection\n   - Subclass and override\n\n3. **Extract and Override**: Create protected methods for dependencies, override in test subclass.\n\n4. **Sprout Methods/Classes**: Add new functionality in testable new code that existing code calls.\n\n5. **Prioritize by Risk**: Start testing critical paths, frequently changed code, or bug-prone areas.\n\n**Key principle**: Make minimal changes to enable testing; larger refactoring comes after test coverage exists."
  },
  {
    "id": "cs204-t5-ex9",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Integration Testing Strategies",
    "description": "Compare top-down, bottom-up, and sandwich integration testing approaches. Discuss stubs vs drivers needed for each.",
    "difficulty": 3,
    "hints": [
      "Top-down starts from UI/main",
      "Bottom-up starts from utilities",
      "Consider stub/driver overhead"
    ],
    "solution": "**Top-Down Integration:**\n- Start with high-level modules, integrate downward\n- Requires: Stubs for lower modules not yet integrated\n- Pros: Early validation of main control flow\n- Cons: Low-level functionality tested late\n\n**Bottom-Up Integration:**\n- Start with low-level utilities, integrate upward\n- Requires: Drivers to call lower modules\n- Pros: Thoroughly tests foundation first\n- Cons: Working system visible only at end\n\n**Sandwich (Hybrid):**\n- Simultaneous top-down and bottom-up, meeting in middle\n- Requires: Both stubs and drivers\n- Pros: Balances early visibility with thorough testing\n- Cons: More complex coordination"
  },
  {
    "id": "cs204-t5-ex10",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Regression Testing",
    "description": "Explain what regression testing is and why it matters. Describe strategies for managing a growing regression test suite.",
    "difficulty": 2,
    "hints": [
      "Regression catches unintended side effects",
      "Automation is essential",
      "Test selection reduces execution time"
    ],
    "solution": "**Regression Testing**: Re-running tests after code changes to ensure existing functionality still works.\n\n**Why it matters:**\n- Code changes can break existing features\n- Dependencies create unexpected side effects\n- Confidence to refactor and improve code\n\n**Management Strategies:**\n1. **Automation**: Manual regression is unsustainable; automate test execution\n2. **Prioritization**: Run critical tests first; full suite nightly\n3. **Test Selection**: Run only tests affected by changes (risk-based)\n4. **Test Maintenance**: Remove obsolete tests; update for requirement changes\n5. **Continuous Integration**: Run regression on every commit\n\n**Balance**: Comprehensive coverage vs. execution time. Use smoke tests for fast feedback, full regression periodically."
  },
  {
    "id": "cs204-t5-ex11",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Performance Testing Types",
    "description": "Differentiate between load testing, stress testing, and endurance testing. Explain what each measures and when to use it.",
    "difficulty": 3,
    "hints": [
      "Load: expected conditions",
      "Stress: beyond capacity",
      "Endurance: sustained load over time"
    ],
    "solution": "**Load Testing:**\n- Tests system under expected user load\n- Measures: Response time, throughput at normal capacity\n- Use: Verify performance meets SLAs under typical conditions\n\n**Stress Testing:**\n- Tests beyond normal capacity until failure\n- Measures: Breaking point, failure behavior, recovery\n- Use: Find system limits, ensure graceful degradation\n\n**Endurance (Soak) Testing:**\n- Tests sustained load over extended period\n- Measures: Memory leaks, resource exhaustion, degradation over time\n- Use: Detect issues that only appear after hours/days of operation\n\n**Related: Spike Testing** - sudden load increases\n**Related: Scalability Testing** - performance vs. resource changes"
  },
  {
    "id": "cs204-t5-ex12",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Test Case Design",
    "description": "Write comprehensive test cases for a login function that accepts username and password. Include positive, negative, and edge cases.",
    "difficulty": 3,
    "hints": [
      "Valid credentials scenario",
      "Invalid credentials variations",
      "Edge cases: empty, special chars, SQL injection"
    ],
    "solution": "**Positive Tests:**\n- Valid username + valid password → login success\n- Case sensitivity: Username \"User\" vs \"user\" (per requirements)\n\n**Negative Tests:**\n- Valid username + wrong password → fail with message\n- Invalid username + any password → fail (same message for security)\n- Empty username → validation error\n- Empty password → validation error\n- Both empty → validation error\n\n**Edge Cases:**\n- Max length username/password → should work\n- Exceeds max length → validation error\n- Special characters in password → should work\n- SQL injection attempt: \"'; DROP TABLE--\" → sanitized, fails safely\n- Account locked after N failures → lockout message\n\n**Security Tests:**\n- Timing attack: same response time for valid/invalid usernames\n- No password in error messages or logs"
  },
  {
    "id": "cs204-t5-ex13",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Continuous Integration Testing",
    "description": "Design a CI/CD pipeline test strategy. What tests run on commit, on PR, nightly, and before release?",
    "difficulty": 4,
    "hints": [
      "Fast feedback for frequent events",
      "Comprehensive testing less frequently",
      "Consider test execution time"
    ],
    "solution": "**On Every Commit (< 5 min):**\n- Linting and static analysis\n- Unit tests\n- Build verification\n\n**On Pull Request (< 15 min):**\n- All commit checks\n- Integration tests\n- Code coverage check\n- Security scanning (SAST)\n\n**Nightly (< 2 hours):**\n- Full regression suite\n- Performance benchmarks\n- End-to-end UI tests\n- Dependency vulnerability scan\n\n**Before Release:**\n- All of above\n- Smoke tests in staging environment\n- Penetration testing\n- UAT sign-off\n- Load/stress testing\n\n**Key Principle**: Fast tests run often; slow comprehensive tests run less frequently but before release."
  },
  {
    "id": "cs204-t5-ex14",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Mutation Testing",
    "description": "Explain mutation testing and how it evaluates test suite quality. What are mutants, and what does it mean to kill a mutant?",
    "difficulty": 4,
    "hints": [
      "Mutants are modified versions of code",
      "Good tests should detect (kill) mutants",
      "Surviving mutants indicate weak tests"
    ],
    "solution": "**Mutation Testing**: Evaluates test quality by introducing small code changes (mutations) and checking if tests detect them.\n\n**Process:**\n1. Create mutants: modify code (change + to -, < to <=, etc.)\n2. Run tests against each mutant\n3. Mutant \"killed\" if tests fail; \"survives\" if tests pass\n\n**Mutation Operators:**\n- Arithmetic: + → -\n- Relational: < → <=\n- Logical: && → ||\n- Statement deletion\n\n**Mutation Score** = killed mutants / total mutants\n\n**Interpretation:**\n- High score (>80%): Tests effectively detect changes\n- Surviving mutants: Indicate missing test cases or dead code\n- Better quality metric than code coverage alone\n\n**Limitation**: Computationally expensive (run tests N times per mutant)"
  },
  {
    "id": "cs204-t5-ex15",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Testing Anti-patterns",
    "description": "Identify and explain three common testing anti-patterns. For each, describe why it is problematic and how to fix it.",
    "difficulty": 4,
    "hints": [
      "Flaky tests, slow tests, brittle tests",
      "Consider maintenance burden",
      "Think about test independence"
    ],
    "solution": "**1. Flaky Tests**\n- Problem: Tests pass/fail randomly without code changes\n- Causes: Timing dependencies, shared state, external services\n- Fix: Isolate tests, use deterministic data, mock external dependencies\n\n**2. Testing Implementation Details**\n- Problem: Tests break when refactoring even if behavior unchanged\n- Causes: Testing private methods, asserting on internal state\n- Fix: Test public interface and observable behavior only\n\n**3. Slow Test Suite**\n- Problem: Tests take too long, developers skip them\n- Causes: Real database/network calls, unnecessary setup\n- Fix: Use test doubles, optimize setup, parallelize tests\n\n**Also common:**\n- Interdependent tests (order matters)\n- No assertions (tests that can't fail)\n- Testing the framework (verifying library behavior)"
  },
  {
    "id": "cs204-t5-ex16",
    "subjectId": "cs204",
    "topicId": "cs204-topic-5",
    "type": "written",
    "title": "Test Plan Creation",
    "description": "Create a test plan outline for a new e-commerce checkout feature. Include scope, approach, resources, schedule, and risk assessment.",
    "difficulty": 5,
    "hints": [
      "Define what is/isn't being tested",
      "Identify test types needed",
      "Consider dependencies and risks"
    ],
    "solution": "**Test Plan: E-commerce Checkout Feature**\n\n**1. Scope**\n- In scope: Cart→checkout flow, payment processing, order confirmation\n- Out of scope: Inventory management, shipping carrier integration\n\n**2. Test Approach**\n- Unit: Payment calculation, validation logic\n- Integration: Payment gateway, order service\n- E2E: Complete purchase flow\n- Performance: Checkout under 100 concurrent users\n- Security: Payment data handling, PCI compliance\n\n**3. Entry/Exit Criteria**\n- Entry: Feature code complete, test environment ready\n- Exit: 95% test pass rate, no critical bugs, coverage >80%\n\n**4. Resources**\n- Team: 2 QA engineers, 1 automation engineer\n- Tools: Jest, Cypress, k6 for load testing\n- Environments: Dev, staging with payment sandbox\n\n**5. Risks**\n- Payment gateway sandbox availability\n- Test data management for orders\n- Mitigation: Mock payment service, automated data cleanup"
  },
  {
    "id": "cs204-t6-ex1",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "VCS Fundamentals",
    "description": "Explain the difference between centralized (SVN) and distributed (Git) version control systems. List two advantages of each approach.",
    "difficulty": 1,
    "hints": [
      "Consider offline work capabilities",
      "Think about single point of failure",
      "Consider branching complexity"
    ],
    "solution": "**Centralized VCS (SVN):**\n- Single central repository; clients checkout working copies\n- Advantages: Simpler model, fine-grained access control, better for large binary files\n\n**Distributed VCS (Git):**\n- Every developer has full repository copy with complete history\n- Advantages: Offline work, no single point of failure, fast operations, flexible branching\n\n**Key difference:** In DVCS, operations like commit, branch, log are local and instant. Central server is optional, used for sharing."
  },
  {
    "id": "cs204-t6-ex2",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Git Three-Tree Architecture",
    "description": "Explain Git's three trees: Working Directory, Staging Area (Index), and Repository. Describe how files move between them.",
    "difficulty": 2,
    "hints": [
      "Working directory has actual files",
      "Staging area holds next commit",
      "Repository contains committed history"
    ],
    "solution": "**Working Directory:** Actual files on disk. Modified files are \"unstaged.\"\n\n**Staging Area (Index):** Snapshot of files to include in next commit. Files added with `git add`.\n\n**Repository (.git):** Committed history stored as objects.\n\n**Flow:**\n1. Edit files → changes in Working Directory\n2. `git add` → moves changes to Staging Area\n3. `git commit` → saves staged changes to Repository\n\n**Commands:**\n- `git status`: Shows state across all three\n- `git diff`: Working vs Staging\n- `git diff --staged`: Staging vs Repository"
  },
  {
    "id": "cs204-t6-ex3",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Git Branching Basics",
    "description": "Explain how Git branches work internally. What is a branch? What is HEAD? How does creating a branch differ from creating a commit?",
    "difficulty": 2,
    "hints": [
      "Branch is just a pointer",
      "HEAD points to current branch",
      "Commits are immutable objects"
    ],
    "solution": "**Branch:** A lightweight movable pointer to a commit. Stored as 40-char SHA in .git/refs/heads/branchname.\n\n**HEAD:** Special pointer indicating current branch (or commit in detached state). Stored in .git/HEAD.\n\n**Creating branch:** Just creates new pointer file (~41 bytes). Instant, regardless of repository size.\n\n**Creating commit:** Creates commit object (metadata + tree pointer), updates current branch pointer to new commit.\n\n**Example:**\n`git branch feature` → creates .git/refs/heads/feature pointing to current commit\n`git checkout feature` → updates HEAD to point to feature branch"
  },
  {
    "id": "cs204-t6-ex4",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Merge vs Rebase",
    "description": "Compare git merge and git rebase. When would you use each? What are the risks of rebasing?",
    "difficulty": 3,
    "hints": [
      "Merge preserves history",
      "Rebase creates linear history",
      "Never rebase public branches"
    ],
    "solution": "**git merge:**\n- Creates merge commit with two parents\n- Preserves complete history and branch structure\n- Use: Integrating feature branches, public/shared branches\n\n**git rebase:**\n- Replays commits on top of another branch\n- Creates linear, cleaner history\n- Use: Updating feature branch with main, cleaning up before PR\n\n**Rebase Risks:**\n- Rewrites commit history (changes SHAs)\n- **Never rebase commits already pushed/shared** — causes divergent histories for collaborators\n- Can cause repeated conflict resolution\n\n**Golden rule:** Rebase local work, merge shared work."
  },
  {
    "id": "cs204-t6-ex5",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Resolving Merge Conflicts",
    "description": "Explain what causes merge conflicts and describe the step-by-step process to resolve them in Git.",
    "difficulty": 2,
    "hints": [
      "Conflicts occur when same lines changed",
      "Conflict markers show both versions",
      "Must manually edit then mark resolved"
    ],
    "solution": "**Causes:** Same lines modified differently in both branches being merged.\n\n**Resolution Process:**\n1. `git merge feature` → conflict occurs\n2. Git marks files with conflict markers:\n   <<<<<<< HEAD\n   current branch code\n   =======\n   incoming branch code\n   >>>>>>> feature\n3. Edit file to resolve (keep one, both, or new combination)\n4. Remove conflict markers\n5. `git add resolved-file.txt`\n6. `git commit` → completes merge\n\n**Tools:** `git mergetool` launches visual diff tool\n**Prevention:** Frequent integration, small focused changes, communication"
  },
  {
    "id": "cs204-t6-ex6",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Git Flow Workflow",
    "description": "Describe the Git Flow branching model. What are the main branch types and their purposes?",
    "difficulty": 3,
    "hints": [
      "Two long-lived branches",
      "Feature, release, hotfix branches",
      "Consider release management"
    ],
    "solution": "**Long-lived Branches:**\n- **main/master:** Production-ready code, tagged with versions\n- **develop:** Integration branch for features\n\n**Short-lived Branches:**\n- **feature/xxx:** New features; branch from develop, merge back\n- **release/x.x:** Release preparation; branch from develop, merge to main AND develop\n- **hotfix/xxx:** Production fixes; branch from main, merge to main AND develop\n\n**Flow:**\n1. Features developed in feature branches\n2. Features merged to develop\n3. Release branch created for final testing\n4. Release merged to main (tagged) and develop\n5. Hotfixes go directly to main, then develop\n\n**Best for:** Scheduled release cycles, multiple versions in production"
  },
  {
    "id": "cs204-t6-ex7",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Trunk-Based Development",
    "description": "Compare trunk-based development with Git Flow. When is trunk-based development preferred?",
    "difficulty": 3,
    "hints": [
      "Single main branch focus",
      "Short-lived feature branches",
      "Requires strong CI/CD"
    ],
    "solution": "**Trunk-Based Development:**\n- Single main branch (trunk) for integration\n- Short-lived feature branches (<2 days)\n- Frequent commits directly to trunk or quick PRs\n- Feature flags for incomplete features\n\n**vs Git Flow:**\n- Simpler branch structure\n- Faster integration (less merge complexity)\n- Requires robust CI/CD and testing\n- Better for continuous deployment\n\n**When to prefer:**\n- Continuous deployment environments\n- Small, experienced teams\n- Strong automated testing\n- Web services (single version in production)\n\n**When Git Flow better:**\n- Multiple production versions\n- Scheduled releases\n- Less mature CI/CD infrastructure"
  },
  {
    "id": "cs204-t6-ex8",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "CI/CD Pipeline Stages",
    "description": "Design a CI/CD pipeline for a web application. List the stages and what happens in each.",
    "difficulty": 3,
    "hints": [
      "Source → Build → Test → Deploy",
      "Consider different environments",
      "Include quality gates"
    ],
    "solution": "**CI/CD Pipeline Stages:**\n\n1. **Source:** Trigger on push/PR to repository\n   - Checkout code, fetch dependencies\n\n2. **Build:** Compile/bundle application\n   - npm install, npm run build\n   - Create artifacts\n\n3. **Test:** Automated quality checks\n   - Unit tests, linting, type checking\n   - Integration tests\n   - Code coverage threshold\n\n4. **Security Scan:** Vulnerability detection\n   - SAST (static analysis)\n   - Dependency vulnerability scan\n\n5. **Deploy to Staging:** Pre-production environment\n   - Deploy artifacts\n   - Run smoke tests\n\n6. **Manual Approval:** (optional) Human gate\n\n7. **Deploy to Production:**\n   - Blue/green or rolling deployment\n   - Health checks\n   - Automated rollback on failure"
  },
  {
    "id": "cs204-t6-ex9",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Continuous Integration Principles",
    "description": "List and explain five key practices for successful continuous integration.",
    "difficulty": 2,
    "hints": [
      "Frequent integration",
      "Automated builds",
      "Fast feedback"
    ],
    "solution": "**Key CI Practices:**\n\n1. **Maintain Single Source Repository**\n   - Everything needed to build in version control\n   - No dependencies on local machine state\n\n2. **Automate the Build**\n   - Single command builds entire project\n   - Include all tests in build process\n\n3. **Commit Frequently**\n   - At least daily integration to main branch\n   - Smaller changes = easier conflict resolution\n\n4. **Keep Build Fast**\n   - Target <10 minutes for feedback\n   - Parallelize tests, optimize slow tests\n\n5. **Fix Broken Builds Immediately**\n   - Broken build is highest priority\n   - Team stops until fixed\n\n**Additional:** Everyone sees build results, test in production clone, make artifacts easily available."
  },
  {
    "id": "cs204-t6-ex10",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Deployment Strategies",
    "description": "Compare blue-green deployment, canary releases, and rolling deployments. When would you use each?",
    "difficulty": 4,
    "hints": [
      "Blue-green: instant switch",
      "Canary: gradual rollout",
      "Rolling: incremental replacement"
    ],
    "solution": "**Blue-Green Deployment:**\n- Two identical environments (blue=current, green=new)\n- Deploy to green, switch traffic instantly\n- Easy rollback: switch back to blue\n- Use: When instant switchover needed, simple rollback required\n- Con: Requires double infrastructure\n\n**Canary Release:**\n- Route small % of traffic to new version\n- Monitor, gradually increase if healthy\n- Use: High-risk changes, need real user feedback before full rollout\n- Con: Complex routing, version compatibility issues\n\n**Rolling Deployment:**\n- Replace instances incrementally (e.g., 1 at a time)\n- Use: Resource-efficient, Kubernetes default\n- Con: Mixed versions during deploy, slower rollback\n\n**Feature Flags:** Alternative — deploy code, enable via config"
  },
  {
    "id": "cs204-t6-ex11",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Git Hooks",
    "description": "Explain what Git hooks are and describe three useful hooks with practical examples.",
    "difficulty": 3,
    "hints": [
      "Scripts triggered by Git events",
      "Client-side and server-side hooks",
      "Common: pre-commit, pre-push"
    ],
    "solution": "**Git Hooks:** Scripts in .git/hooks/ triggered by Git events.\n\n**Useful Hooks:**\n\n1. **pre-commit:** Runs before commit created\n   - Example: Run linter, formatter, tests\n   - Prevent committing debug code, large files\n   ```bash\n   npm run lint && npm test\n   ```\n\n2. **prepare-commit-msg:** Modify default commit message\n   - Example: Prepend branch name/ticket number\n   - Auto-format commit message template\n\n3. **pre-push:** Runs before push to remote\n   - Example: Run full test suite\n   - Prevent pushing to protected branches\n   - Check for secrets in code\n\n**Server-side:** pre-receive, post-receive (enforce policies)\n**Sharing hooks:** Use tools like Husky (npm) to version control hooks"
  },
  {
    "id": "cs204-t6-ex12",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Pull Request Best Practices",
    "description": "Describe best practices for creating and reviewing pull requests.",
    "difficulty": 2,
    "hints": [
      "Keep PRs focused and small",
      "Clear descriptions",
      "Constructive code review"
    ],
    "solution": "**Creating PRs:**\n- Keep small and focused (single concern)\n- Clear title describing change\n- Description with context, testing done, screenshots\n- Link to issue/ticket\n- Self-review before requesting review\n- Ensure CI passes\n\n**Reviewing PRs:**\n- Understand context before reviewing\n- Check: correctness, readability, tests, edge cases\n- Be constructive: explain why, suggest alternatives\n- Approve, request changes, or comment\n- Use suggestions feature for small fixes\n\n**Team Practices:**\n- Require 1-2 approvals before merge\n- Address all comments before merging\n- Squash or rebase to clean history\n- Delete branch after merge"
  },
  {
    "id": "cs204-t6-ex13",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Git Reset vs Revert",
    "description": "Explain the difference between git reset and git revert. When should each be used? What are the safety considerations?",
    "difficulty": 3,
    "hints": [
      "Reset moves branch pointer",
      "Revert creates new commit",
      "Reset rewrites history"
    ],
    "solution": "**git reset:** Moves branch pointer backward, optionally modifying staging/working directory\n- `--soft`: Move HEAD only (changes staged)\n- `--mixed` (default): Reset staging (changes unstaged)\n- `--hard`: Reset staging AND working directory (destructive!)\n\n**git revert:** Creates new commit that undoes specified commit\n- Preserves history\n- Safe for shared branches\n\n**When to use:**\n- **reset:** Undo local uncommitted/unpushed work\n- **revert:** Undo commits already pushed/shared\n\n**Safety:**\n- **Never reset pushed commits** — causes divergent history\n- **reset --hard loses uncommitted changes permanently**\n- Revert is always safe but creates undo commits"
  },
  {
    "id": "cs204-t6-ex14",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Infrastructure as Code",
    "description": "Explain Infrastructure as Code (IaC) and its relationship with CI/CD. Give examples of IaC tools.",
    "difficulty": 4,
    "hints": [
      "Treat infrastructure like application code",
      "Version control infrastructure",
      "Automate provisioning"
    ],
    "solution": "**Infrastructure as Code:** Managing infrastructure through machine-readable definition files rather than manual configuration.\n\n**Benefits:**\n- Version control for infrastructure changes\n- Reproducible environments\n- Code review for infrastructure\n- Automated provisioning\n- Documentation as code\n\n**Tools:**\n- **Terraform:** Cloud-agnostic, declarative\n- **AWS CloudFormation:** AWS-specific\n- **Ansible/Chef/Puppet:** Configuration management\n- **Kubernetes manifests/Helm:** Container orchestration\n- **Docker/Dockerfiles:** Container images\n\n**CI/CD Integration:**\n1. Infrastructure changes in PR\n2. Plan/preview changes\n3. Review and approve\n4. Apply changes automatically\n5. Environment parity (dev=staging=prod)"
  },
  {
    "id": "cs204-t6-ex15",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "Monorepo vs Polyrepo",
    "description": "Compare monorepo and polyrepo (multi-repo) strategies. What are the trade-offs of each?",
    "difficulty": 4,
    "hints": [
      "Monorepo: one repo, many projects",
      "Polyrepo: one repo per project",
      "Consider scale and tooling"
    ],
    "solution": "**Monorepo:** Single repository containing multiple projects/services\n\n*Pros:*\n- Atomic cross-project changes\n- Shared code and tooling\n- Unified versioning\n- Easier refactoring across projects\n\n*Cons:*\n- Requires specialized tooling at scale\n- CI/CD complexity (selective builds)\n- Permission management harder\n\n**Polyrepo:** Separate repository per project\n\n*Pros:*\n- Clear ownership boundaries\n- Independent deployment cycles\n- Simpler permissions\n- Standard Git tooling works\n\n*Cons:*\n- Cross-repo changes are multiple PRs\n- Code sharing requires publishing packages\n- Version compatibility challenges\n\n**Examples:** Google, Meta use monorepos; microservices teams often use polyrepos."
  },
  {
    "id": "cs204-t6-ex16",
    "subjectId": "cs204",
    "topicId": "cs204-topic-6",
    "type": "written",
    "title": "CI/CD Pipeline Troubleshooting",
    "description": "A CI/CD pipeline is failing intermittently. Describe strategies for diagnosing and fixing flaky pipelines.",
    "difficulty": 5,
    "hints": [
      "Identify flaky tests vs infrastructure issues",
      "Check for race conditions",
      "Consider environment differences"
    ],
    "solution": "**Diagnosis Strategies:**\n\n1. **Collect Data:** Track which stages fail, frequency, patterns (time of day, load)\n\n2. **Check Logs:** Pipeline logs, test output, system metrics during failures\n\n3. **Identify Root Causes:**\n   - **Flaky tests:** Timing dependencies, shared state, external services\n   - **Resource issues:** Memory limits, disk space, CPU contention\n   - **Network:** Timeouts, rate limiting, DNS issues\n   - **Environment drift:** Differences between runs\n\n**Fixes:**\n- **Flaky tests:** Isolate tests, mock externals, use retries cautiously (masks issues)\n- **Resources:** Increase limits, optimize builds, parallelize wisely\n- **Dependencies:** Pin versions, use lock files, local caching\n- **Timeouts:** Increase where appropriate, add health checks\n\n**Prevention:** Hermetic builds, reproducible environments, monitoring and alerting on failure rates"
  },
  {
    "id": "cs204-t7-ex1",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Agile Manifesto Values",
    "description": "List and explain the four core values of the Agile Manifesto. For each value, give a practical example.",
    "difficulty": 1,
    "hints": [
      "Focus on what is valued MORE, not exclusively",
      "Consider customer collaboration",
      "Think about working software"
    ],
    "solution": "**The Four Values:**\n\n1. **Individuals and interactions** over processes and tools\n   - Example: Face-to-face discussion vs lengthy documentation\n\n2. **Working software** over comprehensive documentation\n   - Example: Ship MVP quickly, document as needed\n\n3. **Customer collaboration** over contract negotiation\n   - Example: Regular demos and feedback sessions\n\n4. **Responding to change** over following a plan\n   - Example: Reprioritize backlog based on market changes\n\n**Key:** Items on right still have value; items on left valued MORE."
  },
  {
    "id": "cs204-t7-ex2",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Scrum Roles",
    "description": "Describe the three Scrum roles: Product Owner, Scrum Master, and Development Team. What are their responsibilities?",
    "difficulty": 1,
    "hints": [
      "Product Owner owns the what",
      "Scrum Master facilitates process",
      "Team owns the how"
    ],
    "solution": "**Product Owner:**\n- Owns product backlog and prioritization\n- Represents stakeholders and customers\n- Defines acceptance criteria\n- Makes scope decisions\n\n**Scrum Master:**\n- Facilitates Scrum process and ceremonies\n- Removes impediments for team\n- Coaches team on Agile practices\n- NOT a project manager\n\n**Development Team:**\n- Cross-functional, self-organizing\n- Owns technical decisions (how to build)\n- Commits to sprint work\n- Delivers potentially shippable increment\n\n**Key:** No hierarchy between roles; each has distinct accountability."
  },
  {
    "id": "cs204-t7-ex3",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Scrum Ceremonies",
    "description": "Describe the five Scrum ceremonies. For each, explain its purpose, participants, and typical duration.",
    "difficulty": 2,
    "hints": [
      "Sprint Planning, Daily Standup, Sprint Review, Retrospective",
      "Consider timeboxing",
      "Who attends each ceremony?"
    ],
    "solution": "**Sprint Planning** (2-4 hours for 2-week sprint)\n- Purpose: Select backlog items, create sprint goal\n- Participants: Entire Scrum team\n\n**Daily Standup** (15 minutes)\n- Purpose: Sync, identify blockers (yesterday/today/blockers)\n- Participants: Development team (others observe)\n\n**Sprint Review** (1-2 hours)\n- Purpose: Demo completed work, gather feedback\n- Participants: Scrum team + stakeholders\n\n**Sprint Retrospective** (1-1.5 hours)\n- Purpose: Improve process (what went well/poorly/actions)\n- Participants: Scrum team only\n\n**Backlog Refinement** (ongoing, ~10% of sprint)\n- Purpose: Clarify, estimate, split stories\n- Participants: Product Owner + team"
  },
  {
    "id": "cs204-t7-ex4",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "User Stories",
    "description": "Explain user story format and the INVEST criteria. Write a user story with acceptance criteria for a login feature.",
    "difficulty": 2,
    "hints": [
      "As a [user], I want [feature], so that [benefit]",
      "INVEST: Independent, Negotiable, Valuable...",
      "Acceptance criteria define \"done\""
    ],
    "solution": "**User Story Format:**\n\"As a [type of user], I want [feature], so that [benefit]\"\n\n**INVEST Criteria:**\n- **I**ndependent: Can be developed separately\n- **N**egotiable: Details can be discussed\n- **V**aluable: Delivers user/business value\n- **E**stimable: Team can size it\n- **S**mall: Fits in one sprint\n- **T**estable: Clear pass/fail criteria\n\n**Example:**\n\"As a registered user, I want to log in with email and password, so that I can access my account.\"\n\n**Acceptance Criteria:**\n- Valid email + password → redirects to dashboard\n- Invalid credentials → shows error, no details\n- Account locked after 5 failures\n- \"Forgot password\" link visible"
  },
  {
    "id": "cs204-t7-ex5",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Story Point Estimation",
    "description": "Explain story points and Planning Poker. Why use relative estimation instead of hours?",
    "difficulty": 2,
    "hints": [
      "Story points measure complexity/effort",
      "Relative sizing is easier than absolute",
      "Fibonacci sequence often used"
    ],
    "solution": "**Story Points:** Relative measure of effort/complexity/uncertainty (not time).\n\n**Why Relative Estimation:**\n- Humans better at comparing than absolute estimates\n- Accounts for complexity, not just hours\n- More consistent across team members\n- Velocity normalizes over time\n\n**Planning Poker:**\n1. Product Owner presents story\n2. Team discusses and asks questions\n3. Each member privately selects estimate (Fibonacci: 1,2,3,5,8,13...)\n4. Reveal simultaneously\n5. Discuss outliers, re-estimate until consensus\n\n**Benefits:**\n- Reveals misunderstandings early\n- Avoids anchoring bias\n- Promotes discussion"
  },
  {
    "id": "cs204-t7-ex6",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Kanban vs Scrum",
    "description": "Compare Kanban and Scrum methodologies. When would you choose one over the other?",
    "difficulty": 3,
    "hints": [
      "Scrum has fixed iterations",
      "Kanban is continuous flow",
      "Consider work predictability"
    ],
    "solution": "**Scrum:**\n- Fixed-length sprints (1-4 weeks)\n- Defined roles (PO, SM, Team)\n- Sprint planning, commitment\n- Changes during sprint discouraged\n\n**Kanban:**\n- Continuous flow, no iterations\n- Fewer prescribed roles\n- Pull-based work (WIP limits)\n- Changes anytime\n\n**Choose Scrum when:**\n- Work is plannable in chunks\n- Need predictable delivery cycles\n- Team new to Agile (more structure)\n\n**Choose Kanban when:**\n- Work is unpredictable (support, ops)\n- Need continuous delivery\n- Frequent priority changes\n- Already have process, need improvement\n\n**Hybrid (Scrumban):** Sprints + WIP limits"
  },
  {
    "id": "cs204-t7-ex7",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Code Smells",
    "description": "Define code smells and describe five common ones. For each, explain why it is problematic.",
    "difficulty": 3,
    "hints": [
      "Smells indicate potential problems",
      "Not bugs, but design issues",
      "Long methods, duplicate code..."
    ],
    "solution": "**Code Smells:** Indicators of deeper design problems; not bugs but warning signs.\n\n**Common Smells:**\n\n1. **Long Method:** Hard to understand, test, reuse\n   - Fix: Extract methods\n\n2. **Duplicate Code:** Same logic in multiple places\n   - Fix: Extract to shared function/class\n\n3. **Large Class:** Too many responsibilities\n   - Fix: Extract classes (SRP)\n\n4. **Feature Envy:** Method uses another class's data more than its own\n   - Fix: Move method to appropriate class\n\n5. **Primitive Obsession:** Using primitives instead of small objects (Money, Email)\n   - Fix: Introduce value objects\n\n**Also:** Long parameter lists, switch statements, comments explaining bad code"
  },
  {
    "id": "cs204-t7-ex8",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Refactoring Techniques",
    "description": "Explain Extract Method and Rename refactorings. Demonstrate each with a before/after code example.",
    "difficulty": 3,
    "hints": [
      "Refactoring changes structure, not behavior",
      "Extract Method improves readability",
      "Good names are documentation"
    ],
    "solution": "**Extract Method:** Pull code into new method with descriptive name.\n\n// Before\nfunction processOrder(order) {\n  // validate\n  if (!order.items.length) throw new Error(\"Empty\");\n  if (!order.customer) throw new Error(\"No customer\");\n  // calculate total\n  let total = 0;\n  for (const item of order.items) {\n    total += item.price * item.qty;\n  }\n  return total;\n}\n\n// After\nfunction processOrder(order) {\n  validateOrder(order);\n  return calculateTotal(order.items);\n}\n\n**Rename:** Change name to reveal intent.\n\n// Before: function calc(a, b) { return a * b * 0.0725; }\n// After:  function calculateSalesTax(price, quantity) {...}\n\n**Key:** Tests must pass before and after refactoring."
  },
  {
    "id": "cs204-t7-ex9",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Technical Debt",
    "description": "Define technical debt. Explain intentional vs unintentional debt and strategies for managing it.",
    "difficulty": 3,
    "hints": [
      "Debt metaphor: interest compounds",
      "Not all debt is bad",
      "Balance speed vs quality"
    ],
    "solution": "**Technical Debt:** Sub-optimal code/design choices that create future work. Like financial debt: quick benefit now, pay interest later.\n\n**Types:**\n- **Intentional/Deliberate:** Conscious shortcuts for speed\n  - \"We know this isn't ideal, but ship now, fix later\"\n- **Unintentional/Accidental:** Unknown best practices, evolving requirements\n  - \"We didn't know better\" or \"Requirements changed\"\n\n**Management Strategies:**\n1. **Track it:** Document debt in backlog\n2. **Make visible:** Show stakeholders the cost\n3. **Pay regularly:** Allocate % of each sprint\n4. **Boy Scout Rule:** Leave code better than found\n5. **Refactor during feature work:** Opportunistic cleanup\n\n**Balance:** Some debt is strategic (ship MVP fast); excessive debt slows all future work."
  },
  {
    "id": "cs204-t7-ex10",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Code Review Best Practices",
    "description": "List five best practices for effective code reviews. Explain both reviewer and author responsibilities.",
    "difficulty": 2,
    "hints": [
      "Small PRs are easier to review",
      "Focus on code, not person",
      "Automate what can be automated"
    ],
    "solution": "**For Authors:**\n- Keep PRs small and focused (<400 lines ideal)\n- Write clear description explaining WHY\n- Self-review before requesting review\n- Respond to feedback constructively\n- Don't take criticism personally\n\n**For Reviewers:**\n- Review promptly (within hours, not days)\n- Focus on logic, design, readability—not style (automate that)\n- Ask questions rather than make demands\n- Acknowledge good work, not just problems\n- Approve when good enough, not perfect\n\n**General:**\n- Automate style checks (linting, formatting)\n- Use PR templates for consistency\n- Pair program for complex changes\n- Limit review time (60 min max in one session)\n- Establish team standards"
  },
  {
    "id": "cs204-t7-ex11",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Sprint Velocity",
    "description": "Explain sprint velocity. How is it calculated and used? What are common pitfalls in using velocity?",
    "difficulty": 3,
    "hints": [
      "Velocity = completed story points per sprint",
      "Used for planning, not performance",
      "Average over multiple sprints"
    ],
    "solution": "**Velocity:** Average story points completed per sprint.\n\n**Calculation:**\n- Sum story points of DONE stories (not partial)\n- Average over 3-5 sprints for stability\n- Example: Sprints completed 20, 18, 22 → velocity ≈ 20\n\n**Uses:**\n- Sprint planning: Don't commit more than velocity\n- Release planning: Estimate how many sprints for backlog\n- Capacity planning: Adjust for holidays, team changes\n\n**Pitfalls:**\n- Using for individual performance (encourages gaming)\n- Comparing across teams (points mean different things)\n- Inflating points to look faster\n- Counting incomplete work\n- Changing point scale mid-project\n\n**Key:** Velocity is a planning tool, not a performance metric."
  },
  {
    "id": "cs204-t7-ex12",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Definition of Done",
    "description": "Explain what Definition of Done (DoD) is. Create a sample DoD checklist for a development team.",
    "difficulty": 2,
    "hints": [
      "Shared understanding of complete",
      "Quality gate for all work",
      "Team creates and owns it"
    ],
    "solution": "**Definition of Done:** Shared checklist defining when a story is truly complete. Prevents \"90% done\" syndrome.\n\n**Sample DoD Checklist:**\n\n**Code:**\n- [ ] Code reviewed and approved\n- [ ] Unit tests written and passing\n- [ ] Integration tests passing\n- [ ] No new linting warnings\n- [ ] Code merged to main\n\n**Quality:**\n- [ ] Acceptance criteria verified\n- [ ] No known defects\n- [ ] Performance acceptable\n- [ ] Security review (if applicable)\n\n**Documentation:**\n- [ ] API documentation updated\n- [ ] README updated (if needed)\n\n**Deployment:**\n- [ ] Deployed to staging\n- [ ] Smoke tests passing\n- [ ] Product Owner accepted\n\n**Note:** DoD applies to ALL stories; acceptance criteria are story-specific."
  },
  {
    "id": "cs204-t7-ex13",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Pair Programming",
    "description": "Describe pair programming, including driver/navigator roles. What are the benefits and when is it most valuable?",
    "difficulty": 2,
    "hints": [
      "Two programmers, one computer",
      "Roles should switch frequently",
      "Knowledge sharing benefit"
    ],
    "solution": "**Pair Programming:** Two developers working together at one workstation.\n\n**Roles:**\n- **Driver:** Types code, focuses on immediate task\n- **Navigator:** Reviews, thinks ahead, spots issues\n- Switch roles every 15-30 minutes\n\n**Benefits:**\n- Fewer bugs (real-time review)\n- Knowledge sharing (no silos)\n- Better design decisions\n- Faster onboarding for new team members\n- Focused work (less distraction)\n\n**Most Valuable When:**\n- Complex/critical code\n- Onboarding new team members\n- Learning new technologies\n- Solving difficult problems\n- High-risk changes\n\n**Challenges:** Can be tiring, personalities may clash, requires scheduling. Not needed for all tasks."
  },
  {
    "id": "cs204-t7-ex14",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Retrospective Formats",
    "description": "Describe two different retrospective formats. How do you ensure retrospectives lead to actionable improvements?",
    "difficulty": 3,
    "hints": [
      "Start/Stop/Continue is classic",
      "Keep it varied to stay fresh",
      "Action items are key"
    ],
    "solution": "**Format 1: Start/Stop/Continue**\n- What should we START doing?\n- What should we STOP doing?\n- What should we CONTINUE doing?\n\n**Format 2: 4Ls**\n- **Liked:** What went well?\n- **Learned:** What did we learn?\n- **Lacked:** What was missing?\n- **Longed for:** What do we wish for?\n\n**Ensuring Action:**\n1. Limit to 1-3 actions per retro\n2. Make actions SMART (Specific, Measurable, Assignable...)\n3. Assign owner to each action\n4. Review previous actions at next retro\n5. Track completion rate\n\n**Tips:**\n- Rotate facilitator\n- Vary format to keep engagement\n- Create safe space (no blame)\n- Time-box discussions"
  },
  {
    "id": "cs204-t7-ex15",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Agile Scaling Frameworks",
    "description": "Compare SAFe and LeSS as frameworks for scaling Agile to large organizations.",
    "difficulty": 4,
    "hints": [
      "SAFe is more prescriptive",
      "LeSS is lighter weight",
      "Consider organization size and culture"
    ],
    "solution": "**SAFe (Scaled Agile Framework):**\n- Very prescriptive, detailed practices\n- Roles: Release Train Engineer, Product Manager, etc.\n- Program Increment (PI) planning events\n- Portfolio, program, team levels\n- Best for: Large enterprises, regulated industries\n\n**LeSS (Large-Scale Scrum):**\n- Minimal additions to Scrum\n- Single Product Owner for multiple teams\n- Same sprint for all teams\n- Keeps things simple, fewer new roles\n- Best for: Organizations wanting to stay close to Scrum\n\n**Key Differences:**\n- SAFe adds more structure; LeSS extends Scrum directly\n- SAFe has more ceremonies; LeSS keeps it minimal\n- SAFe better for 50+ teams; LeSS for 2-8 teams\n\n**Choice depends on:** Organization size, culture, existing processes, risk tolerance"
  },
  {
    "id": "cs204-t7-ex16",
    "subjectId": "cs204",
    "topicId": "cs204-topic-7",
    "type": "written",
    "title": "Agile Transformation Challenges",
    "description": "Identify five common challenges when organizations adopt Agile. For each, suggest a mitigation strategy.",
    "difficulty": 5,
    "hints": [
      "Culture change is hardest",
      "Management buy-in crucial",
      "Agile is mindset, not just process"
    ],
    "solution": "**1. Resistance to Change**\n- Challenge: \"We've always done it this way\"\n- Mitigation: Start small (pilot team), show results, involve skeptics\n\n**2. Lack of Management Support**\n- Challenge: Executives expect results without changing behavior\n- Mitigation: Executive coaching, demonstrate ROI, align metrics\n\n**3. Partial Adoption (Agile in Name Only)**\n- Challenge: Cherry-picking practices without mindset shift\n- Mitigation: Training, coaching, address root causes not symptoms\n\n**4. Distributed Teams**\n- Challenge: Time zones, communication barriers\n- Mitigation: Overlap hours, good tooling, occasional in-person meetings\n\n**5. Legacy Processes/Contracts**\n- Challenge: Fixed-scope contracts, waterfall dependencies\n- Mitigation: Renegotiate contracts, create buffers, incremental process change\n\n**Key:** Agile transformation is organizational change, not just development process change."
  }
]