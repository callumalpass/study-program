---
id: cs302-t3-ipv6
title: "IPv6 Protocol"
order: 6
---

# IPv6: The Next Generation

## Why IPv6?

IPv4's 32-bit address space provides approximately 4.3 billion addresses. In the early Internet, this seemed sufficient. However, the explosive growth of the Internet, combined with inefficient early allocation practices, led to address exhaustion. IANA allocated the last IPv4 blocks in 2011, and regional registries have since exhausted their pools.

IPv6 was developed to solve this problem and to address other limitations of IPv4. With 128-bit addresses, IPv6 provides 340 undecillion addresses (3.4 × 10³⁸)—enough for trillions of addresses per person on Earth.

## IPv6 Address Format

IPv6 addresses are 128 bits, written as eight groups of four hexadecimal digits:
```
2001:0db8:85a3:0000:0000:8a2e:0370:7334
```

**Simplification rules**:
1. Leading zeros in each group can be omitted: `0db8` → `db8`
2. One sequence of consecutive all-zero groups can be replaced with `::` (only once per address)

```
2001:0db8:0000:0000:0000:0000:0000:0001
= 2001:db8:0:0:0:0:0:1
= 2001:db8::1
```

**CIDR notation**: Works the same as IPv4
```
2001:db8::/32 (network prefix)
```

## IPv6 Address Types

**Unicast**: Identifies single interface
- Global Unicast: `2000::/3` - Routable on Internet
- Link-Local: `fe80::/10` - Valid only on local link
- Loopback: `::1` - Equivalent to 127.0.0.1

**Multicast**: `ff00::/8` - One-to-many delivery
- `ff02::1` - All nodes on link
- `ff02::2` - All routers on link

**Anycast**: Same address on multiple interfaces; packet goes to nearest one

**No broadcast**: IPv6 uses multicast instead

## IPv6 Header

IPv6 simplifies the header compared to IPv4:

```
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version| Traffic Class |           Flow Label                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Payload Length        |  Next Header  |   Hop Limit   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                         Source Address                        +
|                         (128 bits)                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                      Destination Address                      +
|                         (128 bits)                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

**Improvements over IPv4**:
- Fixed 40-byte header (no variable-length options in main header)
- No header checksum (relies on link layer and transport layer)
- No fragmentation fields (only endpoints fragment)
- Extension headers for optional features

## Key Differences from IPv4

**No NAT required**: Abundant addresses allow globally unique addresses for all devices.

**Mandatory IPsec**: Security was designed in, not added later.

**No fragmentation by routers**: If packet too large, source must reduce size. Minimum MTU is 1280 bytes.

**Autoconfiguration (SLAAC)**: Hosts can configure addresses without DHCP using Stateless Address Autoconfiguration.

**Neighbor Discovery**: ICMPv6-based protocol replaces ARP and provides router discovery.

**Simpler header**: Faster processing at routers.

## Address Autoconfiguration

IPv6 hosts can configure their addresses automatically:

**SLAAC (Stateless)**:
1. Generate link-local address from interface identifier
2. Verify uniqueness via Duplicate Address Detection (DAD)
3. Receive Router Advertisement with network prefix
4. Combine prefix with interface identifier for global address

**DHCPv6 (Stateful)**: Similar to IPv4 DHCP, server assigns addresses.

**Privacy Extensions**: Generate random interface identifiers to prevent tracking.

## IPv6 Transition

IPv4 and IPv6 are not directly compatible. Transition mechanisms include:

**Dual Stack**: Run both protocols simultaneously. Most common approach.

**Tunneling**: Encapsulate IPv6 packets in IPv4 for transit across IPv4 networks.
- 6to4: Automatic tunneling using IPv4 address
- Teredo: Tunneling through NAT
- ISATAP: Intrasite tunneling

**Translation**: Convert between IPv4 and IPv6 packets.
- NAT64/DNS64: Allow IPv6-only clients to reach IPv4 servers

## IPv6 Adoption

IPv6 adoption has been gradual:
- Major content providers (Google, Facebook) support IPv6
- Mobile networks heavily use IPv6
- Enterprise adoption lagging
- Many ISPs offer native IPv6

**Check your connectivity**: Test at test-ipv6.com

The Internet is gradually transitioning, but IPv4 will remain important for years to come.
