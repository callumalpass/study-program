import type { Exam } from '@/core/types';

export const cs101Exams: Exam[] = [
  {
    id: 'cs101-exam-midterm',
    subjectId: 'cs101',
    title: 'CS101 Midterm',
    durationMinutes: 60,
    instructions: [
      'Closed-book style: rely on concepts, not copy/paste.',
      'Answer all questions; passing is 70% or higher.',
      'Fill-in questions expect lowercase, trimmed answers.',
      'Coding prompts include runnable tests—ensure they pass.',
    ],
    questions: [
      {
        id: 'mid-q1',
        type: 'multiple_choice',
        prompt: 'What is the primary reason to wrap logic in functions?',
        options: [
          'To make code longer',
          'To reuse logic, reduce repetition, and improve readability',
          'To slow down execution',
          'To avoid using variables',
        ],
        correctAnswer: 1,
        explanation: 'Functions encapsulate behavior for reuse, clarity, testing, and separation of concerns.',
      },
      {
        id: 'mid-q2a',
        type: 'written',
        prompt: 'Briefly define "immutable" and give one immutable built-in Python type.',
        correctAnswer: 'immutable',
        explanation: 'Immutable objects cannot be changed after creation; examples include tuples and strings.',
      },
      {
        id: 'mid-q2',
        type: 'true_false',
        prompt: 'A list in Python preserves insertion order.',
        correctAnswer: true,
        explanation: 'Lists are ordered collections; iteration returns items in the order they were appended.',
      },
      {
        id: 'mid-q3',
        type: 'fill_blank',
        prompt: 'In Python, the keyword used to handle an exceptional case is ____.',
        correctAnswer: 'try',
        explanation: 'Use try/except blocks to handle exceptions gracefully.',
      },
      {
        id: 'mid-q4',
        type: 'multiple_choice',
        prompt: 'Given `grades = {"alice": 90, "bob": 80}` what does `grades.get("carol", 0)` return?',
        options: ['KeyError', 'None', '0', '"carol"'],
        correctAnswer: 2,
        explanation: 'dict.get returns the default value (0) when the key is missing.',
      },
      {
        id: 'mid-q4a',
        type: 'coding',
        prompt: 'Write a function `first_even(nums)` that returns the first even number in a list or -1 if none are found.',
        starterCode: 'def first_even(nums):\n    # TODO: implement\n    return -1',
        language: 'python',
        solution: 'def first_even(nums):\n    for n in nums:\n        if n % 2 == 0:\n            return n\n    return -1',
        testCases: [
          { input: 'first_even([1,3,5])', expectedOutput: '-1', isHidden: false, description: 'No even values' },
          { input: 'first_even([1,4,6])', expectedOutput: '4', isHidden: false, description: 'Returns first even' },
          { input: 'first_even([2])', expectedOutput: '2', isHidden: false, description: 'Single element' },
        ],
        correctAnswer: true,
        explanation: 'Iterate and return the first value divisible by 2; default to -1.',
      },
      {
        id: 'mid-q5',
        type: 'code_output',
        prompt: 'What is printed by this code?',
        codeSnippet: `scores = [72, 85, 91]\navg = sum(scores) / len(scores)\nif avg >= 90:\n    print("A")\nelif avg >= 80:\n    print("B")\nelse:\n    print("C")`,
        correctAnswer: 'B',
        explanation: 'Average is (72+85+91)/3 = 82.67 so the elif branch prints B.',
      },
      {
        id: 'mid-q6',
        type: 'multiple_choice',
        prompt: 'Which file mode allows reading and writing, creating the file if it does not exist?',
        options: ['"r"', '"w"', '"a"', '"w+"'],
        correctAnswer: 3,
        explanation: '"w+" opens for reading/writing and creates/truncates the file.',
      },
      {
        id: 'mid-q7',
        type: 'fill_blank',
        prompt: 'Completing a loop early when a condition is met uses the keyword ____.',
        correctAnswer: 'break',
        explanation: 'Use break to exit the loop immediately.',
      },
      {
        id: 'mid-q8',
        type: 'multiple_choice',
        prompt: 'What data structure best models a mapping of product ids to prices?',
        options: ['List', 'Tuple', 'Dictionary', 'Set'],
        correctAnswer: 2,
        explanation: 'Dictionaries map keys to values efficiently.',
      },
      {
        id: 'mid-q9',
        type: 'multiple_choice',
        prompt: 'What does `list(range(1, 5))` produce?',
        options: ['[1, 2, 3, 4, 5]', '[0, 1, 2, 3, 4]', '[1, 2, 3, 4]', '[0, 1, 2, 3]'],
        correctAnswer: 2,
        explanation: 'range upper-bound is exclusive, so 1–4.',
      },
    ],
  },
  {
    id: 'cs101-exam-final',
    subjectId: 'cs101',
    title: 'CS101 Final Exam',
    durationMinutes: 90,
    instructions: [
      'Mix of multiple choice, code reading, short answers, and coding with tests.',
      'Assume Python 3 semantics.',
      'Aim for at least 70% to pass.',
      'Run tests on coding prompts; passing tests is required for full credit.',
    ],
    questions: [
      {
        id: 'final-q1',
        type: 'multiple_choice',
        prompt: 'What is the time complexity of accessing an element by index in a Python list?',
        options: ['O(1)', 'O(log n)', 'O(n)', 'O(n log n)'],
        correctAnswer: 0,
        explanation: 'Lists offer O(1) average-time random access by index.',
      },
      {
        id: 'final-q2',
        type: 'true_false',
        prompt: 'Using a mutable default argument in a function can lead to unexpected behavior across calls.',
        correctAnswer: true,
        explanation: 'Default arguments are evaluated once; mutating them persists across invocations.',
      },
      {
        id: 'final-q3',
        type: 'code_output',
        prompt: 'What does this code print?',
        codeSnippet: `def make_counter():\n    count = 0\n    def inc():\n        nonlocal count\n        count += 1\n        return count\n    return inc\n\nc = make_counter()\nprint(c())\nprint(c())`,
        correctAnswer: '1\n2',
        explanation: 'The closure keeps state; first call returns 1, second returns 2, each on its own line.',
      },
      {
        id: 'final-q3b',
        type: 'coding',
        prompt: 'Implement `count_vowels(s)` that returns how many vowels (a, e, i, o, u) appear in a lowercase string.',
        starterCode: 'def count_vowels(s: str) -> int:\n    # TODO: implement\n    return 0',
        language: 'python',
        solution: 'def count_vowels(s: str) -> int:\n    vowels = set(\"aeiou\")\n    total = 0\n    for ch in s:\n        if ch in vowels:\n            total += 1\n    return total',
        testCases: [
          { input: 'count_vowels("hello")', expectedOutput: '2', isHidden: false, description: 'basic' },
          { input: 'count_vowels("sky")', expectedOutput: '0', isHidden: false, description: 'no vowels' },
          { input: 'count_vowels("onomatopoeia")', expectedOutput: '8', isHidden: false, description: 'repeated vowels' },
        ],
        correctAnswer: true,
        explanation: 'Iterate characters and count membership in a vowel set.',
      },
      {
        id: 'final-q4',
        type: 'multiple_choice',
        prompt: 'Which option best describes a unit test?',
        options: [
          'A manual run-through of the UI',
          'A small, automated check of a single function or behavior',
          'A test of the production database',
          'A performance benchmark only',
        ],
        correctAnswer: 1,
        explanation: 'Unit tests validate isolated behaviors automatically.',
      },
      {
        id: 'final-q4b',
        type: 'written',
        prompt: 'Name one advantage of using a dictionary over a list for lookups.',
        correctAnswer: 'constant',
        explanation: 'Dictionaries give O(1) average-time lookups by key, rather than O(n) scans.',
      },
      {
        id: 'final-q5',
        type: 'fill_blank',
        prompt: 'The built-in function used to iterate with indexes over a list is ____.',
        correctAnswer: 'enumerate',
        explanation: 'enumerate provides (index, value) pairs when iterating.',
      },
      {
        id: 'final-q6',
        type: 'multiple_choice',
        prompt: 'Given `nums = [1, 2, 3, 4]`, what does `[n*n for n in nums if n % 2 == 0]` produce?',
        options: [
          '[1, 4, 9, 16]',
          '[1, 9]',
          '[4, 16]',
          '[2, 4]',
        ],
        correctAnswer: 2,
        explanation: 'It squares even numbers only: 2→4, 4→16.',
      },
      {
        id: 'final-q7',
        type: 'true_false',
        prompt: 'Files opened with "with open(...)" are automatically closed when the block exits.',
        correctAnswer: true,
        explanation: 'The context manager handles closing, even on exceptions.',
      },
      {
        id: 'final-q8',
        type: 'code_output',
        prompt: 'What does this snippet print?',
        codeSnippet: `items = {"a": 1, "b": 2}\nfor key, value in items.items():\n    print(f"{key}:{value}")`,
        correctAnswer: 'a:1\nb:2',
        explanation: 'items.items() yields key/value pairs; they print on separate lines in insertion order.',
      },
      {
        id: 'final-q9',
        type: 'code_output',
        prompt: 'What is printed?',
        codeSnippet: `def mystery(n):\n    total = 0\n    for i, ch in enumerate(str(n)):\n        if i % 2 == 0:\n            total += int(ch)\n    return total\n\nprint(mystery(12345))`,
        correctAnswer: '9',
        explanation: 'Indexes 0,2,4 digits are 1+3+5 = 9.',
      },
      {
        id: 'final-q10',
        type: 'coding',
        prompt: 'Write `unique_sorted(nums)` that returns a sorted list of unique integers from the input list.',
        starterCode: 'def unique_sorted(nums):\n    # TODO: implement\n    return []',
        language: 'python',
        solution: 'def unique_sorted(nums):\n    return sorted(set(nums))',
        testCases: [
          { input: 'unique_sorted([3,1,2,2,3])', expectedOutput: '[1, 2, 3]', isHidden: false, description: 'dedupe and sort' },
          { input: 'unique_sorted([])', expectedOutput: '[]', isHidden: false, description: 'empty' },
          { input: 'unique_sorted([5, -1, 5, 0])', expectedOutput: '[-1, 0, 5]', isHidden: false, description: 'mix of numbers' },
        ],
        correctAnswer: true,
        explanation: 'Use set to dedupe, then sorted().',
      },
    ],
  },
];
