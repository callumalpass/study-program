# Grammar Definition

A **Context-Free Grammar (CFG)** is a formal system for generating strings. CFGs can describe nested structures that regular languages cannot, making them essential for programming language syntax.

## Formal Definition

A CFG is a 4-tuple G = (V, Σ, R, S) where:

- **V** is a finite set of variables (non-terminals)
- **Σ** is a finite set of terminals (disjoint from V)
- **R** is a finite set of production rules of the form A → α
  - A ∈ V (a single variable on the left)
  - α ∈ (V ∪ Σ)* (string of variables and terminals on the right)
- **S ∈ V** is the start variable

## Notation Conventions

- Variables: uppercase letters (A, B, S, ...)
- Terminals: lowercase letters, digits, symbols (a, b, 0, 1, +, ...)
- Mixed strings (α, β, γ, ...): elements of (V ∪ Σ)*
- Multiple rules with same left side: A → α | β | γ

## Example: Balanced Parentheses

G = ({S}, {(, )}, R, S) with rules:
- S → (S)
- S → SS
- S → ε

This generates: ε, (), (()), ()(), (())(), ...

## Example: Arithmetic Expressions

G = ({E, T, F}, {+, *, (, ), id}, R, E)

Rules:
- E → E + T | T
- T → T * F | F
- F → (E) | id

Generates expressions like: id, id + id, id * id + id, (id + id) * id

## Productions and Derivations

A **derivation** shows how a string is generated from S.

Single step: αAβ ⇒ αγβ if A → γ is a rule

Multiple steps: ⇒* (zero or more steps)

**Example**: S ⇒ (S) ⇒ (SS) ⇒ ((S)S) ⇒ (()S) ⇒ (()())

## Language of a Grammar

The **language generated by G** is:

L(G) = {w ∈ Σ* | S ⇒* w}

Strings of terminals derivable from the start variable.

## Types of Derivations

### Leftmost Derivation
Always expand the leftmost variable.

S ⇒_lm αAβ (A is the leftmost variable in αAβ)

### Rightmost Derivation
Always expand the rightmost variable.

S ⇒_rm αAβ (A is the rightmost variable)

For unambiguous grammars, these give unique derivations for each string.

## Sentential Forms

A **sentential form** is any string derivable from S (may contain variables).

A **sentence** is a sentential form with no variables (a string in L(G)).

## CFG Design Techniques

### Union Construction
For L₁ ∪ L₂:
- Add new start S
- Add S → S₁ | S₂

### Concatenation Construction
For L₁L₂:
- Add new start S
- Add S → S₁S₂

### Star Construction
For L*:
- Add new start S
- Add S → SS₁ | ε

## Comparison with Regular Grammars

**Regular grammars** restrict productions to:
- A → aB (right-linear)
- A → a
- A → ε

These generate exactly the regular languages. CFGs allow more general rules.

## Why Context-Free?

The name "context-free" means the left side is always a single variable—we can replace A with γ regardless of the **context** (surrounding symbols).

**Context-sensitive** grammars allow αAβ → αγβ, where the context matters.
